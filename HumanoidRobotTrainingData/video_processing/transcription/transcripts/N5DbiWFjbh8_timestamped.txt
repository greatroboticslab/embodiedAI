N5DbiWFjbh8
https://www.youtube.com/watch?v=N5DbiWFjbh8
Unknown Category

[00:00:00.480 → 00:00:05.680] but yeah essentially you're just going to fly your quad line of sight or have it freak out on you
[00:00:06.880 → 00:00:11.120] all right so real quick i just wanted to give a disclaimer that this isn't a betaflight tutorial
[00:00:11.120 → 00:00:15.280] for instance on how to update betaflight or how to set up with your build this is just going off
[00:00:15.280 → 00:00:19.200] of the assumption that you already have that all done and you're just looking to get that perfect
[00:00:19.200 → 00:00:23.680] pid tune or improve your bid or you're just curious on how i tune my builds and another thing to
[00:00:23.680 → 00:00:29.520] mention is that every quad is different so they all require their own unique tune so please don't
[00:00:29.520 → 00:00:34.000] copy my end result and expect it to work flawlessly with your build so with that out of the way
[00:00:34.000 → 00:00:37.680] essentially you're gonna need three different softwares first being betaflight configurator
[00:00:37.680 → 00:00:42.800] obviously then black box explorer and then pid toolbox i'll have links to all these in the
[00:00:42.800 → 00:00:47.360] description but for the betaflight configurator make sure it's on the latest release at the time of this
[00:00:47.360 → 00:00:53.120] recording it's 10.9 essentially you're just going to scroll down to these download links um i have
[00:00:53.120 → 00:00:58.160] windows so i would just do win64 but i already have it downloaded so i'm not going to save it same thing
[00:00:58.160 → 00:01:03.360] for black box explorer you just scroll down click the download link and then for pid toolbox you're
[00:01:03.360 → 00:01:10.560] going to go over here under releases and then just scroll down and download it for years this uh pid
[00:01:10.560 → 00:01:17.280] toolbox software it can be kind of finicky to install it takes a minute it's got to install some other
[00:01:17.280 → 00:01:23.360] things but and sometimes if you create a shortcut on your desktop for example like this there's a chance
[00:01:23.360 → 00:01:27.920] that it won't load if the application isn't launching after you installed it what you want to do
[00:01:27.920 → 00:01:38.160] is right click open file location and then um open it from here and this should work if that happens
[00:01:38.160 → 00:01:42.720] now that you have all these softwares downloaded obviously open up betaflight assuming you already
[00:01:42.720 → 00:01:47.920] have updated your quad the latest release of betaflight 4.4 you probably can follow along if
[00:01:47.920 → 00:01:53.920] you're using 4.3 i would recommend updating the 4.4 they improved uh some dynamic notch filtering and
[00:01:53.920 → 00:01:59.760] anti-gravity they also supposedly improved that so heading over to the pid tuning um these numbers
[00:01:59.760 → 00:02:06.240] are going to be different from yours essentially i just applied the express lrs preset at 500 hertz so
[00:02:06.240 → 00:02:10.160] yeah after i applied that preset that's what changed these numbers so just make sure you already have your
[00:02:10.160 → 00:02:14.160] right control preset like i said in the beginning this is going off the assumption you already know how
[00:02:14.160 → 00:02:20.000] to work with betaflight you just want that perfect pit tune next i go to dynamic damping i actually
[00:02:20.000 → 00:02:25.760] change this value from 37 to 40. and then another thing dynamic idle i enable this and i like to set
[00:02:25.760 → 00:02:32.640] it to 25 that fits my props i run a 3.5 degree pitch if you have like a three degree pitch such as the
[00:02:32.640 → 00:02:38.640] ethics pb and j's or gempan 3s i would suggest maybe send that to 30 or if you have a steeply pitched prop
[00:02:38.640 → 00:02:45.040] like ethics p4s or like a four degree pitch then i would set this to 20. but for my case i'm going to
[00:02:45.040 → 00:02:50.480] have it set to 25 just click enter and as far as for the rest of these that's pretty much how i leave
[00:02:50.480 → 00:02:55.520] it for all my builds all right so with that out of the way go ahead and head over to the black box tab
[00:02:55.520 → 00:03:00.640] make sure you erase any remaining storage you have so with that being done make sure you just select
[00:03:00.640 → 00:03:05.680] the right settings for your specific setup usually it's just onboard flash for logging device to have
[00:03:05.680 → 00:03:11.840] it minimum two kilohertz and then for the debug i don't think you need it but i just like to set it to
[00:03:11.840 → 00:03:16.640] gyro underscore scale that could help with the filtering we're gonna have to view later but
[00:03:17.520 → 00:03:22.000] save and reboot so now that you have your black box settings in go ahead and head back over to the
[00:03:22.000 → 00:03:27.120] pit tuning tab first of all you're going to turn off feet forward then you're going to turn off dynamic
[00:03:27.120 → 00:03:30.800] damping and then you're going to turn off your eye gains essentially you're just going to be finding
[00:03:30.800 → 00:03:35.680] the pd balance and in order to do that you want to take your dampening slider and just bring it down to
[00:03:35.680 → 00:03:41.680] 0.6 and essentially you're going to fly your quad line of sight for about 30 seconds to a
[00:03:41.680 → 00:03:46.960] minute land it and then bring this value up to 0.8 do the same exact thing and just go up essentially
[00:03:46.960 → 00:03:52.640] in the increments of 0.2 so next would be one 1.2 and then even as high as 1.4 and what you're going
[00:03:52.640 → 00:03:56.000] to do while you're flying line of sight is you're going to be moving your pitch and roll axis
[00:03:56.560 → 00:04:00.960] essentially like in circles like if you just follow my mouse just move your stick like this or just up
[00:04:00.960 → 00:04:06.000] and down like crazy or left to right like crazy all for about 30 seconds to a minute like i said before
[00:04:06.000 → 00:04:11.600] another thing to mention probably self-explanatory but make sure your quad is uh set up exactly how you fly it
[00:04:11.600 → 00:04:16.240] like if you fly with a gopro make sure the gopro is on if you fly if you tend to crash a lot you might
[00:04:16.240 → 00:04:20.800] want to put on damage props these ones are somewhat damaged i don't know how well the gopro can pick it
[00:04:20.800 → 00:04:27.360] up but yeah essentially however you fly it out like in the field or at the bando set it up to exactly how
[00:04:27.360 → 00:04:29.600] how you black box it
[00:04:57.360 → 00:05:05.040] and that's how you know you do your answer to your hop now that you have all those tests completed
[00:05:05.040 → 00:05:12.720] go ahead and plug your quad back in head over to black box and then activate mass storage device mode
[00:05:13.280 → 00:05:16.880] and what you're going to do is save all these files except for this beta flight underscore all
[00:05:20.400 → 00:05:24.640] once that's completed go ahead and unplug your quad and plug it back in
[00:05:24.640 → 00:05:32.800] head back over to beta fleet go over to black box and erase flash and you might as well just go
[00:05:32.800 → 00:05:37.920] ahead and minimize beta flight so now we're going to be working with pid toolbox so go ahead and open
[00:05:37.920 → 00:05:43.680] that up now that pid toolbox is open simply select the select button right here and locate your black
[00:05:43.680 → 00:05:53.760] box files in my case it'd be in stuff drone black box siren of five and i have two files another thing too
[00:05:53.760 → 00:05:59.600] a lot of uh youtubers or other people attuned say to unplug the battery between each flight but i don't
[00:05:59.600 → 00:06:04.480] do that and it works perfectly fine i know probably going to start some controversy in the comments let
[00:06:04.480 → 00:06:13.360] me know how wrong i am but i mean it works for me at the end of the day so as you can see this first log
[00:06:13.360 → 00:06:20.880] had two flights on it so i'm just gonna select them both and then these were the other two logs i did
[00:06:20.880 → 00:06:25.200] and this one right here this is where i had too high of d gains so that's why it's only six seconds
[00:06:25.200 → 00:06:31.440] and there's no point of selecting that after this all loads what you want to do is come over here to
[00:06:31.440 → 00:06:39.440] the step response tool highlight all of these and then click y correction and as you can see this is
[00:06:39.440 → 00:06:47.360] the data from uh this these values right here represent 0.6 this represents 0.8 1 and then 1.2
[00:06:47.360 → 00:06:55.440] and based off of these lines it looks like 0.8 it is so now we head over we head back over into beta flight
[00:06:56.640 → 00:06:57.680] plug or quad in
[00:07:01.040 → 00:07:09.360] and 0.8 was my best result so put that there save all right so real quick i just wanted to explain how
[00:07:09.920 → 00:07:15.280] these lines should look ideally so right here is like a perfect example you want the line to slightly
[00:07:15.280 → 00:07:21.440] overshoot and then get back right on uh to this center point so this right here is actually perfect
[00:07:21.440 → 00:07:27.280] the lighter red value on the pitch axis though it's actually slightly under damped so with that being the
[00:07:27.280 → 00:07:34.160] case i'm actually going to head over to the pit to me and for pitch dampening i lowered it down to 0.95
[00:07:34.160 → 00:07:38.800] because it's just very subtle yeah like it's almost perfect just slightly under damped you want it to
[00:07:38.800 → 00:07:46.640] look like this light red line if i just click reset run that like this just right onto there maybe a
[00:07:46.640 → 00:07:52.480] little overshoot yes this is perfect this is almost perfect all right next step we're going to be
[00:07:52.480 → 00:07:57.680] messing with the master multiplier now this might also start up some controversy but just hear me out
[00:07:57.680 → 00:08:04.720] on this if you are running a fast controlling such as express rs ghost or tracer as in you're running a
[00:08:04.720 → 00:08:11.120] high packet rate uh basically that creates a noisy signal so when you have a noisy signal you need to
[00:08:11.120 → 00:08:16.240] filter it out more so what i'm getting at is that if you are running one of those fast control links
[00:08:16.240 → 00:08:21.120] your master multiplier is going to be lower than someone who's running a slower control link such as
[00:08:21.120 → 00:08:31.440] crossfire like the dji transmitter so i have been able to get my quads up to 1.4 but i like to play it on
[00:08:31.440 → 00:08:38.400] the safe side so i'm guessing it's going to get up to like 1.3 or 1.2 um hopefully this doesn't come
[00:08:38.400 → 00:08:44.880] across as confusing but if you have a fast control link i would go up in increments of 0.1 if you have
[00:08:44.880 → 00:08:50.160] a slower controlling i would go up in increments of 0.2 so you might be asking what's the limit that i
[00:08:50.160 → 00:08:56.400] should take this slider to and honestly after every time you land i would feel the motors and once they
[00:08:56.400 → 00:09:02.560] start feeling just a little bit uh too hot that's probably a good place to stop or if you start
[00:09:02.560 → 00:09:07.440] hearing flutter obviously or if you start hearing a raining noise that would be a good place to stop
[00:09:07.440 → 00:09:14.080] and usually about the 1.6 area and above that's when those uh instances will occur that just all
[00:09:14.080 → 00:09:34.480] depends on your control link and how well your quad is built now that we're done logging those files i
[00:09:34.480 → 00:09:40.160] actually went up to 1.5 on the master multiplier before things started going haywire okay so now
[00:09:40.160 → 00:09:44.320] you're going to notice that the line is starting to get a little more swiggly this is completely
[00:09:44.320 → 00:09:49.200] fine this is what happens when you turn up pids everything gets more precise and any little
[00:09:49.200 → 00:09:55.440] imperfections really start to show don't be too worried all right so now that all these black box
[00:09:55.440 → 00:10:03.920] logs are loaded this is one point or this is where the master multiplier is at 1.1 1.2 1.3 1.4 and 1.5
[00:10:03.920 → 00:10:08.800] over here is your latency your your pid latency and as you can see the more we moved up the master
[00:10:08.800 → 00:10:15.360] multiplier the less latency we had yours will probably vary usually it's like a curve that goes down
[00:10:15.360 → 00:10:20.880] steeply and then kind of levels out somewhere mine's still like a linear curve which is kind of ironic
[00:10:20.880 → 00:10:28.160] i've never seen that before but uh knowing based off of my experience i'm gonna leave the master multiplier
[00:10:28.160 → 00:10:37.680] at 1.4 so this green value right here let's just reset this and this is the one we're going to go with
[00:10:37.680 → 00:10:43.600] and now this is over damped but these values are actually looking good and i when we implement feet
[00:10:43.600 → 00:10:51.120] forward um and i term this should actually go back up so i'm not too worried all right so heading back
[00:10:51.120 → 00:10:58.240] over in the beta flight let's just move this down to 1.4 save now we're going to start implementing i term
[00:10:58.240 → 00:11:08.800] back again so i like to start this at 0.8 and just go up in increments of 0.1 so next would be 0.9 1 1.1
[00:11:08.800 → 00:11:16.720] and 1.2 usually one as the default has always worked but just to be on the safe side just start lower and
[00:11:16.720 → 00:11:33.520] increase oh so interesting we have what this means right here is oscillation so what that means most
[00:11:33.520 → 00:11:40.720] likely is that my master multiplier is too high so i'm actually going to decrease this from 1.4 down to 1.3
[00:11:40.720 → 00:11:51.600] save that okay so it's actually looking identical from 1 all the way up to 1.2 but honestly i'm just
[00:11:51.600 → 00:11:58.320] going to leave it at the default value the i term slider that should be good
[00:12:01.280 → 00:12:07.280] yeah the pitch looks absolutely beautiful um we just have some oscillations on the roll axis all right
[00:12:07.280 → 00:12:12.880] next we have feet forward now feet forward we're going to be tuning that not using pid toolbox but
[00:12:12.880 → 00:12:20.240] rather the black box explorer itself um i like to start this off at not dynamic david i like to start
[00:12:20.240 → 00:12:29.280] feet forward off at uh 0.6 and just go up in increments of 0.2 so 0.8 1 1.2 and 1.4 and another
[00:12:29.280 → 00:12:33.520] thing to mention about feet forward this is when you're gonna have to start doing flippy flops
[00:12:33.520 → 00:12:38.720] so if you've been flying in angle mode um you could do rapid stick movements that might be able to
[00:12:38.720 → 00:12:53.120] work but doing flips and rolls on both the pitch and roll access will be the best way to tune this
[00:12:53.120 → 00:13:06.960] all right now instead of opening up this file in pid toolbox we're just going to open it up in the
[00:13:06.960 → 00:13:12.080] regular black box explorer and if you don't have this chart what you want to do is go to graph setup
[00:13:12.080 → 00:13:18.880] and add in the access label gyro plus pid roll and then the access label gyro plus pid pitch you
[00:13:18.880 → 00:13:25.440] usually go here and then right here and right there so what we are looking for this is going to
[00:13:25.440 → 00:13:33.360] be the first log second log third fourth fifth let's go for one of these so essentially we're looking
[00:13:33.360 → 00:13:38.960] at this red line which is the p term we want this to be as flat as possible because we want the feet
[00:13:38.960 → 00:13:44.320] forward this purple line doing all the work so right here you can see the p term is actually pulling
[00:13:44.320 → 00:13:50.960] against uh the feet forward which is kind of surprising with the slider being so low i'll have
[00:13:50.960 → 00:13:56.400] to look at the other results but yes right here for example on the pitch you can see the p term is
[00:13:56.400 → 00:14:03.760] actually helping the feet forward that means that feet forward is too low so if we go to another example
[00:14:03.760 → 00:14:09.760] same here p term is helping like i said before you want this red line to be as flat as possible with
[00:14:09.760 → 00:14:14.640] this because feet forward needs to do all the work so it looks like in my case feet forward is best
[00:14:14.640 → 00:14:21.120] going to be left at one on the slider as you can see this is resisting or p term is resisting the
[00:14:21.120 → 00:14:28.000] feet forward but at the same time it actually catches up at the end i noticed on pitch this is actually as
[00:14:28.000 → 00:14:34.320] flat as i can get it other sliders were this is 1.2 and this is 1.4 on the feet forward slider
[00:14:34.320 → 00:14:39.200] these were like way too overdone um so yeah feet forward one it is
[00:14:42.400 → 00:14:46.720] now that we have feet forward out of the way the final step will be dynamic dampening and honestly
[00:14:46.720 → 00:14:53.360] i'm not too much of an expert on how to properly tune this but i basically just go off of how far
[00:14:53.360 → 00:15:00.640] i pushed the master multiplier for example i pushed it all the way up to 1.5 1.6 is where the quad started
[00:15:00.640 → 00:15:05.840] having issues and then i'll look at the d term here and be like all right this is 35 and 38
[00:15:06.560 → 00:15:14.960] bring this back down to 1.3 and then push this up until these values match 35 and 38. so in my case
[00:15:14.960 → 00:15:21.920] it would be 0.45 now this is the point where you're going to want to go fly a full pack um preferably
[00:15:21.920 → 00:15:28.160] with the goggles on as you would normally push your quad to the limits get the get all the prop wash out
[00:15:28.160 → 00:15:33.600] test the anti-gravity by giving it throttle blips and make sure your black box is good to go have
[00:15:33.600 → 00:15:39.120] it set to gyro scaled so you can view your filtering and yeah that's basically it we covered
[00:15:39.120 → 00:15:44.240] everything and for this specific build this is the tune we ended up with just before i showed the flight
[00:15:44.240 → 00:15:49.520] footage i thought i would show you guys um the pid toolbox results at the end as you can see our
[00:15:49.520 → 00:15:54.960] latency is extremely low now that everything's implemented and these lines are pretty much almost
[00:15:54.960 → 00:15:59.840] perfect we could somewhat tweak this to make it even better but i'm happy with these results
[00:16:00.480 → 00:16:06.720] another thing too these are the black box logs keep in mind this is a two minute flight so the
[00:16:06.720 → 00:16:11.360] longer you fly the more noisy these graphs are going to look i just wanted to show you guys this just to
[00:16:11.360 → 00:16:17.360] show like how good of a frame quad mullet is like there's especially for being a two minute flight
[00:16:17.360 → 00:16:23.200] there's just barely any noise on these graphs and then heading over to pitch we'll do frequency versus
[00:16:23.200 → 00:16:30.480] throttle and the reason i have a throttle cap set to 96 just at my motor kb at 1750 instead of 1850.
[00:16:30.480 → 00:16:35.360] so yeah i really appreciate you for sticking to the end if you have any feedback or criticism
[00:16:35.360 → 00:16:39.760] uh let me know in the comments i'm very open to it this is just specifically how i tune it could be
[00:16:39.760 → 00:16:43.920] right it could be wrong everyone tunes different but hopefully you learned a few things and again
[00:16:43.920 → 00:16:57.200] thank you for watching and here's the flight
[00:16:57.200 → 00:16:59.200] oh
[00:17:13.920 → 00:17:32.880] eh
[00:17:32.880 → 00:17:33.080] WOOOOOOO
[00:17:33.460 → 00:17:35.920] WOOOOOOO
[00:17:37.140 → 00:17:38.580] boarding
[00:17:40.700 → 00:17:42.740] AST
[00:17:43.100 → 00:17:49.320] if the
[00:17:51.740 → 00:17:52.660] funded
[00:17:53.860 → 00:17:55.580] has Mer欠
[00:17:58.380 → 00:17:59.000] that
[00:18:00.280 → 00:18:02.280] can
