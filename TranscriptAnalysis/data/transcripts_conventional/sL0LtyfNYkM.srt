1
00:00:00,000 --> 00:00:10,440
In this example we are looking to determine the state space representation of this circuit.

2
00:00:10,440 --> 00:00:17,000
The input here is Ia, there is a current being applied there, and the output is the voltage

3
00:00:17,000 --> 00:00:19,240
VL across this inductor.

4
00:00:19,240 --> 00:00:23,380
We have two inductors, a capacitor and a resistor.

5
00:00:23,380 --> 00:00:28,160
For the state space representation the first question is what are the state variables?

6
00:00:28,160 --> 00:00:33,920
Take a minute to determine which state variables you would choose for this specific circuit.

7
00:00:33,920 --> 00:00:40,020
Again, a good first attempt is to look at elements in the circuit that can store energy.

8
00:00:40,020 --> 00:00:43,720
In this particular circuit we have three elements that can store energy.

9
00:00:43,720 --> 00:00:48,720
We have two inductors that will store energy in the form of a magnetic field, and that

10
00:00:48,720 --> 00:00:51,400
depends on the current through these inductors.

11
00:00:51,400 --> 00:00:56,740
And we have one capacitor that will store energy in the form of an electrical field.

12
00:00:56,740 --> 00:01:00,920
And that energy depends on the voltage across that capacitor.

13
00:01:00,920 --> 00:01:05,700
So a good choice for the state variables would be the current through these inductors and

14
00:01:05,700 --> 00:01:09,640
the voltage across the capacitor.

15
00:01:09,640 --> 00:01:14,700
So let's define now the current through the inductor here.

16
00:01:14,700 --> 00:01:16,960
Let's call this I2.

17
00:01:16,960 --> 00:01:19,740
Let's call the current through this inductor here I1.

18
00:01:19,740 --> 00:01:24,800
This is L1, so I1, L2, I2.

19
00:01:24,800 --> 00:01:29,700
Let's call the voltage across this capacitor Vc.

20
00:01:29,700 --> 00:01:40,680
And let's define the current through the capacitor as Ic, pointing downwards.

21
00:01:40,680 --> 00:01:46,260
We can now define our state variables as the current through the inductor here and there,

22
00:01:46,260 --> 00:01:48,500
and the voltage across the capacitor.

23
00:01:48,500 --> 00:01:52,000
So let's call our state variables X.

24
00:01:52,000 --> 00:01:54,280
And you're going to call them going this way.

25
00:01:54,280 --> 00:01:56,740
The first element here is I2.

26
00:01:56,740 --> 00:01:59,220
The second element is Vc.

27
00:01:59,220 --> 00:02:01,740
And the last element is I1.

28
00:02:01,740 --> 00:02:07,600
The current across this inductor, the voltage across this capacitor, and the current across

29
00:02:07,600 --> 00:02:09,160
the other inductor.

30
00:02:09,160 --> 00:02:10,100
Very well.

31
00:02:10,100 --> 00:02:12,000
The first step is done.

32
00:02:12,000 --> 00:02:15,700
Now we need to find equations for the derivative of these states.

33
00:02:15,700 --> 00:02:18,740
Remember that we're looking for the state space representation.

34
00:02:18,740 --> 00:02:25,800
And this will be done in the form of X dot equals to Ax plus B times U.

35
00:02:25,800 --> 00:02:30,320
is the input, which in this case is Ia.

36
00:02:30,320 --> 00:02:31,320
What do we see here?

37
00:02:31,320 --> 00:02:35,460
We see X dot, which is a function of X itself.

38
00:02:35,460 --> 00:02:38,020
So it now needs to come up with three equations.

39
00:02:38,020 --> 00:02:43,140
One for I2, one for Vc, one for I1, that will follow this format.

40
00:02:43,140 --> 00:02:47,940
Where we have the derivative of I2 will be a function of all other states.

41
00:02:47,940 --> 00:02:50,840
The derivative of Vc, a function of all states.

42
00:02:50,840 --> 00:02:55,460
The derivative of I1, a function of all the other states.

43
00:02:55,460 --> 00:02:59,980
And it is also important to note that these equations will be the derivative of these

44
00:02:59,980 --> 00:03:00,980
state variables.

45
00:03:00,980 --> 00:03:03,240
They only depend on the states.

46
00:03:03,240 --> 00:03:06,680
They do not depend on the derivative of the states.

47
00:03:06,680 --> 00:03:10,340
So we need to also ensure that the equations that are going to develop now will follow the

48
00:03:10,340 --> 00:03:11,420
same format as here.

49
00:03:11,420 --> 00:03:16,300
So that will make everything easier than when we have to put everything in a matrix form.

50
00:03:16,300 --> 00:03:18,100
Okay, so let's start.

51
00:03:18,100 --> 00:03:23,100
Now let's start by looking for a equation that gives us the derivative of the first state

52
00:03:23,100 --> 00:03:27,340
I2 as a function of other states.

53
00:03:27,340 --> 00:03:28,560
What can we conclude here?

54
00:03:28,560 --> 00:03:33,140
Can we somehow link I2 and Vc, for example?

55
00:03:33,140 --> 00:03:38,380
Or can we link I2 and I1 and Vc?

56
00:03:38,380 --> 00:03:44,280
Well clearly, it would be easy here to link I2 and Vc because the voltage across the inductor

57
00:03:44,280 --> 00:03:49,020
and the voltage across the capacitor are exactly the same.

58
00:03:49,020 --> 00:03:51,020
What is the voltage across the inductor?

59
00:03:51,020 --> 00:04:01,220
The voltage across the inductor, L2, is L2 Di2 Dt.

60
00:04:01,220 --> 00:04:06,640
And the voltage across the capacitor is simply Vc.

61
00:04:06,640 --> 00:04:07,960
Couldn't be easier than that.

62
00:04:07,960 --> 00:04:17,440
Now we have Di2 over Dt equals to 1 over L2 times Vc.

63
00:04:17,440 --> 00:04:20,460
Here we have the expression we need for I2.

64
00:04:20,460 --> 00:04:26,500
The derivative of I2 is a function of other states.

65
00:04:26,500 --> 00:04:33,060
If we call this vector here x1, x2, and x3.

66
00:04:33,060 --> 00:04:37,680
So I2 is x1, Vc is x2, I1 is x3.

67
00:04:37,680 --> 00:04:39,400
How can you rewrite this expression?

68
00:04:39,400 --> 00:04:46,780
Now we have x1 dot equals to 1 over L2 times Vc.

69
00:04:46,780 --> 00:04:50,200
Vc becomes x2.

70
00:04:50,200 --> 00:05:01,440
And here we have the first equation needed for this manipulation.

71
00:05:01,440 --> 00:05:03,100
Now let's look at Vc.

72
00:05:03,100 --> 00:05:04,480
We need a similar expression.

73
00:05:04,480 --> 00:05:09,080
We need the derivative of Vc equals to a function of other states.

74
00:05:09,080 --> 00:05:10,560
Now let's think about this problem.

75
00:05:10,560 --> 00:05:16,900
We want something that depends on the derivative of Vc because that's one of our states.

76
00:05:16,900 --> 00:05:17,900
What is that?

77
00:05:17,900 --> 00:05:21,560
Something that is proportional to the derivative of a voltage in a capacitor.

78
00:05:21,560 --> 00:05:24,000
Well that's the current through the capacitor.

79
00:05:24,000 --> 00:05:26,580
So let's now relate Ic and Vc.

80
00:05:26,580 --> 00:05:28,460
Ic is not one of our states.

81
00:05:28,460 --> 00:05:30,400
Vc is.

82
00:05:30,400 --> 00:05:39,140
We can write that the current through this capacitor, Ic, is C times dVc dt.

83
00:05:39,140 --> 00:05:40,040
Aha!

84
00:05:40,040 --> 00:05:42,340
Here is the derivative of Vc.

85
00:05:42,340 --> 00:05:44,660
The derivative of the second state.

86
00:05:44,660 --> 00:05:47,320
Now what is Ic?

87
00:05:47,320 --> 00:05:49,320
Ic is not one of our states.

88
00:05:49,320 --> 00:05:51,320
We need to get rid of it.

89
00:05:51,320 --> 00:05:55,100
It is an internal variable.

90
00:05:55,100 --> 00:06:01,100
We can relate Ic to I2, to I1 and to the input Ia.

91
00:06:01,100 --> 00:06:02,320
That's easy.

92
00:06:02,320 --> 00:06:07,900
We can just look at the current at this node A here.

93
00:06:07,900 --> 00:06:13,560
And do the sum of all currents at node A.

94
00:06:13,560 --> 00:06:16,560
What do we have?

95
00:06:16,560 --> 00:06:18,560
We have the current going in.

96
00:06:18,560 --> 00:06:20,560
That is Ia.

97
00:06:20,560 --> 00:06:26,560
And this is equal to all other currents coming out of that node.

98
00:06:26,560 --> 00:06:33,220
That is I2 plus I1 plus Ic.

99
00:06:33,220 --> 00:06:38,660
Now notice that this equation is very helpful because the only thing here that we can use

100
00:06:38,660 --> 00:06:39,660
is Ic.

101
00:06:39,660 --> 00:06:42,220
And this is exactly what you want to replace there.

102
00:06:42,220 --> 00:06:44,220
Ia is the input.

103
00:06:44,220 --> 00:06:46,220
I2 and I1 are states.

104
00:06:46,220 --> 00:06:47,220
Perfect.

105
00:06:47,220 --> 00:06:58,880
Now Ic is simply Ia minus I1 minus I2.

106
00:06:58,880 --> 00:07:00,880
We can now replace this here.

107
00:07:00,880 --> 00:07:23,440
And we will end up with dVc dt equals to 1 over c times Ic Ia minus I1 minus I2.

108
00:07:23,440 --> 00:07:25,240
Good.

109
00:07:25,240 --> 00:07:30,200
Now let's represent this expression using the state-space representation here.

110
00:07:30,200 --> 00:07:36,200
dVc dt becomes x2 dot because Vc is x2.

111
00:07:36,200 --> 00:07:40,100
So this is x.

112
00:07:40,100 --> 00:07:44,600
This is x2 dot.

113
00:07:44,600 --> 00:07:46,960
1 over c is a constant.

114
00:07:46,960 --> 00:07:49,300
Ia is an input.

115
00:07:49,300 --> 00:07:50,300
We'll need to change it.

116
00:07:50,300 --> 00:07:55,860
I1 is x3.

117
00:07:55,860 --> 00:07:58,640
And I2 is x1.

118
00:07:58,640 --> 00:08:08,880
And here we have the second expression for our state-space representation.

119
00:08:08,880 --> 00:08:10,360
We are missing one equation.

120
00:08:10,360 --> 00:08:15,640
Now we are looking for an equation for the derivative of I1 as a function of other states.

121
00:08:15,640 --> 00:08:17,640
How can we do that?

122
00:08:17,640 --> 00:08:22,640
Now we could apply Kirchhoff's law to this loop.

123
00:08:22,640 --> 00:08:26,640
And do the sum of all voltages there.

124
00:08:26,640 --> 00:08:34,360
If you do that, you will see that this voltage across here will be a function of I1 because that's the voltage across the resistor.

125
00:08:34,360 --> 00:08:40,360
will be a function of Vc which is another state.

126
00:08:40,360 --> 00:08:46,600
And this makes things very convenient because the voltage across the inductor is also a function of I1, a function of one of our states.

127
00:08:46,600 --> 00:08:51,600
So if you now do Kirchhoff's law in this loop here, what do you have?

128
00:08:51,600 --> 00:09:12,840
We have that R times I1 plus the voltage across this inductor is L1 Di1, aha, Dt minus Vc equals to 0.

129
00:09:12,840 --> 00:09:17,840
Why minus Vc? Because the current through Vc is pointing down.

130
00:09:17,840 --> 00:09:22,840
So when you go counterclockwise here, you are going against the current through Vc.

131
00:09:22,840 --> 00:09:24,840
Hence the negative sign.

132
00:09:24,840 --> 00:09:31,840
This equation is perfect because we have everything here as a function of the states.

133
00:09:31,840 --> 00:09:35,840
Now we can isolate Di1, Dt.

134
00:09:35,840 --> 00:09:50,840
And Di1, Dt is simply 1 over L1 times Vc minus Ri1.

135
00:09:50,840 --> 00:09:55,840
Now we can write this in state space.

136
00:09:55,840 --> 00:09:59,840
Di1, Dt becomes x3 dot.

137
00:09:59,840 --> 00:10:03,840
1 over L1.

138
00:10:03,840 --> 00:10:11,840
So Vc is x2 minus R times I1 which is x3.

139
00:10:11,840 --> 00:10:17,840
Here we have the third expression for our circuit.

140
00:10:17,840 --> 00:10:22,840
Third state represented as a function.

141
00:10:22,840 --> 00:10:27,840
The third state's derivative represented as a function of other states.

142
00:10:27,840 --> 00:10:31,840
Alright, now we have these three expressions we need to define our output.

143
00:10:31,840 --> 00:10:37,840
Our output here is VL, is the voltage across this inductor.

144
00:10:37,840 --> 00:10:41,840
Now we need an expression for the output as well.

145
00:10:41,840 --> 00:10:43,840
Let's write it here.

146
00:10:43,840 --> 00:10:46,840
How do we find that one?

147
00:10:46,840 --> 00:10:50,840
We want the output to be a function of the states.

148
00:10:50,840 --> 00:10:53,840
Not the derivative of the states, just the states.

149
00:10:53,840 --> 00:10:56,840
Well we can actually do the same Kirchhoff's law that we did here.

150
00:10:56,840 --> 00:10:58,840
The exact same.

151
00:10:58,840 --> 00:11:03,840
But instead of writing L1, Di1, Dt.

152
00:11:03,840 --> 00:11:08,840
This whole thing here is in fact VL, is the output.

153
00:11:08,840 --> 00:11:19,840
So we can reuse that expression and rewrite this as Ri1, the voltage across the resistor,

154
00:11:19,840 --> 00:11:30,840
plus the voltage across the inductor, minus Vc, equals to zero.

155
00:11:30,840 --> 00:11:38,840
So VL, the output, becomes Vc minus Ri1.

156
00:11:38,840 --> 00:11:53,840
In state space, or using the state space variables, we have VL equals to Vc, x2, minus R times I1, which is xd.

157
00:11:53,840 --> 00:11:54,840
And there it is.

158
00:11:54,840 --> 00:11:57,840
That's the expression for the output.

159
00:11:57,840 --> 00:12:04,840
Now that we have that, I'm going to erase everything, save these equations,

160
00:12:04,840 --> 00:12:08,840
and you're going to represent them in a matrix format.

161
00:12:08,840 --> 00:12:14,840
Very well, so here we are with all the expressions we derived before, x1 dot, x2 and x3 dot.

162
00:12:14,840 --> 00:12:16,840
And VL, the output.

163
00:12:16,840 --> 00:12:23,840
The output, which is VL, that is the same as Y, in the standard form for state space.

164
00:12:23,840 --> 00:12:27,840
Now let's write these equations in the standard state space representation.

165
00:12:27,840 --> 00:12:33,840
The first one will be x dot, equals to A times x, plus B times U.

166
00:12:33,840 --> 00:12:38,840
U is the input to the system, which is IA.

167
00:12:38,840 --> 00:13:02,840
X dot is x1 dot, x2 dot, x3 dot, is A times x, x1, x2, x3, plus B times U.

168
00:13:02,840 --> 00:13:06,840
Which is IA.

169
00:13:06,840 --> 00:13:07,840
What goes in there?

170
00:13:07,840 --> 00:13:09,840
So let's look at x1 dot.

171
00:13:09,840 --> 00:13:11,840
For x1 dot, we're looking at this expression here.

172
00:13:11,840 --> 00:13:16,840
x1 dot only depends on x2, and it has this coefficient 1 over L2.

173
00:13:16,840 --> 00:13:23,840
So this is 0, 1 over L2, and 0.

174
00:13:23,840 --> 00:13:27,840
Now let's look at x2 dot.

175
00:13:27,840 --> 00:13:30,840
x2 dot depends on...

176
00:13:30,840 --> 00:13:36,840
The input depends on x3 and x1.

177
00:13:36,840 --> 00:13:43,840
So we have for x1, we have negative 1 over C.

178
00:13:43,840 --> 00:13:51,840
x2 is 0, and x3 is also negative 1 over C.

179
00:13:51,840 --> 00:13:54,840
We'll do the output later.

180
00:13:54,840 --> 00:13:57,840
So now let's complete the third row here.

181
00:13:57,840 --> 00:14:02,840
That's for x3 dot, and this depends on x2 and x3.

182
00:14:02,840 --> 00:14:05,840
So there is no x1, this is 0.

183
00:14:05,840 --> 00:14:14,840
For x2 we have 1 over L1, and for x3 we have negative R over L1.

184
00:14:14,840 --> 00:14:20,840
Now let's look at the input.

185
00:14:20,840 --> 00:14:27,840
The input doesn't show in x1 dot, it only shows in x2 dot.

186
00:14:27,840 --> 00:14:30,840
So for x1 dot we have 0.

187
00:14:30,840 --> 00:14:35,840
For x2 dot we have 1 over C.

188
00:14:35,840 --> 00:14:38,840
I will show here for this part of the equation.

189
00:14:38,840 --> 00:14:41,840
And for x3 dot we have 0.

190
00:14:41,840 --> 00:14:44,840
Okay, so this is our first equation.

191
00:14:44,840 --> 00:14:46,840
Now we need an equation for the output.

192
00:14:46,840 --> 00:14:53,840
The equation for the output, which is y, will be C times x plus D times U.

193
00:14:53,840 --> 00:15:17,840
U is the input IA.

194
00:15:17,840 --> 00:15:19,840
So what goes in these matrices now?

195
00:15:19,840 --> 00:15:21,840
Now let's look at the output equation.

196
00:15:21,840 --> 00:15:26,840
We have VL that depends on x2 and x3.

197
00:15:26,840 --> 00:15:29,840
It doesn't depend on x1, so the first element is 0.

198
00:15:29,840 --> 00:15:33,840
It depends on x2, the coefficient here is 1.

199
00:15:33,840 --> 00:15:37,840
And it depends on x3, the coefficient is negative R.

200
00:15:37,840 --> 00:15:43,840
We see that there is no input here, there is no IA.

201
00:15:43,840 --> 00:15:47,840
So matrix D is simply 0.

202
00:15:47,840 --> 00:15:52,840
And here we have the first and the second equation.

203
00:15:52,840 --> 00:15:56,840
And this is the state-space model for this particular circuit.

204
00:15:56,840 --> 00:16:08,840
Dual problem on x2 dot z5 dot x3.

205
00:16:08,840 --> 00:16:18,840
May 6 to 5,500 let's move.

