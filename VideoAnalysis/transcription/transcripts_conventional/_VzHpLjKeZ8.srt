1
00:00:00,000 --> 00:00:03,720
Hello everyone and welcome to another video. So today I'd like to introduce the

2
00:00:03,720 --> 00:00:08,880
idea of PID control. So today we're going to keep the discussion fairly brief and

3
00:00:08,880 --> 00:00:12,240
fairly high level because we're going to have several other dedicated videos

4
00:00:12,240 --> 00:00:16,760
which explore various aspects of PID controls in much greater detail. So this

5
00:00:16,760 --> 00:00:20,800
extended discussion is very well warranted because PID controllers are

6
00:00:20,800 --> 00:00:25,140
probably the most popular control scheme in history. So if you spend any amount of

7
00:00:25,140 --> 00:00:28,760
time working with controllers or looking at control systems you're almost

8
00:00:28,760 --> 00:00:32,300
guaranteed to run across at least one or two PID controllers throughout the

9
00:00:32,300 --> 00:00:36,020
course of your career. So for today I just want to get everyone comfortable with

10
00:00:36,020 --> 00:00:40,820
some of the core concepts surrounding PID control. So if that sounds like fun let's

11
00:00:40,820 --> 00:00:44,940
take a look at the board over here. Alright so to set the stage for PID control

12
00:00:44,940 --> 00:00:48,480
let's go back to our standard feedback control architecture that we've

13
00:00:48,480 --> 00:00:52,820
discussed in previous videos. So in this scheme just to refresh your memory right

14
00:00:52,820 --> 00:00:57,980
we've got some kind of plant here G and the idea is that this plant produces some

15
00:00:57,980 --> 00:01:01,640
kind of output and we would like this output to match some reference signal. If

16
00:01:01,640 --> 00:01:04,940
they don't match we're going to take their difference to create some kind of

17
00:01:04,940 --> 00:01:08,900
error signal and the controller is then going to look at this error signal and

18
00:01:08,900 --> 00:01:13,280
compute a control signal which is applied to the plant so that hopefully in

19
00:01:13,280 --> 00:01:18,260
closed loop this output signal Y will eventually match the input reference

20
00:01:18,260 --> 00:01:22,460
signal R. So again that's the grand scheme that's the very general idea of a

21
00:01:22,460 --> 00:01:27,440
simple sometimes referred to as an inner loop or a single loop controller right. So the

22
00:01:27,440 --> 00:01:32,960
whole game at this point is what does this controller look like right. Let's

23
00:01:32,960 --> 00:01:36,860
think about this what is probably the simplest thing that you can do here. Well

24
00:01:36,860 --> 00:01:41,960
the simplest thing you could do is you can probably just take this E and run it

25
00:01:41,960 --> 00:01:51,320
into a gain of some value let's call this gain K right. So something like this this is

26
00:01:51,320 --> 00:01:55,280
about the dumbest thing you could possibly do right. This is the simplest

27
00:01:55,280 --> 00:02:00,400
controller and in this case let's think about what is the control law. Alright so

28
00:02:00,400 --> 00:02:05,300
the control law basically says that the control signal at any given time it's

29
00:02:05,300 --> 00:02:10,320
just going to be here which is just nothing more than this gain K times the

30
00:02:10,320 --> 00:02:16,640
error. Okay so you can see that the control signal it's just the error

31
00:02:16,640 --> 00:02:21,960
multiplied by a number K. So you can say that the control signal is actually

32
00:02:21,960 --> 00:02:26,040
directly proportional to the error right. It's proportional by this gain factor K.

33
00:02:26,040 --> 00:02:35,080
So this is actually what's referred to as proportional control right. And this P here

34
00:02:35,080 --> 00:02:42,600
is actually the same P in the PID scheme. So this is pretty much the simplest

35
00:02:42,600 --> 00:02:47,580
scheme it's actually a P it's a type of PID controller is the simplest controller you

36
00:02:47,580 --> 00:02:51,800
could come up with right. It's nothing more than take the error multiply it by a

37
00:02:51,800 --> 00:02:58,840
static gain K to compute your control U. Okay so that's the simplest thing you can

38
00:02:58,840 --> 00:03:04,040
do and what PID control is and PID controllers is just extending on this. So

39
00:03:04,040 --> 00:03:08,540
instead of just having one term what if we had multiple terms like what what else

40
00:03:08,540 --> 00:03:14,180
could we potentially do. So the thing we could do is let's start adding on extra

41
00:03:14,180 --> 00:03:18,460
terms to our control law. So to distinguish this we're gonna have multiple

42
00:03:18,460 --> 00:03:23,920
gains. So I'm actually gonna call this KP. Okay and actually I'm gonna draw this in a

43
00:03:23,920 --> 00:03:27,760
slightly different fashion. I'm gonna move this up a little bit you're gonna see

44
00:03:27,760 --> 00:03:32,680
why we're doing this in a second. I'm gonna do it like this. Okay so you've got

45
00:03:32,680 --> 00:03:39,440
this KP. Okay really I haven't done anything fancy yet right. But now what we're

46
00:03:39,440 --> 00:03:44,620
gonna do is let's add on another term here. So the next term in my control law it's

47
00:03:44,620 --> 00:03:52,360
actually going to be again KI multiplied by the integral of the error D tau from

48
00:03:52,360 --> 00:03:57,800
times zero to time T. Okay so this term right here is sometimes referred to as an

49
00:03:57,800 --> 00:04:05,680
integral component right. And again this I here is this I in the PID scheme right.

50
00:04:05,680 --> 00:04:16,120
And then what we're gonna do is let's add on a third term which is going to be KD times the

51
00:04:16,120 --> 00:04:21,220
time rate of change of the error right. And this is sometimes referred to as a

52
00:04:21,220 --> 00:04:28,480
derivative right. And again the D here is this D in PID control. So we can see that

53
00:04:28,480 --> 00:04:35,120
PID control stands for proportional integral derivative because it basically has the

54
00:04:35,120 --> 00:04:40,520
control law being computed using three terms. So this term right here is the

55
00:04:40,520 --> 00:04:47,340
proportional part. Let's go ahead and maybe I'm gonna put this here in blue.

56
00:04:47,340 --> 00:04:53,800
Let's call this U proportional. Okay. Or sorry I'm gonna do this in green and then

57
00:04:53,800 --> 00:05:02,300
let's go ahead and put this I term here this entire I term here is gonna be U I.

58
00:05:02,300 --> 00:05:13,400
Okay and then finally this term down here is U D. Okay so we see that the control

59
00:05:13,400 --> 00:05:18,560
signal here is made up of three components so maybe let's actually draw this in a

60
00:05:18,560 --> 00:05:23,780
block diagram format because I I like to always see things in block diagram format.

61
00:05:23,780 --> 00:05:26,840
I mean this is an explicit control law right. You could go ahead and implement

62
00:05:26,840 --> 00:05:31,300
this in in a you know C++ or something like that but I like to think in terms of

63
00:05:31,300 --> 00:05:35,800
block diagram so let's translate this control law into a block diagram. So we

64
00:05:35,800 --> 00:05:41,440
already have this term right here right. You can see clearly that right here this

65
00:05:41,440 --> 00:05:47,480
signal here is U P right. It's the green part right. It's nothing more than K P

66
00:05:47,480 --> 00:05:52,940
times the error. Now we got to get this this blue part right. It's K I times the

67
00:05:52,940 --> 00:06:00,060
integral of the error. So what we need to do here is we need to integrate and I'm

68
00:06:00,060 --> 00:06:03,900
going to write 1 over s for the Laplace version of an integral. So this is an

69
00:06:03,900 --> 00:06:11,100
integrator right. So what this thing does is you give it E it just accumulates or

70
00:06:11,100 --> 00:06:15,420
integrates all the error that's coming in. So coming out of this is basically this

71
00:06:15,420 --> 00:06:20,040
term here integral of E tau D tau from 0 to time T right. That's what that

72
00:06:20,040 --> 00:06:24,120
integrator block does. It just does the the integration of the error signal. Now all I

73
00:06:24,120 --> 00:06:30,600
got to do is multiply this by again K I right. So now here's your K I right and

74
00:06:30,600 --> 00:06:39,900
then that goes into this summing block and right here we have the signal U I time T

75
00:06:39,900 --> 00:06:44,100
right. That's this signal right here. Okay and then lastly what we've got to do

76
00:06:44,100 --> 00:06:48,020
is take into account this term right. So what this term says is you need to

77
00:06:48,020 --> 00:06:54,260
compute the instantaneous time rate of change or the error dot right. So this is

78
00:06:54,260 --> 00:06:59,480
the derivative of the error at time T. So again let's go ahead and branch this off

79
00:06:59,480 --> 00:07:04,460
and I'm gonna go write it like this again. Let's just use the Laplace version of an

80
00:07:04,460 --> 00:07:08,660
integrator. So this is a an S and you can think about this block is just a

81
00:07:08,660 --> 00:07:14,720
different she a tour right whose sole job in life is you give it a signal it

82
00:07:14,720 --> 00:07:19,880
computes its time rate of change of that signal. So coming out here is E dot this

83
00:07:19,880 --> 00:07:26,820
term so I just need to now multiply it by K D. K D right and that goes into the

84
00:07:26,820 --> 00:07:36,440
summing block and now this signal here is our U D. Okay so this is what's great

85
00:07:36,440 --> 00:07:40,820
about a PID controller is that it is actually surprisingly simple that's all

86
00:07:40,820 --> 00:07:45,200
there is to it. It's just a controller where you have the error coming in and

87
00:07:45,200 --> 00:07:48,980
the error then gets sort of split into these three branches or these three

88
00:07:48,980 --> 00:07:53,780
terms and that's all you do right. You just take the error multiply by K P that

89
00:07:53,780 --> 00:07:57,380
gives you the proportional component of control. There's also an integral

90
00:07:57,380 --> 00:08:00,700
component of control which you get by basically integrating the error and then

91
00:08:00,700 --> 00:08:04,940
multiplying by K I or you can flip these around right from our block diagram

92
00:08:04,940 --> 00:08:07,980
algebra discussion to the fact that this is a linear system you can actually it

93
00:08:07,980 --> 00:08:12,240
doesn't matter if the K I comes before or after the integral right and then same

94
00:08:12,240 --> 00:08:15,060
thing for the derivative right you can basically switch this around it can be

95
00:08:15,060 --> 00:08:19,380
K D times S or S times K D it doesn't matter but at the end of the day you have

96
00:08:19,380 --> 00:08:23,080
this third branch here which is basically has something to do with the

97
00:08:23,080 --> 00:08:29,820
derivative of the error right so in a nutshell that's pretty much what this does

98
00:08:29,820 --> 00:08:35,640
right so computing it is really really simple okay now I'm gonna put in your mind

99
00:08:35,640 --> 00:08:39,300
right now just stick in the back your head that yes this seems simple but there

100
00:08:39,300 --> 00:08:42,480
are a lot of ways this can go pear-shaped and we're gonna talk about that in other

101
00:08:42,480 --> 00:08:47,640
dedicated videos but for the time being let's assume everything is hunky-dory and

102
00:08:47,640 --> 00:08:54,480
we're gonna go ahead and maybe let's examine each one of these terms this UP UI and UD

103
00:08:54,480 --> 00:08:58,200
or the proportional control the integral control and the derivative control

104
00:08:58,200 --> 00:09:02,400
portions in isolation by themselves just so we can get a better feel for what

105
00:09:02,400 --> 00:09:07,080
they what they do and how they behave all right so to get a better feel for what

106
00:09:07,080 --> 00:09:11,460
each of these terms do why don't we start with just the proportional control

107
00:09:11,460 --> 00:09:16,440
and what we can do is let's consider it by itself so in other words let's see if

108
00:09:16,440 --> 00:09:19,920
we can ignore the integrator so I'm gonna have a little sticker here that says

109
00:09:19,920 --> 00:09:24,840
just ignore that and let's also ignore the the derivative component so the only

110
00:09:24,840 --> 00:09:29,160
thing we've got is this proportional control right and look again we said

111
00:09:29,160 --> 00:09:31,860
earlier at the beginning of the discussion that this is probably the simplest

112
00:09:31,860 --> 00:09:34,800
controller you can have so let's see if we can understand how it behaves and

113
00:09:34,800 --> 00:09:39,240
just some general characteristics about it right okay so what I've done here is

114
00:09:39,240 --> 00:09:43,200
let's just look at since we're only caring about the controller let's look at the

115
00:09:43,200 --> 00:09:46,800
error signal going in and what the control signal coming out might be and

116
00:09:46,800 --> 00:09:51,360
again the control signal is just UP right it's only that's the only component so

117
00:09:51,360 --> 00:09:55,800
I'm gonna draw the error in purple and let's go ahead and say that

118
00:09:55,800 --> 00:09:59,700
everything is fine everything is fine and we have zero steady state error or

119
00:09:59,700 --> 00:10:04,980
excuse me zero error and then at some point we introduce some error so that

120
00:10:04,980 --> 00:10:10,200
what what that could mean is that suddenly you know everything is fine the output

121
00:10:10,200 --> 00:10:14,640
is actually matching the reference and then at some point we maybe have a step

122
00:10:14,640 --> 00:10:21,840
input of magnitude a at some time and that will create a jump in the reference

123
00:10:21,840 --> 00:10:27,600
signal the plant can't respond instantaneously right so this signal Y is

124
00:10:27,600 --> 00:10:32,220
still going to be at the old value so when you introduce this step there's

125
00:10:32,220 --> 00:10:36,660
going to be a step in the error right of also of magnitude a so what the error

126
00:10:36,660 --> 00:10:42,240
signal is going to do is it's going to jump up to a okay and I'm going to just

127
00:10:42,240 --> 00:10:46,080
label all of these about and I'm going to put a little dash the lines we can see

128
00:10:46,080 --> 00:10:51,480
this kind of event horizon okay and this is now going to jump up to a value of a

129
00:10:51,480 --> 00:10:58,140
okay so let's now go ahead and draw in green what is the the proportional

130
00:10:58,140 --> 00:11:02,040
control signal going to do so again we can see very easily what it's going to do in

131
00:11:02,040 --> 00:11:07,320
this window right because there's zero error right there's going to be zero

132
00:11:07,320 --> 00:11:11,220
control right because that's how this works the control is just the error

133
00:11:11,220 --> 00:11:16,960
multiplied by kp so I don't care what number kp you have if e is zero this is

134
00:11:16,960 --> 00:11:22,180
going to be zero so the control signal is just zero zero zero zero zero zero until

135
00:11:22,180 --> 00:11:28,000
this event horizon again and now this is now going to instantaneously jump up to

136
00:11:28,000 --> 00:11:37,480
a value now of what this value is going to be a times kp right so this is what's

137
00:11:37,480 --> 00:11:40,300
actually kind of nice about a proportional controller is a proportional

138
00:11:40,300 --> 00:11:44,740
controller is going to respond instantaneously right this gain is just a

139
00:11:44,740 --> 00:11:47,980
multiplication that happens right away there are no dynamics associated with

140
00:11:47,980 --> 00:11:52,720
it so proportional controller is going to kind of freak out a little bit right

141
00:11:52,720 --> 00:11:56,800
it's going to realize there's a large error and it's going to then apply a large

142
00:11:56,800 --> 00:12:02,380
control signal right and hopefully you've got this control signal set up in in the

143
00:12:02,380 --> 00:12:07,420
correct orientation in the sense that this positive number of a kp it's going to

144
00:12:07,420 --> 00:12:13,600
start pushing this signal y to start matching this signal are so what the error is

145
00:12:13,600 --> 00:12:17,560
probably going to do is it's going to probably start coming down right would

146
00:12:17,560 --> 00:12:21,760
you agree right as the plant starts to respond it's going to start coming down

147
00:12:21,760 --> 00:12:28,720
now what is the control signal going to do again the nice thing about this is to

148
00:12:28,720 --> 00:12:33,700
get the green line we just multiply the purple line by a gain kp so this is going

149
00:12:33,700 --> 00:12:41,060
to basically mirror it like that right so this is where it gets interesting though if

150
00:12:41,060 --> 00:12:46,700
you think about this long enough eventually this error is going to keep going down hopefully

151
00:12:46,700 --> 00:12:50,480
you're getting closer and closer and closer and now what's going on is at the

152
00:12:50,480 --> 00:12:56,240
same time the control signal is is getting smaller and smaller and smaller right at

153
00:12:56,240 --> 00:13:05,680
some point for real systems what might end up happening is you might get stuck and there

154
00:13:05,680 --> 00:13:12,240
might be some steady state error and the reason this occurs right is if you think

155
00:13:12,240 --> 00:13:18,120
about this what's going on is as the error starts going down so does the control signal

156
00:13:18,120 --> 00:13:22,000
right the control signal also starts going down so the control starts getting weaker and

157
00:13:22,000 --> 00:13:27,260
weaker and weaker so you're applying less and less control to the off to the plant so if you

158
00:13:27,260 --> 00:13:36,680
think about like what if your system is a mass on some surface right and you're sitting here at the

159
00:13:36,680 --> 00:13:43,580
location Y and now you want to move over here to a location R right there's a step input of magnitude

160
00:13:43,580 --> 00:13:50,060
A right so you are going to start applying some proportional control to this guy right and initially

161
00:13:50,060 --> 00:13:55,580
when the error is large this signal is large so you're pushing the block hard the block is going to

162
00:13:55,580 --> 00:14:02,220
start moving over and maybe it's going to get to over here right at this point here's your Y

163
00:14:02,220 --> 00:14:09,660
here's your R the error is now much smaller right so the force on the block is going to be much smaller

164
00:14:09,660 --> 00:14:15,100
do you see how like maybe if there are nonlinear effects like friction right friction might grab the

165
00:14:15,100 --> 00:14:20,340
block and at some point the control signal is going to be too weak to overcome friction and the block is

166
00:14:20,340 --> 00:14:25,200
going to stop and it's not going to move anymore so the problem that you may see with proportional

167
00:14:25,200 --> 00:14:31,680
controllers is that at some point they become basically the control signal becomes too weak

168
00:14:34,160 --> 00:14:41,440
to drive this steady state error to zero right but it's actually quite simple though the reason why

169
00:14:41,440 --> 00:14:45,360
the proportional control it's easy to understand what's going on we get a good feel for what it's

170
00:14:45,360 --> 00:14:50,880
doing all it's doing is it's exerting a control which is directly proportional to the amount of error

171
00:14:50,880 --> 00:14:57,360
right but one of the drawbacks of this is that in many situations a proportional control by itself is subject to this

172
00:14:57,360 --> 00:15:02,320
this steady state error which leads us to the next component

173
00:15:03,360 --> 00:15:11,840
okay so let's modify our little diagram here and now instead let's ignore kp and kd and just look at an integral term

174
00:15:11,840 --> 00:15:19,840
like let's pretend like you decided to make a controller which just has an integrator so let's look at this integral control component and see what happens so again we've got

175
00:15:19,840 --> 00:15:33,840
error on the top and now let's ask ourselves what is the integrator going to do right now remember all this integrator does this integral control component it's given by this equation right here right all you have to do is integrate the error and then multiply by some number kp

176
00:15:34,400 --> 00:15:49,820
okay so let's take a look at this again um okay again the error is zero and then suddenly you give it some kind of input right or some step in reference to generate some step in error okay so again let's ask ourselves what is the integrator going to be

177
00:15:49,820 --> 00:16:19,800
doing here so again down here the integrator is doing nothing zero zero zero zero zero zero zero zero zero zero zero right until some action happens here when we introduce this this error step something happens now we got to ask ourselves what is that something okay so the way i like to think about this is let's go ahead and look at a little time here okay after this step gets introduced okay let's say that the error signal does something like that

178
00:16:19,800 --> 00:16:49,780
okay now we got to think about this okay now we got to think about this okay now we got to ask ourselves what is the control signal at this time well the way you get that control signal at this time t is apparently you integrate the error so let's just focus on this integral term where is this integral term in this picture well again the integral of the error signal it's just the area under the curve of the e of t right so in other words it's this area under here right

179
00:16:49,800 --> 00:17:19,800
this amount of area this amount of area is what this integral term is it's how much the error the integrator has accumulated right so that is this area multiplied by the number ki that's going to tell you what the output of your system of the integral of the integral control component is at this time and as you can see because there hasn't been a large time this area is small right sure it might have a large

180
00:17:19,800 --> 00:17:21,640
So this area is kind of small.

181
00:17:21,780 --> 00:17:24,200
You multiply it by some Ki, you probably get some small numbers.

182
00:17:24,260 --> 00:17:25,400
So it's probably something like this, right?

183
00:17:25,520 --> 00:17:27,480
So the integrator is going to do something like this.

184
00:17:27,760 --> 00:17:29,460
Does everyone see what's going on, right?

185
00:17:29,580 --> 00:17:34,440
Now all we got to do is just march along a little bit further in time, right,

186
00:17:34,620 --> 00:17:36,900
and ask ourselves the same question, right?

187
00:17:36,940 --> 00:17:41,060
So again, maybe the error signal is doing this, right?

188
00:17:41,180 --> 00:17:44,100
So now the total area is this.

189
00:17:44,460 --> 00:17:47,680
So the total area is now bigger, right?

190
00:17:47,680 --> 00:17:52,280
So the integrator keeps pushing harder, right?

191
00:17:52,640 --> 00:17:53,860
And et cetera, et cetera.

192
00:17:53,940 --> 00:17:56,600
You can see what this is going to be doing is it's going to keep going.

193
00:17:56,680 --> 00:18:00,460
And let's say that this thing goes down to here.

194
00:18:00,580 --> 00:18:01,440
Let's say it does this.

195
00:18:01,780 --> 00:18:05,160
At this point, the area looks like that, right?

196
00:18:05,280 --> 00:18:08,140
And we can trace this exact same point down.

197
00:18:08,900 --> 00:18:13,500
And we're going to see what's interesting is at this time T,

198
00:18:13,940 --> 00:18:17,440
the integrator has accumulated all of this green area.

199
00:18:17,440 --> 00:18:21,140
So it's actually quite large at this point, right?

200
00:18:21,400 --> 00:18:24,180
And here's the rub with integrators by themselves.

201
00:18:24,300 --> 00:18:27,440
And this is one of the reasons why you usually never see an integrator by itself.

202
00:18:27,840 --> 00:18:29,360
Think about what's happening right here.

203
00:18:29,840 --> 00:18:32,580
Here, everything is fine, right?

204
00:18:33,060 --> 00:18:35,940
This is what you want, right?

205
00:18:35,980 --> 00:18:37,800
You want error to be zero.

206
00:18:37,800 --> 00:18:40,620
So at this point, you want to just say stop, right?

207
00:18:40,680 --> 00:18:44,460
If your controller was intelligent, you'd be like, okay, stop doing whatever you're doing.

208
00:18:44,580 --> 00:18:46,420
The system is where it needs to be.

209
00:18:46,820 --> 00:18:48,760
Let's quit, right?

210
00:18:49,720 --> 00:18:52,480
But think about what the integrator is doing right here.

211
00:18:52,660 --> 00:18:55,580
The integrator has accumulated all of this green area.

212
00:18:55,700 --> 00:18:58,540
So actually, it is still pushing.

213
00:18:58,540 --> 00:18:59,760
In fact, it is pushing.

214
00:18:59,960 --> 00:19:03,400
It's applying as much control as it ever is going to be doing.

215
00:19:03,720 --> 00:19:07,400
It's built up some, almost like some momentum, right?

216
00:19:07,440 --> 00:19:08,780
It's almost got some mass.

217
00:19:08,940 --> 00:19:10,800
And this integrator has got some momentum.

218
00:19:10,800 --> 00:19:11,700
And it's going along.

219
00:19:11,800 --> 00:19:17,160
And actually, what's going to happen is it's going to keep pushing on the system, right?

220
00:19:17,260 --> 00:19:18,500
It's going to keep applying control.

221
00:19:18,900 --> 00:19:22,680
So the system error, it's probably going to overshoot, right?

222
00:19:22,720 --> 00:19:25,560
The block is going to go, you know, if this was our mass spring system,

223
00:19:25,560 --> 00:19:27,820
it's going to start going down, right?

224
00:19:27,840 --> 00:19:29,300
It's going to overshoot the system.

225
00:19:29,540 --> 00:19:35,740
And now what you've got is you actually have negative area here, right?

226
00:19:35,960 --> 00:19:42,800
So again, if you think about this, what's going to happen is the error sign changes.

227
00:19:42,800 --> 00:19:44,660
It becomes negative at this point, right?

228
00:19:44,660 --> 00:19:48,680
So now that integral in the red component is negative area.

229
00:19:48,840 --> 00:19:50,700
The green is positive area.

230
00:19:50,880 --> 00:19:52,140
So maybe let's just label it.

231
00:19:52,140 --> 00:19:58,120
So this is sort of positive area that the integrator has accumulated.

232
00:19:58,420 --> 00:20:03,160
This red is negative area, right?

233
00:20:03,300 --> 00:20:06,340
So what's the net between the green and the red?

234
00:20:06,420 --> 00:20:08,700
There's still much more green than there is red.

235
00:20:08,700 --> 00:20:16,000
So this signal, it's going to start coming down, but it's still positive, right?

236
00:20:16,260 --> 00:20:17,420
So do you see what's going on?

237
00:20:17,420 --> 00:20:24,020
You overshot where you wanted to be, but the integrator is still pushing in that same direction, right?

238
00:20:24,060 --> 00:20:29,420
It's not pushing as hard as it used to, but it's still pushing in that same direction.

239
00:20:29,560 --> 00:20:33,140
So this is probably going to get worse before it gets better, right?

240
00:20:33,140 --> 00:20:48,680
Because at some point, you're going to have to accumulate a net difference between the positive and negative area such that you get something like this, right?

241
00:20:48,680 --> 00:20:56,300
What's going to end up happening is that eventually this thing is going to get you zero steady state error.

242
00:20:56,760 --> 00:21:06,180
And that's what's actually the nice benefit of this integral control is that eventually, and I should make sure I draw this accurately, right?

243
00:21:06,340 --> 00:21:10,420
Eventually, what you're going to end up with is zero steady state error.

244
00:21:10,420 --> 00:21:14,820
Okay?

245
00:21:15,520 --> 00:21:26,620
And what's going to end up happening is that the control needed to achieve that zero steady state error is going to be output by the integrator and the integrator alone.

246
00:21:26,760 --> 00:21:32,200
And again, we are going to explore that statement further in future lectures, future discussions.

247
00:21:32,680 --> 00:21:34,160
But I just want to state that right now.

248
00:21:34,160 --> 00:21:39,160
Now, the thing to take away from this is that the integrator is going to eliminate steady state error.

249
00:21:39,260 --> 00:21:43,900
The integrator will not allow your system to have steady state error, okay?

250
00:21:44,880 --> 00:21:54,920
And it does so through this sort of exchange of positive area and negative area when you're integrating the error signal, right?

251
00:21:54,920 --> 00:22:05,620
And again, this is one of the reasons why often this is coupled with other components, the proportional and the derivative, to try to get rid of some of these oscillations because this is probably not great.

252
00:22:05,920 --> 00:22:14,160
Now, I do want to dwell a little bit further on this idea of this claim that we made here that you're going to have zero steady state error, right?

253
00:22:14,560 --> 00:22:20,480
The way you can actually kind of think about it and prove that to yourself is almost sort of in a paradoxical sense, right?

254
00:22:20,480 --> 00:22:31,880
What I mean by that is let's draw a quick picture, maybe a smaller picture of error versus time, like a smaller version of this picture up here because it's really quite simple, the idea.

255
00:22:32,220 --> 00:22:34,320
Let's say that this thing is doing whatever, right?

256
00:22:34,360 --> 00:22:37,100
And let's say you have steady state error, okay?

257
00:22:37,220 --> 00:22:44,660
Let's assume that somehow you have a non-zero steady state error, okay?

258
00:22:44,960 --> 00:22:49,760
What is the integrator going to do in this situation, right?

259
00:22:49,760 --> 00:22:53,000
What does the UI component look like?

260
00:22:53,100 --> 00:22:59,660
Well, according to our discussion above, right, all we're doing is we are integrating the area under the curve, right?

261
00:22:59,960 --> 00:23:06,860
So what the integrator is going to do, I think we're drawing it in blue, is it's going to do something like this and then it's going to start integrating error, right?

262
00:23:06,900 --> 00:23:07,880
So this thing is increasing.

263
00:23:08,100 --> 00:23:12,520
In fact, this is all monotonically increasing because I only have green positive area.

264
00:23:12,920 --> 00:23:14,500
So this thing is going up, right?

265
00:23:14,600 --> 00:23:16,700
Going up, going up, going up, going up, going up, going up.

266
00:23:16,940 --> 00:23:18,120
Now, think about this, right?

267
00:23:18,120 --> 00:23:27,120
And if you have a non-zero steady state error, what that means is the area under the curve is going to become unbounded, right?

268
00:23:27,140 --> 00:23:28,020
It's going to go to infinity.

269
00:23:28,520 --> 00:23:32,420
Therefore, your control signal is also going to go to infinity.

270
00:23:32,420 --> 00:23:36,300
So there is something really wrong with your system.

271
00:23:36,440 --> 00:23:43,760
If you have an integrator in it and it keeps pushing harder and harder and harder and harder and exerting more and more control authority,

272
00:23:44,100 --> 00:23:49,940
eventually it has to be able to move the system towards the reference signal, right?

273
00:23:50,180 --> 00:23:52,880
If it's not, you've broken something, right?

274
00:23:52,920 --> 00:23:53,880
Something else is going wrong.

275
00:23:53,880 --> 00:23:57,960
But mathematically speaking, it should not be allowed to do that, right?

276
00:23:58,020 --> 00:23:58,880
Because of this pair.

277
00:23:58,980 --> 00:24:00,820
This is a paradox right here, right?

278
00:24:01,040 --> 00:24:09,520
You cannot have non-zero steady state error because that would lead to an unbounded infinite control signal,

279
00:24:09,740 --> 00:24:14,560
which is sort of a catch-22 because if this control signal became large enough,

280
00:24:14,920 --> 00:24:19,020
it has to be able to eventually move this signal Y towards the reference, right?

281
00:24:19,020 --> 00:24:26,320
So this is one way you can kind of prove to yourself that the whole reason of adding an integrator is to get rid of steady state error.

282
00:24:26,600 --> 00:24:29,620
It does create some complications like you're seeing here.

283
00:24:29,920 --> 00:24:35,820
And again, we are going to dig into some of the complications and problems of things that can go wrong with an integrator

284
00:24:35,820 --> 00:24:38,140
in a lot greater detail in a future video.

285
00:24:38,180 --> 00:24:44,800
But I just want to throw this out here now just to kind of put it on your radar so people can start thinking about this idea here.

286
00:24:45,060 --> 00:24:45,680
Okay, great.

287
00:24:45,760 --> 00:24:46,680
So that's the integrator.

288
00:24:47,040 --> 00:24:49,000
Give me a second to clean up the board and let's look at the last term.

289
00:24:49,760 --> 00:24:53,660
All right, so the last term we want to look at is let's look at the derivative term.

290
00:24:53,760 --> 00:24:56,760
So we'll kind of ignore the proportional in the integral.

291
00:24:56,880 --> 00:25:03,680
And again, I'm going to say kind of because you're going to see in a second that the derivative control really cannot operate by itself.

292
00:25:03,680 --> 00:25:05,120
That doesn't really make a lot of sense.

293
00:25:05,180 --> 00:25:09,060
So maybe let me kind of halfway put the ignore on these.

294
00:25:09,300 --> 00:25:13,260
Let's assume that there are other components that maybe drive the error signal.

295
00:25:13,620 --> 00:25:16,860
But mostly I want to talk about what does this UD look like.

296
00:25:16,860 --> 00:25:20,820
So let's just look at the derivative control portion and what does the UD signal look like.

297
00:25:20,920 --> 00:25:21,120
Okay.

298
00:25:21,240 --> 00:25:22,960
So again, same idea.

299
00:25:23,120 --> 00:25:33,200
Let's assume everything is hunky-dory until this time when we introduce some step in R, which generates a step in the error signal.

300
00:25:33,200 --> 00:25:33,420
Okay.

301
00:25:33,420 --> 00:25:36,120
So again, let's ask ourselves, what is the derivative doing?

302
00:25:36,260 --> 00:25:41,200
So again, the derivative is looking at basically the slope of the error plot.

303
00:25:42,000 --> 00:25:42,360
Right.

304
00:25:42,700 --> 00:25:44,100
And then it's multiplying it by KD.

305
00:25:44,220 --> 00:25:46,800
So you look at this slope here and you're like, oh, that's easy.

306
00:25:46,880 --> 00:25:47,780
That's a big fat zero.

307
00:25:47,780 --> 00:25:52,380
So again, it doesn't matter what your KD number is, your derivative gain.

308
00:25:52,580 --> 00:25:53,640
This is going to be zero.

309
00:25:54,100 --> 00:25:54,260
Okay.

310
00:25:54,480 --> 00:26:00,260
Now, at this point here when we introduce this step, you actually see that we have a little bit of a discontinuity.

311
00:26:00,380 --> 00:26:00,560
Right.

312
00:26:00,680 --> 00:26:02,620
Because the slope here is infinite.

313
00:26:02,760 --> 00:26:02,920
Right.

314
00:26:02,960 --> 00:26:07,520
It just jumped from zero to something not zero instantaneously.

315
00:26:07,660 --> 00:26:11,280
So actually the derivative control is going to be enormous.

316
00:26:11,360 --> 00:26:12,760
You're going to get some spike here.

317
00:26:13,360 --> 00:26:13,760
Right.

318
00:26:14,140 --> 00:26:15,480
You're going to get a giant number.

319
00:26:15,480 --> 00:26:15,920
Okay.

320
00:26:16,040 --> 00:26:20,380
And now what's going to happen is this is why, again, the derivative maybe doesn't work by itself.

321
00:26:20,680 --> 00:26:25,600
Maybe the proportional control, the integral control, something starts driving the error down.

322
00:26:25,800 --> 00:26:26,000
Right.

323
00:26:26,200 --> 00:26:29,820
This thing starts going down towards the reference point.

324
00:26:29,900 --> 00:26:30,060
Okay.

325
00:26:30,100 --> 00:26:34,280
So now what we can start asking is I can start looking at the slope here.

326
00:26:34,360 --> 00:26:37,680
So the slope here is kind of, you know, something.

327
00:26:38,040 --> 00:26:38,340
Right.

328
00:26:38,820 --> 00:26:41,200
And it's small.

329
00:26:41,700 --> 00:26:45,460
So let's just say that this is, I don't know, maybe this thing comes down.

330
00:26:45,480 --> 00:26:48,000
Down nicely down to here or something like that.

331
00:26:48,240 --> 00:26:50,460
Maybe your KD is negative.

332
00:26:50,860 --> 00:26:55,680
So that even though this is a negative slope, by the time you multiply by a negative KD, you get a positive UD.

333
00:26:55,800 --> 00:26:55,980
All right.

334
00:26:56,020 --> 00:26:57,420
So again, the sign doesn't really matter.

335
00:26:57,500 --> 00:26:58,800
I'm more interested in the concepts.

336
00:26:59,000 --> 00:26:59,180
Right.

337
00:26:59,360 --> 00:27:01,420
So the idea is, okay, that's like that.

338
00:27:01,500 --> 00:27:04,000
And then you see here the slope is a little bit steeper.

339
00:27:04,000 --> 00:27:06,020
So now it's a little bit more.

340
00:27:06,160 --> 00:27:07,500
And then it's even steeper.

341
00:27:07,500 --> 00:27:08,240
So you get even more.

342
00:27:08,320 --> 00:27:09,780
So I think everyone gets the idea.

343
00:27:09,860 --> 00:27:10,040
Right.

344
00:27:10,080 --> 00:27:23,980
What's happening is that this derivative signal is basically looking at the slope of the error to basically compute what it's going to do.

345
00:27:24,020 --> 00:27:24,360
Right.

346
00:27:24,740 --> 00:27:29,260
So again, I'm not a great artist, but I think it's going to, you know, something like this.

347
00:27:29,400 --> 00:27:29,580
Okay.

348
00:27:30,720 --> 00:27:31,100
Okay.

349
00:27:32,000 --> 00:27:39,120
So again, the other thing that is maybe interesting to mention here is that at steady state.

350
00:27:39,240 --> 00:27:39,420
Right.

351
00:27:39,480 --> 00:27:42,860
So here is where we have sort of steady state behavior.

352
00:27:43,660 --> 00:27:46,600
So maybe there's zero steady state error.

353
00:27:46,700 --> 00:27:48,320
Maybe there's non-zero steady state error.

354
00:27:48,420 --> 00:27:49,220
I don't really care.

355
00:27:49,220 --> 00:27:51,420
All I care is that it's at steady state.

356
00:27:51,420 --> 00:27:56,080
And what that means, right, is that steady state, what's the slope here?

357
00:27:56,260 --> 00:27:57,480
The slope is zero.

358
00:27:57,920 --> 00:27:58,160
Right.

359
00:27:58,380 --> 00:28:03,640
So at steady state behavior, the derivative is zero.

360
00:28:03,960 --> 00:28:04,200
Right.

361
00:28:08,900 --> 00:28:10,500
So interesting.

362
00:28:10,700 --> 00:28:10,920
Right.

363
00:28:10,980 --> 00:28:13,860
At steady state, the derivative does nothing.

364
00:28:14,020 --> 00:28:14,180
Right.

365
00:28:14,180 --> 00:28:16,340
So the derivative is really this D term.

366
00:28:16,660 --> 00:28:20,340
This control comes into play only when the system has dynamics.

367
00:28:20,500 --> 00:28:20,580
Right.

368
00:28:20,580 --> 00:28:25,140
When the error signal is changing, that's when this thing actually kicks in and contributes

369
00:28:25,140 --> 00:28:26,980
something to your overall control signal.

370
00:28:27,140 --> 00:28:27,320
Right.

371
00:28:27,500 --> 00:28:33,400
Now, again, you couple that with the fact, as we talked about earlier, that if you had zero

372
00:28:33,400 --> 00:28:36,960
steady state error, let's draw maybe an alternate signal, maybe as like dashed.

373
00:28:37,820 --> 00:28:38,140
Right.

374
00:28:38,140 --> 00:28:38,180
Right.

375
00:28:39,420 --> 00:28:42,460
And again, the derivative would look pretty darn close here.

376
00:28:42,700 --> 00:28:45,620
So again, this is maybe a nice part to maybe mention.

377
00:28:45,920 --> 00:28:52,100
You have steady state behavior and you have zero steady state error.

378
00:28:52,880 --> 00:28:53,360
Right.

379
00:28:53,480 --> 00:28:55,160
This is the picture you want.

380
00:28:55,240 --> 00:28:55,520
Right.

381
00:28:55,520 --> 00:28:57,980
We want whatever control scheme to do.

382
00:28:58,120 --> 00:29:01,420
We want the error signal to eventually settle out to zero.

383
00:29:01,800 --> 00:29:02,040
OK.

384
00:29:02,040 --> 00:29:03,980
Now, think about this.

385
00:29:04,500 --> 00:29:05,700
If this is zero.

386
00:29:06,060 --> 00:29:06,280
Right.

387
00:29:06,680 --> 00:29:08,260
The slope of this is flat.

388
00:29:08,500 --> 00:29:11,580
So the derivative controller is doing nothing.

389
00:29:11,980 --> 00:29:12,220
Right.

390
00:29:12,580 --> 00:29:15,180
So this here is basically zero.

391
00:29:15,340 --> 00:29:16,140
I mean, it is zero.

392
00:29:16,220 --> 00:29:16,380
Right.

393
00:29:16,420 --> 00:29:17,340
So this is zero.

394
00:29:17,860 --> 00:29:19,600
And now let me take away these ignore things.

395
00:29:19,600 --> 00:29:23,200
Because now really we can start talking about all of these together.

396
00:29:23,200 --> 00:29:25,080
Because that's what a PID controller is.

397
00:29:25,120 --> 00:29:28,260
It's when you've got interplay between all three of these components.

398
00:29:28,640 --> 00:29:28,840
Right.

399
00:29:29,280 --> 00:29:31,580
And we already talked about the UP idea.

400
00:29:31,760 --> 00:29:31,940
Right.

401
00:29:32,260 --> 00:29:36,660
The proportional part, it's just the error multiplied by KP.

402
00:29:37,040 --> 00:29:40,660
Well, if you have zero steady state error, you have zero error.

403
00:29:41,180 --> 00:29:44,120
So therefore, this is actually also zero.

404
00:29:44,960 --> 00:29:45,240
Right.

405
00:29:45,760 --> 00:29:51,380
So again, this supports what I kind of briefly waved my hands on very quickly earlier.

406
00:29:51,380 --> 00:29:58,040
is that in a good situation where everything is, where things are behaving the way you

407
00:29:58,040 --> 00:30:03,180
want it to when you have this picture, the integrator is the only thing that is non-zero.

408
00:30:03,380 --> 00:30:03,540
Right.

409
00:30:03,600 --> 00:30:07,760
It is the only thing that is contributing to your controller or to your control signal in

410
00:30:07,760 --> 00:30:08,320
this configuration.

411
00:30:08,320 --> 00:30:13,200
So again, this is just, there's a lot more discussion to be had.

412
00:30:13,280 --> 00:30:17,680
But I just wanted to kind of give everyone some core ideas and get a rough feeling of how

413
00:30:17,680 --> 00:30:21,860
all these little terms contribute, what they do, what they feel like.

414
00:30:21,960 --> 00:30:25,800
And now the game is considering all of them simultaneously.

415
00:30:26,140 --> 00:30:34,160
So to maybe get a little bit more intuitive feel for what these are, let me actually, let's

416
00:30:34,160 --> 00:30:34,960
jump outside.

417
00:30:35,120 --> 00:30:39,360
And I've got a little demo that we can look at with a physical system to see how these

418
00:30:39,360 --> 00:30:40,120
all interplay.

419
00:30:40,120 --> 00:30:41,400
All right.

420
00:30:41,400 --> 00:30:43,620
So I've got a little experimental setup here.

421
00:30:43,620 --> 00:30:47,280
And what we'd like to do is think about, I've got this little weight here and you can

422
00:30:47,280 --> 00:30:51,480
see, it might be a little hard to see on the camera, but I 3D printed this little green

423
00:30:51,480 --> 00:30:52,720
piece of plastic.

424
00:30:52,900 --> 00:30:55,220
That's going to be our variable of interest.

425
00:30:55,620 --> 00:30:57,880
That's our position Y.

426
00:30:57,980 --> 00:31:02,980
So let's track the position Y of this green disc on this weight.

427
00:31:03,140 --> 00:31:03,300
Okay.

428
00:31:03,440 --> 00:31:06,480
So now what I'd like to do is, you know, let's just sit this down.

429
00:31:06,480 --> 00:31:06,720
Okay.

430
00:31:06,720 --> 00:31:11,500
So the weight is just hanging around here and the position Y is just, you know, down

431
00:31:11,500 --> 00:31:13,460
here at the floor right now.

432
00:31:13,620 --> 00:31:19,000
And again, if the reference position of where I'm trying to track is also down here at the

433
00:31:19,000 --> 00:31:20,500
floor, everything is fine, right?

434
00:31:20,560 --> 00:31:22,340
There's zero error, right?

435
00:31:22,700 --> 00:31:27,840
Now, what makes this interesting is, okay, if this is all fine, what if we go ahead and

436
00:31:27,840 --> 00:31:29,380
change this reference position?

437
00:31:29,500 --> 00:31:34,340
So what if I want the reference position now to be, oh, I don't know, something up here

438
00:31:34,340 --> 00:31:36,140
maybe, right?

439
00:31:37,140 --> 00:31:41,820
So now you can very clearly see there is a difference between R and Y.

440
00:31:41,920 --> 00:31:43,400
So we have a non-zero error.

441
00:31:43,700 --> 00:31:45,740
And now that's the job of the controller.

442
00:31:45,880 --> 00:31:51,040
So we need the PID controller to try to fix this error and make this error go to zero.

443
00:31:51,380 --> 00:31:54,220
So now, right now you can see we have, there's no control.

444
00:31:54,520 --> 00:31:57,920
The control in this case is going to be a force that we're going to apply on this mass to

445
00:31:57,920 --> 00:31:59,760
try to move it to this position R.

446
00:32:00,120 --> 00:32:02,880
So right now there's nothing, right?

447
00:32:02,900 --> 00:32:04,020
There's no control input.

448
00:32:04,020 --> 00:32:06,020
So let's again start simple.

449
00:32:06,140 --> 00:32:07,800
Let's start with the proportional component.

450
00:32:08,040 --> 00:32:12,760
So remember, the proportional component of the controller, it's going to be a control

451
00:32:12,760 --> 00:32:16,700
signal which is directly proportional to this error, right?

452
00:32:16,700 --> 00:32:21,720
And if the error grows, then the force or the control on this is going to grow.

453
00:32:22,020 --> 00:32:27,880
So now you got to think, is there some kind of thing that we can apply to this mass whose

454
00:32:27,880 --> 00:32:30,600
force is proportional to this distance?

455
00:32:30,600 --> 00:32:32,860
That's exactly what a spring is, right?

456
00:32:32,980 --> 00:32:36,340
Or a spring or maybe like a rubber band or something like that, right?

457
00:32:36,480 --> 00:32:38,900
So maybe what I'm going to do is I'm going to hook up this rubber band.

458
00:32:39,680 --> 00:32:44,300
And I've measured this in such a way that, again, we need this to be, when this rubber

459
00:32:44,300 --> 00:32:47,240
band is not elongated, right?

460
00:32:47,320 --> 00:32:51,680
When it is, when it is, yeah, basically not elongated, right?

461
00:32:51,680 --> 00:32:53,160
There's no force by the rubber band.

462
00:32:53,160 --> 00:32:55,420
So this is perfect, right?

463
00:32:55,900 --> 00:33:00,680
So when there's zero error, there's going to be zero force from this rubber band.

464
00:33:00,840 --> 00:33:05,460
And now we should be able to let this thing go and see how does this proportional controller

465
00:33:05,460 --> 00:33:06,040
work, right?

466
00:33:06,180 --> 00:33:12,020
Because right now, if the position Y is right here at R, there's no force on the rubber band.

467
00:33:12,340 --> 00:33:20,500
But the problem is, as you can kind of see, is that that's actually not the case, right?

468
00:33:20,500 --> 00:33:20,540
Right?

469
00:33:20,900 --> 00:33:25,100
So this thing, it's doing better than it was before, right?

470
00:33:25,140 --> 00:33:26,660
It used to be all the way down on the floor.

471
00:33:26,740 --> 00:33:32,700
But now this proportional controller is able to move the position Y to about, you know, something

472
00:33:32,700 --> 00:33:33,220
like that.

473
00:33:34,800 --> 00:33:37,960
So we see there is steady state error in this case.

474
00:33:38,060 --> 00:33:40,720
So it's trying to bring it up to this R.

475
00:33:40,720 --> 00:33:46,420
But the fact that you actually need some finite error in order to have a finite control

476
00:33:46,420 --> 00:33:51,620
is what makes this problem with a proportional controller a little bit, it's not going to

477
00:33:51,620 --> 00:33:53,020
solve the entire problem, right?

478
00:33:53,560 --> 00:33:56,220
Now, you might ask, is there something better I can do?

479
00:33:56,340 --> 00:33:59,180
How can I decrease this error, right?

480
00:33:59,200 --> 00:33:59,900
We talked about that.

481
00:34:00,000 --> 00:34:04,800
Well, that just means your first try might be to do something like just go ahead and

482
00:34:04,800 --> 00:34:07,460
increase the gain on your proportional controller.

483
00:34:07,600 --> 00:34:09,840
So in this case, what's the gain of the proportional controller?

484
00:34:09,920 --> 00:34:10,940
What's the physical equivalent?

485
00:34:11,240 --> 00:34:13,240
It's basically the spring constant, right?

486
00:34:13,240 --> 00:34:19,640
If we increase the spring constant, we should increase the gain and therefore the behavior

487
00:34:19,640 --> 00:34:20,220
should change.

488
00:34:20,300 --> 00:34:22,560
So I've got a stiffer rubber band here.

489
00:34:22,700 --> 00:34:23,860
Let's do the same thing.

490
00:34:23,940 --> 00:34:30,720
Let's go ahead and add now our stiffer spring and see if that changes anything.

491
00:34:31,260 --> 00:34:31,460
Okay.

492
00:34:31,600 --> 00:34:34,540
So again, now, aha.

493
00:34:35,320 --> 00:34:36,900
Now look at this, right?

494
00:34:36,900 --> 00:34:44,380
So again, we still don't make it all the way up to R, but we have reduced the amount

495
00:34:44,380 --> 00:34:45,360
of steady state error.

496
00:34:45,720 --> 00:34:49,840
But again, the problem with the proportional controller is again, no matter how stiff you

497
00:34:49,840 --> 00:34:55,180
make this spring, in other words, no matter how big you make that gain KP, you are not

498
00:34:55,180 --> 00:34:57,420
going to get zero steady state error, right?

499
00:34:57,580 --> 00:34:58,660
That's the whole issue.

500
00:34:59,220 --> 00:35:02,760
Now, what we talked about on the board is, all right, so if that's the problem with a

501
00:35:02,760 --> 00:35:07,100
proportional controller, maybe what we're going to do is start adding an integrator, right?

502
00:35:07,260 --> 00:35:14,260
So now what I need is to add some type of control to this system where the control component,

503
00:35:14,400 --> 00:35:17,860
right, the UI, it's somehow related to the integral of the error.

504
00:35:18,040 --> 00:35:21,380
Because right now, with just a proportional controller, right, we can be sitting here at

505
00:35:21,380 --> 00:35:25,060
steady state error like this forever and nothing is ever going to change, right?

506
00:35:25,300 --> 00:35:26,680
That's what the integrator is going to do.

507
00:35:26,740 --> 00:35:29,120
So I'm going to go ahead and add this pink string.

508
00:35:29,120 --> 00:35:32,960
This pink string is supposed to represent the integral component of control.

509
00:35:33,520 --> 00:35:35,580
And right now it's slack.

510
00:35:35,780 --> 00:35:39,080
You can see the integrator is doing nothing because we're going to pretend we start our

511
00:35:39,080 --> 00:35:40,240
experiment right now.

512
00:35:40,560 --> 00:35:45,740
And now the integrator starts seeing there's some non-zero error, right?

513
00:35:45,820 --> 00:35:46,980
So it's going to start integrating it.

514
00:35:47,040 --> 00:35:49,920
So this string is going to start, whoops, hold on, it's stuck.

515
00:35:51,060 --> 00:35:56,660
This integrator component of the force, it's going to add on top of the proportional part,

516
00:35:56,660 --> 00:35:59,380
but it's going to start pulling harder and harder and harder.

517
00:35:59,480 --> 00:36:02,960
So I'm going to have to play the part of the integrator and I'm going to have to integrate

518
00:36:02,960 --> 00:36:05,780
the area under this error curve.

519
00:36:06,400 --> 00:36:09,060
And I'm going to have to start pulling and pulling and pulling.

520
00:36:09,180 --> 00:36:14,760
And as I see that the error is still non-zero, right, I'm going to keep pulling harder and

521
00:36:14,760 --> 00:36:18,420
harder and harder until eventually it hits here.

522
00:36:18,720 --> 00:36:23,000
But I've wound up so much error in my integrator that it might overshoot a little bit.

523
00:36:23,000 --> 00:36:26,000
And then it might come down and oscillate and whatnot.

524
00:36:26,740 --> 00:36:32,520
But at some point, right, the pink string, which is the integrator component, you can

525
00:36:32,520 --> 00:36:38,620
see brings the actual position of the weight up to R.

526
00:36:38,820 --> 00:36:42,020
So now R and Y are the same thing and there's zero error.

527
00:36:42,020 --> 00:36:51,360
And what we said earlier is because there is zero error, right, this rubber band, the spring

528
00:36:51,360 --> 00:36:53,940
or the proportional component is doing nothing, right?

529
00:36:54,060 --> 00:36:59,360
The pink string is taking up all of the force, is generating all of the control, right?

530
00:36:59,920 --> 00:37:01,340
So this is kind of interesting.

531
00:37:01,440 --> 00:37:01,880
So there you go.

532
00:37:01,960 --> 00:37:04,520
Here's a physical demonstration of a PI controller.

533
00:37:04,920 --> 00:37:06,060
Why don't we add the last component?

534
00:37:06,160 --> 00:37:08,220
Let's go all the way to maybe PID.

535
00:37:08,220 --> 00:37:15,180
And for giggles, let me go back to the weaker spring because this one is actually more interesting.

536
00:37:16,400 --> 00:37:17,880
So let's go back here.

537
00:37:19,340 --> 00:37:21,260
If I can hook all this back up, okay.

538
00:37:21,400 --> 00:37:21,620
All right.

539
00:37:21,980 --> 00:37:22,220
Okay.

540
00:37:22,320 --> 00:37:24,560
So now we're back here, right?

541
00:37:24,720 --> 00:37:26,720
Here's our P only controller.

542
00:37:26,900 --> 00:37:28,620
Again, we've got some error now.

543
00:37:28,700 --> 00:37:31,320
Let's go ahead and make a mark where that is.

544
00:37:31,880 --> 00:37:32,080
Okay.

545
00:37:32,080 --> 00:37:34,980
Again, we're trying to get up to this reference.

546
00:37:35,880 --> 00:37:41,680
And now, you know, we made the claim earlier that this is a P controller only, right?

547
00:37:41,720 --> 00:37:47,140
Because right now there's only a force which is directly proportional to this distance, right?

548
00:37:48,200 --> 00:37:53,720
Actually, if you think about this long enough, this is actually a P and a very weak D controller

549
00:37:53,720 --> 00:37:59,520
right now because there is a force that is acting on this weight which is proportional

550
00:37:59,520 --> 00:38:00,720
to its velocity, right?

551
00:38:00,720 --> 00:38:03,720
That's because we're sitting in a fluid, right?

552
00:38:03,740 --> 00:38:04,460
We're sitting in air.

553
00:38:04,560 --> 00:38:06,480
So there is some air resistance, right?

554
00:38:06,760 --> 00:38:10,640
That the faster you try to go through the air, the more force it's going to put onto it.

555
00:38:10,780 --> 00:38:13,960
Of course, that magnitude is negligible, right?

556
00:38:14,020 --> 00:38:16,400
Because the air is not very viscous.

557
00:38:16,520 --> 00:38:18,640
There's not a lot of aerodynamic drag in this regime.

558
00:38:19,100 --> 00:38:19,220
Okay.

559
00:38:19,420 --> 00:38:21,320
But what if we increase that?

560
00:38:21,400 --> 00:38:25,840
So for example, let me put this inside maybe this little graduated cylinder we've got here.

561
00:38:27,020 --> 00:38:27,420
Okay.

562
00:38:27,420 --> 00:38:27,480
Okay.

563
00:38:28,440 --> 00:38:28,640
Okay.

564
00:38:28,640 --> 00:38:31,860
Let me scoot this over just a little skosh just to make this line up a little bit more

565
00:38:31,860 --> 00:38:32,140
nicely.

566
00:38:32,260 --> 00:38:32,440
Okay.

567
00:38:33,340 --> 00:38:33,680
Okay.

568
00:38:34,140 --> 00:38:41,180
So I want to add now or I guess to be technically correct, I want to increase the derivative component

569
00:38:41,180 --> 00:38:42,660
of the PID controller, right?

570
00:38:42,800 --> 00:38:48,800
So what I need is I need to increase the amount of force that is applied to this which is proportional

571
00:38:48,800 --> 00:38:49,720
to its velocity.

572
00:38:49,720 --> 00:38:54,640
So if air is not a very good viscous fluid, why don't we try something a little bit more

573
00:38:54,640 --> 00:38:55,000
viscous?

574
00:38:55,120 --> 00:38:56,000
Like what about water?

575
00:38:56,080 --> 00:39:00,700
So if I pour water in here, right?

576
00:39:00,700 --> 00:39:07,700
Now what we have is I have basically increased the D component of this controller, right?

577
00:39:07,720 --> 00:39:12,160
Because now you see how much more damped out it is, right?

578
00:39:12,340 --> 00:39:17,900
You see how this thing does not bounce around or oscillate as much, right?

579
00:39:18,220 --> 00:39:20,980
Because there is now a lot more force.

580
00:39:21,060 --> 00:39:25,420
It's much harder for that weight to move through the fluid quickly, right?

581
00:39:25,420 --> 00:39:29,180
But what's interesting also is look at this.

582
00:39:29,620 --> 00:39:33,260
Like we said earlier, at steady state, the derivative is doing nothing, right?

583
00:39:33,320 --> 00:39:35,220
The velocity is zero, right?

584
00:39:35,800 --> 00:39:37,640
Error dot is zero.

585
00:39:37,800 --> 00:39:39,180
So the velocity is zero.

586
00:39:39,780 --> 00:39:44,880
So, right, the derivative component actually isn't playing that much of a role in this situation,

587
00:39:45,060 --> 00:39:45,280
right?

588
00:39:45,440 --> 00:39:48,460
So again, just to maybe compare and contrast, let me oscillate this a few times.

589
00:39:48,500 --> 00:39:53,240
And you can kind of see that when we increase the damping ratio or excuse me, increase the

590
00:39:53,240 --> 00:39:58,320
D component of the PID controller, you see there's a lot less oscillations, right?

591
00:39:58,520 --> 00:40:02,100
And again, just to compare and contrast, that is like what it is with water.

592
00:40:02,240 --> 00:40:03,380
Let's go ahead and pour this out.

593
00:40:04,480 --> 00:40:09,620
And again, now you can kind of see with air, whoops, right?

594
00:40:09,660 --> 00:40:11,880
There's a lot more, I guess it's kind of sticking now.

595
00:40:12,080 --> 00:40:16,240
Okay, this isn't quite the way I envisioned it, but you get the idea, right?

596
00:40:16,260 --> 00:40:17,620
And we can even go even further, right?

597
00:40:17,640 --> 00:40:19,160
What if I want something even more viscous?

598
00:40:19,200 --> 00:40:20,560
What about like honey, right?

599
00:40:20,560 --> 00:40:26,980
If I pour honey into here, this is going to really increase the D component of this controller,

600
00:40:27,120 --> 00:40:29,360
actually probably to the point of it being a little bit ridiculous.

601
00:40:30,620 --> 00:40:32,020
So give me a second to fill this up.

602
00:40:32,060 --> 00:40:34,540
I'm just kind of curious to see if this is going to work.

603
00:40:35,300 --> 00:40:36,940
Okay, let's try that.

604
00:40:40,120 --> 00:40:40,720
Boy, oh boy.

605
00:40:40,820 --> 00:40:44,460
Okay, so now we have really messed it up.

606
00:40:44,680 --> 00:40:47,020
The D component is way too high.

607
00:40:47,080 --> 00:40:50,380
So you can see the thing does not want to move, but it is moving, right?

608
00:40:50,380 --> 00:40:52,720
If we let this thing sit long enough, right?

609
00:40:53,020 --> 00:40:57,500
That D component of the control is not going to affect it, right?

610
00:40:57,540 --> 00:41:00,940
Because the velocity is going to be zero, so there's going to be no force on it.

611
00:41:01,040 --> 00:41:02,640
So all of that should work out.

612
00:41:02,700 --> 00:41:07,080
And again, I guess in the interest of completeness, let's talk about the full thing now.

613
00:41:07,140 --> 00:41:08,220
So we've got the proportional.

614
00:41:08,960 --> 00:41:10,960
We've got the derivative, right?

615
00:41:11,000 --> 00:41:11,860
Which is this viscous fluid.

616
00:41:11,900 --> 00:41:14,040
Now let's add the integrator back into this picture.

617
00:41:14,460 --> 00:41:16,640
Again, my integrator is this pink string.

618
00:41:16,640 --> 00:41:19,420
And again, we can play this game.

619
00:41:19,520 --> 00:41:24,540
So now this is sort of a, you can think of as a physical manifestation of this full PID controller.

620
00:41:24,660 --> 00:41:29,320
So now, you know, it has moved around and now I'm going to start pulling on this integrator.

621
00:41:29,540 --> 00:41:35,080
I'm going to start integrating this non-zero error and I'm going to start bringing this up

622
00:41:35,080 --> 00:41:36,720
to where it wants to be, right?

623
00:41:36,800 --> 00:41:38,520
So now the integrator is doing the work.

624
00:41:39,080 --> 00:41:40,480
The integrator is doing the work.

625
00:41:40,480 --> 00:41:44,700
The integrator is doing the work until we come up to around here, right?

626
00:41:44,820 --> 00:41:50,000
And now again, you can see here at this point, even with the full PID controller, right?

627
00:41:50,260 --> 00:41:55,140
At steady state, when everything is where it wants to be, it's the pink string, which is

628
00:41:55,140 --> 00:41:56,620
taking all of the work, right?

629
00:41:56,700 --> 00:41:59,020
All the control authority is coming from the pink string.

630
00:41:59,260 --> 00:42:03,020
The rubber band slash spring, which is the proportional component, is doing nothing.

631
00:42:03,440 --> 00:42:08,780
And the derivative component, which is basically the viscous fluid, is doing nothing, right?

632
00:42:08,780 --> 00:42:11,820
So that's my demo.

633
00:42:11,960 --> 00:42:16,960
Hopefully this gives a little bit of an intuitive feel for what this PID controller is doing,

634
00:42:17,040 --> 00:42:17,140
right?

635
00:42:17,160 --> 00:42:22,040
You can almost think about it as a proportional component is adding some amount of springiness

636
00:42:22,040 --> 00:42:23,700
to your system.

637
00:42:24,080 --> 00:42:29,140
Sometimes people refer to this as, you know, the proportional part is interested in the

638
00:42:29,140 --> 00:42:29,480
present.

639
00:42:29,660 --> 00:42:31,120
It cares about what's happening right now.

640
00:42:31,200 --> 00:42:35,360
It cares about what is the amount of error right now in the present moment and it acts upon

641
00:42:35,360 --> 00:42:35,900
that, right?

642
00:42:35,900 --> 00:42:38,500
Then we saw the integral, right?

643
00:42:38,800 --> 00:42:45,740
This pink string is, it kind of thinks about it like, it cares about the past error, right?

644
00:42:45,780 --> 00:42:49,880
It integrates all of the error that has occurred in the past and that's how you compute your

645
00:42:49,880 --> 00:42:51,000
current control signal.

646
00:42:51,120 --> 00:42:53,720
So the integral sort of thinks about the past.

647
00:42:53,720 --> 00:42:59,920
And from this analogy, you can also see that, I guess, the integral, you can kind of think

648
00:42:59,920 --> 00:43:02,600
about it as like adding inertia to your system, right?

649
00:43:02,600 --> 00:43:07,020
Because the integrator winds up all of this state error and it has a tendency to overshoot.

650
00:43:07,140 --> 00:43:11,400
It's like this idea of momentum of inertia or inertia of your system, right?

651
00:43:11,560 --> 00:43:15,220
And then finally we saw the D component or the derivative component, right?

652
00:43:15,220 --> 00:43:20,340
And that is almost thinking about, you can kind of, again, think about like thinking about

653
00:43:20,340 --> 00:43:21,280
the future, right?

654
00:43:21,600 --> 00:43:26,840
It thinks about, looks at time rates of change to kind of help predict where the system is

655
00:43:26,840 --> 00:43:27,280
going to go.

656
00:43:27,340 --> 00:43:32,620
So you can see the PID controller is sort of looking at the present, the past and the future

657
00:43:32,620 --> 00:43:36,060
all at the same time in kind of a loose hand wavy sense.

658
00:43:36,060 --> 00:43:41,020
And then lastly, the last analogy to maybe draw is that, again, we saw the derivative

659
00:43:41,020 --> 00:43:46,600
component is sort of related to, you can think about it as adding damping to your system,

660
00:43:46,700 --> 00:43:46,880
right?

661
00:43:47,200 --> 00:43:48,560
So there's a couple of ways you can think about this.

662
00:43:48,600 --> 00:43:53,700
You can think about the PID controller as basically a past, present, or sorry, present, past,

663
00:43:53,900 --> 00:43:55,140
future kind of system.

664
00:43:55,280 --> 00:44:02,360
Or you can think of it as like adding a spring, mass, and damper to your system.

665
00:44:02,480 --> 00:44:04,820
So there's a lot of nice kind of parallel analogies.

666
00:44:04,820 --> 00:44:09,440
But again, I think the rigorous way to look at it is mathematically, as we saw earlier

667
00:44:09,440 --> 00:44:10,580
on the board.

668
00:44:10,720 --> 00:44:14,480
I hope this demonstration just gives a little bit of a physical intuition of what all these

669
00:44:14,480 --> 00:44:15,500
components are doing.

670
00:44:16,240 --> 00:44:16,700
All right.

671
00:44:16,740 --> 00:44:21,340
So now hopefully you've got a good intuitive feel for what all of these terms do.

672
00:44:21,860 --> 00:44:24,740
So maybe it might be helpful to just make a little quick table.

673
00:44:25,100 --> 00:44:30,200
This is sort of some rules of thumb about how adjusting these parameters are going to affect

674
00:44:30,200 --> 00:44:31,420
different parts of your system.

675
00:44:31,420 --> 00:44:37,180
So if you adjust KP, let's ask about how does that affect things like the rise time, overshoot,

676
00:44:37,300 --> 00:44:39,180
settling time, steady state error, and the stability.

677
00:44:39,340 --> 00:44:44,500
And again, keep in mind, these are real loose generalizations, shooting from the hip kind

678
00:44:44,500 --> 00:44:44,880
of ideas.

679
00:44:45,180 --> 00:44:46,820
Don't take any of these for gospel.

680
00:44:47,180 --> 00:44:52,180
We will do the actual analysis down the road in other discussions so we can make quantitative

681
00:44:52,180 --> 00:44:55,300
and qualitative statements.

682
00:44:55,300 --> 00:44:57,420
But for now, let's just look at these general ideas.

683
00:44:57,500 --> 00:45:01,740
So again, what we're talking about here is if you make KP bigger, and again, maybe this

684
00:45:01,740 --> 00:45:07,020
is maybe really if you make the absolute value of these terms larger, right?

685
00:45:07,040 --> 00:45:12,100
As these sort of increase, basically you're talking about making these components more

686
00:45:12,100 --> 00:45:12,600
aggressive.

687
00:45:14,220 --> 00:45:15,900
What does that do to all these parameters?

688
00:45:15,900 --> 00:45:17,700
So we saw that KP, right?

689
00:45:17,740 --> 00:45:22,040
This is really like, it's kind of like you can think about as adding like a spring, right?

690
00:45:22,080 --> 00:45:24,180
A stiffer spring to your system, right?

691
00:45:24,340 --> 00:45:28,560
So what this does for rise time is this is going to generally try to, it's going to decrease

692
00:45:28,560 --> 00:45:29,480
your rise time, right?

693
00:45:29,500 --> 00:45:30,520
You're going to get there faster.

694
00:45:31,020 --> 00:45:35,040
The consequence of this is usually this is going to make your oscillations or your overshoot

695
00:45:35,040 --> 00:45:36,080
go up.

696
00:45:36,080 --> 00:45:40,540
Settling time, this is really a small change.

697
00:45:41,700 --> 00:45:44,020
It doesn't have much effect here, okay?

698
00:45:44,340 --> 00:45:49,160
Steady state error, we saw that this is going to decrease your steady state error, right?

699
00:45:49,200 --> 00:45:51,960
But you're still going to have steady state error with a proportional only.

700
00:45:52,480 --> 00:45:56,320
And instability, the problem with this is it sort of decreases your stability, right?

701
00:45:56,340 --> 00:45:57,580
It degrades your stability.

702
00:45:57,740 --> 00:46:02,420
It makes you more likely to have issues and become unstable, okay?

703
00:46:02,900 --> 00:46:04,120
Let's talk about the integrator.

704
00:46:04,120 --> 00:46:08,040
As you make the integrator magnitude larger, how does this affect it, okay?

705
00:46:08,180 --> 00:46:10,580
So your rise time, this tends to go down.

706
00:46:11,380 --> 00:46:16,040
Your overshoot, we saw the, you know, the integrator is one source of major overshoot in this case.

707
00:46:16,120 --> 00:46:16,980
So this goes up.

708
00:46:17,960 --> 00:46:21,320
Settling time, this also tends to go up, okay?

709
00:46:21,600 --> 00:46:27,500
Now the nice thing about the integrator though is steady state error, this really, you know,

710
00:46:27,560 --> 00:46:29,580
it eliminates it, right?

711
00:46:29,600 --> 00:46:30,860
That's the whole point of the integrator.

712
00:46:30,940 --> 00:46:32,940
So let's just write eliminate here, okay?

713
00:46:32,940 --> 00:46:37,200
And in terms of stability though, the price you pay for this is, again, you add the integrator,

714
00:46:37,320 --> 00:46:41,840
you add some dynamics, and you're more likely to make this overall system unstable, okay?

715
00:46:41,860 --> 00:46:43,700
So you got to be careful with that, right?

716
00:46:44,000 --> 00:46:46,480
Okay, let's talk about the derivative, okay?

717
00:46:46,540 --> 00:46:51,300
So the derivative, again, this doesn't really do much to the rise time.

718
00:46:51,400 --> 00:46:54,600
So it's not going to matter a ton, right?

719
00:46:54,600 --> 00:46:56,320
What it does do, right?

720
00:46:56,360 --> 00:46:59,700
We saw that the derivative, it's like adding a damper to your system.

721
00:46:59,780 --> 00:47:03,480
So actually this decreases your overshoot, right?

722
00:47:03,660 --> 00:47:08,620
It makes it like you're sitting there in honey and it's making it slower, so it's less likely to overshoot.

723
00:47:09,920 --> 00:47:15,600
Okay, settling time, this also, if you increase KD, it usually makes your settling time a little bit less

724
00:47:15,600 --> 00:47:17,020
because your oscillations go down.

725
00:47:17,580 --> 00:47:19,020
Now, and we saw steady state error.

726
00:47:19,140 --> 00:47:21,100
This is really no effect in theory.

727
00:47:23,980 --> 00:47:27,780
There are, we're going to see when we start looking at this from designing,

728
00:47:28,000 --> 00:47:31,480
from a root locus perspective or other techniques, that this does sort of affect it.

729
00:47:31,520 --> 00:47:36,720
But really, right, we saw that at steady state, the derivative really is not playing a role, okay?

730
00:47:37,420 --> 00:47:42,900
And this is also, the stability is, I don't know if I want to draw any hard conclusions here.

731
00:47:43,220 --> 00:47:49,000
Let's just say that maybe this might improve stability if KD is small.

732
00:47:49,120 --> 00:47:51,180
So it's, again, it's one of these things, everything in moderation.

733
00:47:51,340 --> 00:47:55,160
You don't want to go overboard because you definitely can drive things unstable with the large KD.

734
00:47:55,240 --> 00:47:58,120
But if you keep them small, it's usually pretty reasonable.

735
00:47:58,340 --> 00:48:04,840
So, again, these are some rules of thumb about how to tune these gains, again, right?

736
00:48:04,840 --> 00:48:09,400
Because the whole game with the PID controller, we said it's incredibly versatile.

737
00:48:09,640 --> 00:48:10,920
It's used all over the place.

738
00:48:11,200 --> 00:48:16,080
The only thing you've got to really do is pick these three numbers, KP, KI, and KD.

739
00:48:16,520 --> 00:48:20,040
And this will hopefully get you a little bit of the way there.

740
00:48:20,160 --> 00:48:25,060
But hopefully there are, you know, there are warning bells going off in the back of your head that says,

741
00:48:25,340 --> 00:48:29,700
I don't want to design an engineered system based on a rule of thumb table, right?

742
00:48:29,740 --> 00:48:31,660
But this gives us some intuitive feel.

743
00:48:31,660 --> 00:48:39,760
Well, what we instead want to do in some of our future discussions is look at mathematically rigorous ways to synthesize a PID controller,

744
00:48:39,980 --> 00:48:44,440
a.k.a. pick those gains, using things like root locus or other techniques.

745
00:48:44,920 --> 00:48:47,120
So that hopefully sets the stage.

746
00:48:47,280 --> 00:48:49,120
I think this is probably a good spot to leave it.

747
00:48:50,360 --> 00:48:55,800
And like I said, we're going to have a ton of future other videos looking at a lot of topics in PID.

748
00:48:56,140 --> 00:48:57,280
So please stay tuned.

749
00:48:57,400 --> 00:48:58,940
So I hope you enjoyed the video.

750
00:48:58,940 --> 00:49:01,360
If so, I also hope you'll consider subscribing to the channel.

751
00:49:01,480 --> 00:49:03,760
It really does help me continue making these videos.

752
00:49:03,880 --> 00:49:06,100
If you scroll a little ways down and click on that subscribe button.

753
00:49:06,460 --> 00:49:08,580
Also, remember the new videos come out every Monday.

754
00:49:08,680 --> 00:49:12,900
So I hope I'll be able to catch you at a future discussion and we can all learn something new together.

755
00:49:13,100 --> 00:49:15,140
So until next time, I think I'll sign off.

756
00:49:15,260 --> 00:49:15,700
Talk to you later.

757
00:49:15,920 --> 00:49:16,220
Bye.

