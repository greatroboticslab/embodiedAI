56p3_aORiJ0
https://www.youtube.com/watch?v=56p3_aORiJ0
Unknown Category
so one of the biggest requests that i have had since starting this channel is to do a video kind of overviewing and going into how to choose and select different mosfets there's a ton of good information out there that either are insanely advanced to where you have to do like 18 derivations to figure out how to calculate anything with a mosfet there's a ton of articles that say you apply voltage the mosfet turns on calculate power rds on that's it there's not a whole lot of in between kind of going into what are the useful equations to where you can get valid info how to drive them but don't get so down into the weeds to where you're really losing out on actually how to make something useful and just trying to do all the theoretical side so my goal with this video and i have a blog post also on this is to kind of go over just enough detail to where you can do most useful calculations specifically for high power designs i'm going to mention a little bit about higher switching speeds but not a ton because that is where it does get a little more complicated but most people aren't really worried about that unless you're building like a voltage regulator or something like that so i think the best way to start this is just with a simple example of a logic level mosfet circuit so everyone has seen a mosfet circuit like this as a quick overview on mosfets the big difference between them and a bjt or an npm transistor is a mosfet switches on and off based on an applied voltage it doesn't require a continuous current going from the gate to source like it would on a standard transistor it's also important to realize that the gate of a mosfet essentially acts as a capacitor once the gate is fully charged there's really no current that flows of course there's always parasitic so there's always some current that flows but it's mostly negligible once the gate is charged then the drain conducts to the source and i'm going to be limiting this discussion to n-channel mosfets they're way more common and realistically they for high power designs that's really all you need this is what is called a logic level mosfet there are two main types of mosfets standard or power mosfets and then logic level logic level are a newer type of mosfet and the big difference with them is they require only a up to a five volt voltage applied on its gate with respect to the source so if you look at the gate to source voltage once you get below around 2.1 ish volts the resistance from the drain to source decreases exponentially the resistance from drain to source is simply what the resistance going across these two terminals are so if you were to essentially get rid of that mosfet and replace it with a resistor right here when the mosfet is fully turned on that is the resistance that is right there simple as that so this is one of the main specs that governs how much the mosfet will heat up when you're turning it on so the other thing that this circuit has that a lot of people will overlook is this resistor right here this is what's called a gate resistor and what you have to remember why those are needed is remember how i said that the gate acts as a capacitor what happens to a capacitor when it's completely uncharged and you apply a voltage your driving circuit sees that gate sees the capacitor as a short circuit so if this was just a wire the second you go to switch this on this gate is viewed by this circuit as a short if this microcontroller is unable to source that much current something bad is going to happen because with no resistance here of course there's parasitics but with no real resistance here powering this from presumably five volts it can try to source several amps going into this gate so a gate resistor acts to limit that so at five volts with a hundred ohm resistor it's going to limit it to what 50 milliamps which any microcontroller should be able to source if you need to have it a little bit lower you just raise the resistance of this there's a couple other important reasons why gate resistors are used remember how i mentioned that there's those parasitics so this trace has a certain resistance which you can't really calculate easily there are certain resistances going into the gate those could be tens of ohm tens of milli ohms uh maybe up to half an ohm you don't really know if you don't have this gate resistor and you try to calculate switching speeds you try to calculate anything you really don't have a way to know what this resistance is and you don't have a way to know how much current is being applied the second you add in one of these gate resistors those parasitics become completely overshadowed by this gate resistor it doesn't matter if it's a hundred point zero one ohms or a hundred point one ohms the hundred is way more significant in your calculation and that's even true if this was 10 ohms 10.01 ohms and 10.1 is not that big of a difference for your calculations so it just allows you to have a better reference point to make your calculations from the other reason gate resistors are important and this is a little more intricate so i'm not going to go into it too much basically if you don't have this you can get what's called ringing or oscillation since there's such a high amount of current being sourced so quickly without a gate resistor here the parasitics mainly the inductance has the ability to make this gate oscillate from different voltages and it can keep the mosfet from turning on it can make it to where it's in a state that you don't want it to be or it can over voltage it entirely basically that gate resistor just acts to kind of dampen all of that and make it a much smoother transition going from off to on or on to off so something else that's really important with mosfets and i did not draw it in here i was making sure you guys were paying attention you have to have a pull down resistor or you have to have something that makes this mosfet in a default state so if we add a 10k resistor right here that means no matter what this output is if it's if it's floating or it's open drained if the microcontroller turns on and it's at an unknown state this pull down resistor is going to ensure that the gate is always in a down state to where there's no charge on it typically with high power mosfets you're always going to want the default state to be off so if nothing else is happening with this circuit you can be assured that this will not be conducting and your mosfet will not be turned on so now i'm sure you're thinking oh logic level mosfets are the way to go i don't have to use anything else that would be nice honestly i unless it's for an indicator led or something very low power i virtually never use logic level mosfets there are incredible trade-offs that they made when they designed the mosfet to be a logic level mosfet basically the rds on so the resistance from drain to source the amount of gate charge so the amount of charge that has to be injected into the gate to get it to turn on are almost always going to be significantly higher in a logic level mosfet unless there's some overwhelming reason why you can't drive it as a normal mosfet is i would never recommend you use a logic level fet for anything other than very low power non-important drivers this is kind of the standard configuration that i will use for driving a high power mosfet this ncp chip is what's called a gate driver it has one goal in life it turns on and turns off mosfets and it does it very well what's really nice about this is it has a separate h and l output it has the output high which is actually what injects the charge outputs current to turn on the mosfet and then the out l is what drains the gate so removes the charge from it what that allows you to do i don't show it here you can use two different gate resistors to fine tune how quickly the mosfet turns on and how quickly it turns off for this case i don't put it there because for turning on a high power load it doesn't really matter because they're pretty slow so the mosfet i am using here is one of the go-to power mosfets that i use it has an incredibly small rds on which compared to the logic level mosfet which was 1.6 ohms this is 1.4 milli-ohms so a substantial decrease in the resistance on it and it also has a pretty small gate charge which i'll talk about in a little bit so now i want to discuss some other important data sheet specs a couple i've already mentioned a couple i haven't for this i'm going to reference my blog post so let's say we need to make a h bridge driver i've talked about h bridges in the past it's a way to control like a brushed dc motor or a linear actuator it needs to be able to source 10 amps continuously if there is a stall condition it needs to be able to handle up to 25 amps it'll be powered by 12 volt dc it'll have a silent pwm speed which just means it's not in the audible range so ultrasonic which is 20 to 30 kilohertz and of course we need to minimize heat dissipation as always if we take this mosfet and this gate driver as our example we can look at the data sheet of this mosfet the important specs that we need to grab from it are the rds max we don't care about the typical because we need to design for the worst case scenario of course we can use that to calculate the amount of power that will be dissipated from the mosfet the vdss is simply the amount of voltage that this mosfet can have between its drain and its source so between here between this pin and this pin which since we're powering this from 12 volts we're not even close to that the id which is either silicone limited or package limited we always care about the package limited because that is irrelevant because we're using this specific package and this is a spec that's commonly misunderstood this does not mean that you can drive this mosfet at 240 amps if you try doing this at 240 amps without it being like literally underwater or some water cooling system it'll burst into flames almost immediately all this means is you absolutely cannot drive it above that but you're not going to be able to drive it at that so take this number with a complete grain of salt just don't exceed it the next important spec is the vgs which is simply the gate to source voltage so the maximum voltage that you can apply on the gate with respect to the source and this is typically around 20 volts for a standard mosfet which we are driving it from 12 volts so again we're perfectly fine there then the r theta j a which this is the thermal resistance from the junction of the mosfet to the outside air this we use to determine how hot the mosfet will get at a given power the last important spec and this is the one where it's definitely not a true science what i'm going to show you guys but it's a decent rule of thumb and that is the total gate charge this i briefly mentioned a couple times already in this video and what this is is this is the amount of charge that you have to inject into the gate before it turns fully on since it's a capacitor essentially on the gate you have to give it that much charge in coulombs or nano coulombs to have it turn on this is one of the main factors that governs how fast the mosfet turns on and then by default turns off so let's start doing some calculations and this obviously isn't the h bridge circuit but i changed the value of the resistor here so it should be pretty similar so the first thing that we want to work on is determine how much power the mosfet will be dissipating worst case so we use p equals i squared r we know that our max current in a stall which is the worst case scenario is 25 amps and our worst case resistance is 1.4 and when we calculate that out we get 0.875 watts but now we have to relate that value to something useful because in a vacuum under a watt we don't really know if that's a good value or not so that's where that r theta junction to ambient comes in so we know that the theta junction to ambient is 40 c over w which means for every watt that the mosfet dissipates it will raise in temperature by 40 degrees celsius so if we simply multiply that by our power that gives us the delta t we have to make sure that we understand that that is not what temperature it'll be at that's the temperature it'll increase by so that is 35 c so if we are at a room temperature ambient around 25 c it'll raise by 35 c which is 60 degrees celsius which 60 c for the junction temperature is perfectly safe it should be safe depending on the mosfet up to around 100 c if not a little more but i always try to shoot for a maximum of 80 c worst case but you can always reduce that by having a heat sink on there so now we know that the heat dissipation of this mosfet will not be an issue the next thing we want to see is how quickly we can switch it on and off so for that the first thing we need to do is see how much current this driver will be sending to the gate and like i said this gate driver can source up to an up to 10 amps i have a 10 ohm gate resistor here so we need to calculate the amount of current maximum that it can inject and that is simply v equals ir our maximum current is 1.2 amps and there is a simplification here this is assuming that the voltage at the gate stays at zero because we're assuming that the voltage from here minus this is the total voltage which it's not typically this will be a couple volts but that's where my simplifications are coming in so just keep that in mind if you have to do the exact calculation you're gonna have to do a lot more intricate stuff than i'm showing here but when we finish this calculation i'll show you why i feel confident for this case that these calculations hold true and now we can use a different calculation to see how long it takes to inject that much charge into the gate of the mosfet and this is just the time equals charge divided by current we're trying to solve for time we know that our charge that needs to be injected is 354 nanocoulombs and we know that our current is 1.2 amps when we calculate that out we get t is equal to 295 nanoseconds and with this calculation that is how long it will take for this mosfet to turn fully on if we need to switch it at a different or a differing frequency it's not just how quickly it turns on it's how quickly it turns on then off so technically the round trip is double this and when we do that calculation and see the maximum frequency it comes out to around 2 megahertz so we only have to switch this at 20 kilohertz we are several orders of magnitude below the theoretical max switching speed of this mosfet this is where the rule of thumb comes into play if we would have calculated this out and let's say this time would have or this frequency would have came out to 30 kilohertz or 40 we are way too close to that threshold and i would not feel confident with this at all and we would either need to change the gate resistor to have it be bigger of a gap or do the more intricate derivations which i mention in the blog some app notes which go into great detail on that but for something like this this is perfectly fine and i would never go into any more calculations than this because it's just not necessary if we do the intricate calculations maybe we get that the actual switching speed maximum is 1.2 megahertz or 1.1 it doesn't matter we're still so far below that that it absolutely is fine whatever this comes out to be and this is where you could actually tune this gate resistor to be a little bit higher of a value making it turn on a little bit slower which can help with some emc and emissions issues but that's something i'm not going to get into on this video so basically with those calculations out of the way we now know that this mosfet driven by this gate driver won't heat up too much it's not going to be even close to the maximum switching speed so we can feel pretty confident that this mosfet will be able to drive that load of course there's other stuff to be concerned with with a brushed motor driver the back emf having sure making sure you have enough bulk capacitance but on the mosfet side we are perfectly fine with this selection so i hope that this video covered everything that you typically need to know when selecting a mosfet and designing a circuit for it i will have a link in the description to my blog post which goes into a little more detail on this and it gives a few more examples but other than that i hope you guys enjoyed this video and please let me know any suggestions of future videos and i will see you in the next video