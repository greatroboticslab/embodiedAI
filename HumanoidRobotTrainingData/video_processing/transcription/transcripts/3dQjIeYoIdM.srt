1
00:00:01,000 --> 00:00:06,500
In a previous video I showed you how to create a simple class AB audio amplifier

2
00:00:06,500 --> 00:00:13,500
that consists of any 5534-bamp and a push-pull bipolar junction transistor output stage.

3
00:00:13,500 --> 00:00:19,000
Now, even though the circuit did work decently, there was one problem.

4
00:00:19,000 --> 00:00:20,500
It's power loss.

5
00:00:20,500 --> 00:00:26,500
We can identify its cause by taking a look at the simplified functional block diagram.

6
00:00:26,500 --> 00:00:32,500
Firstly, our originally applied audio signal gets its voltage amplified by an op-amp.

7
00:00:32,500 --> 00:00:39,500
Since such op-amps can only supply very little power, the next part of the circuit is a BJT output stage

8
00:00:39,500 --> 00:00:46,500
that modulates a supply voltage of 12 volts to become the audio signal that is not only voltage amplified

9
00:00:46,500 --> 00:00:50,500
but can also supply sufficient current for the speaker.

10
00:00:50,500 --> 00:00:55,000
The only problem is that the transistors work in the active region,

11
00:00:55,000 --> 00:01:00,000
which means there exists a noticeable voltage drop across the collector emitter path

12
00:01:00,000 --> 00:01:08,000
and thus power loss is created, which leads to an overall efficiency of around 50 to 60%.

13
00:01:08,000 --> 00:01:13,000
To increase this efficiency though, we can utilize another audio amp kind,

14
00:01:13,000 --> 00:01:19,000
a class D amp to be precise, with an efficiency of up to 95%.

15
00:01:19,000 --> 00:01:23,000
So in this video, I will show you how such an audio amp works

16
00:01:23,000 --> 00:01:29,000
and how we can create our own DIY version, which consists of common components.

17
00:01:29,000 --> 00:01:31,000
Let's get started!

18
00:01:31,000 --> 00:01:49,000
First off, let's have a look at the simplified functional block diagram of a class D amp.

19
00:01:49,000 --> 00:01:56,000
On the left side, we got our audio signal, which is connected to the non-inverting input of a comparator.

20
00:01:56,000 --> 00:02:04,000
The inverting input however, gets connected to a triangle wave with a frequency of above 200 kilohertz.

21
00:02:04,000 --> 00:02:09,000
Now whenever the voltage of our audio signal is higher than the triangle voltage,

22
00:02:09,000 --> 00:02:14,000
the output of the comparator gets pulled high and vice versa.

23
00:02:14,000 --> 00:02:21,000
This way, we basically modulated our audio signal with maximum frequencies of around 20 kilohertz

24
00:02:21,000 --> 00:02:26,000
into a high-frequent square wave, which then connects to a MOSFET driver.

25
00:02:26,000 --> 00:02:30,000
The driver obviously turns on and off two MOSFETs.

26
00:02:30,000 --> 00:02:33,000
The high side one according to the high voltage levels,

27
00:02:33,000 --> 00:02:37,000
and the low side one according to the low voltage levels.

28
00:02:37,000 --> 00:02:42,000
This way, we get a powerful high-frequent square wave at the MOSFETs output,

29
00:02:42,000 --> 00:02:46,000
which since the MOSFETs were switched on and off in their ohmic region,

30
00:02:46,000 --> 00:02:52,000
with a low drain to source voltage drop, created very little power losses.

31
00:02:52,000 --> 00:02:58,000
Now we can recreate the original audio signal by adding an LC low-pass filter,

32
00:02:58,000 --> 00:03:02,000
which like the name implies, filters out all the high frequencies,

33
00:03:02,000 --> 00:03:06,000
and leaves us with our original, now amplified audio signal.

34
00:03:06,000 --> 00:03:18,000
As suitable components, we can use a 555 timer, a LM393, a 74HC04 to create an inverted signal of the high-frequent square wave,

35
00:03:18,000 --> 00:03:26,000
which is mandatory for the IR2113 MOSFET driver, and two IRLZ44N MOSFETs.

36
00:03:26,000 --> 00:03:33,000
Before we can solder a proper circuit though, I utilized the free EasyEDA circuit design software,

37
00:03:33,000 --> 00:03:36,000
to create an appropriate schematic.

38
00:03:36,000 --> 00:03:42,000
By utilizing the online component library, I imported all the required ICs and passive components,

39
00:03:42,000 --> 00:03:49,000
and afterwards connected them all to one another, according to the previously discussed functional block diagram.

40
00:03:49,000 --> 00:03:55,000
The only question left to answer, was what kind of values should be used for the LC filter.

41
00:03:55,000 --> 00:04:04,000
According to a commercial class D amp that I had lying around, inductances of 22μH should be suitable.

42
00:04:04,000 --> 00:04:09,000
The only inductors I had lying around though, were 33μH ones.

43
00:04:09,000 --> 00:04:15,000
So I connected two of them in parallel, in order to create a 16.5μH value,

44
00:04:15,000 --> 00:04:22,000
and wrote down the two formulas to calculate the inductance and capacity of a LC low-pass filter.

45
00:04:22,000 --> 00:04:28,000
If we rearrange the inductor formula, and insert the load impedance of 4Ω,

46
00:04:28,000 --> 00:04:33,000
according to the speaker properties, and the inductance of 16.5μH,

47
00:04:33,000 --> 00:04:38,000
we can calculate a cutoff frequency of around 40kHz,

48
00:04:38,000 --> 00:04:46,000
at which the original voltage amplitude will be lowered by 3dB, or 40% of the original amplitude.

49
00:04:46,000 --> 00:04:54,000
By inserting this frequency into the capacitor formula, we get a capacitance of around 1.03μF,

50
00:04:54,000 --> 00:05:00,000
which I created by connecting five 0.22μF capacitors in parallel.

51
00:05:00,000 --> 00:05:05,000
And now that the schematic was complete, I gathered all the required components,

52
00:05:05,000 --> 00:05:08,000
and started soldering them to a piece of perfboard.

53
00:05:08,000 --> 00:05:13,000
As always, I tried to utilize silvered copper wire for the most part,

54
00:05:13,000 --> 00:05:17,000
but still had to use a bit of hookup wire at the end.

55
00:05:17,000 --> 00:05:21,000
And of course, you can find reference pictures of my perfboard layout,

56
00:05:21,000 --> 00:05:25,000
as well as the schematic for this project, in the video description.

57
00:05:25,000 --> 00:05:29,000
After three hours of soldering, the circuit was complete,

58
00:05:29,000 --> 00:05:36,000
and it was time to insert all the ICs, connect a 15V power supply to the input,

59
00:05:36,000 --> 00:05:38,000
and a speaker to the output.

60
00:05:38,000 --> 00:05:41,000
As a first test, I hooked up my function generator,

61
00:05:41,000 --> 00:05:47,000
set to a sine wave with a frequency of only 1Hz to the audio input.

62
00:05:47,000 --> 00:05:54,000
Since the 555 timer creates a triangle voltage between around 1.3 and 2.3 of the supply voltage,

63
00:05:54,000 --> 00:05:59,000
we also have to use a potentiometer to add a DC offset to the sine wave,

64
00:05:59,000 --> 00:06:04,000
so that it is completely submerged inside the triangle wave.

65
00:06:04,000 --> 00:06:07,000
If we now take a look at the output of the comparator,

66
00:06:07,000 --> 00:06:14,000
we can see how the slowly changing 1Hz sine wave creates the modulated high-frequent square wave.

67
00:06:14,000 --> 00:06:19,000
And if we increase the frequency to a value that is closer to proper music,

68
00:06:19,000 --> 00:06:23,000
the output definitely looks crazy and confusing,

69
00:06:23,000 --> 00:06:26,000
but the theory pretty much stays the same.

70
00:06:26,000 --> 00:06:33,000
But by using lower frequencies, we can actually create a lot of visible vibrations of the speaker cone,

71
00:06:33,000 --> 00:06:39,000
which showcases that this class D-Amp is pretty damn powerful for its simplicity.

72
00:06:39,000 --> 00:06:44,000
And as you would have expected it, by increasing the frequency of the sine wave,

73
00:06:44,000 --> 00:06:49,000
we produce higher tones, which means that the amp works without a problem.

74
00:06:49,000 --> 00:06:56,000
So I replaced the function generator with my smartphone and tested the music playback capabilities of the amp.

75
00:06:56,000 --> 00:07:03,000
As you can hear, the music playback also worked like a charm, but the volume was a bit low.

76
00:07:03,000 --> 00:07:10,000
The reason for that was that the music signal only features a peak-to-peak voltage of around half a volt,

77
00:07:10,000 --> 00:07:15,000
while the function generator easily created peak-to-peak voltages of 4 volts.

78
00:07:15,000 --> 00:07:23,000
So as an afterthought, I added an LM386 op-amp in between the input audio signal and the comparator,

79
00:07:23,000 --> 00:07:26,000
which didn't even require complementary components.

80
00:07:26,000 --> 00:07:32,000
Afterwards, the audio signal consisted of a peak-to-peak voltage of 4 volts as well,

81
00:07:32,000 --> 00:07:38,000
which was suitable to create a much louder playback of the music through the class D-Amp.

82
00:07:38,000 --> 00:07:42,000
Now of course, this circuit is definitely not perfect.

83
00:07:42,000 --> 00:07:46,000
However, the audio quality is pretty decent.

84
00:07:46,000 --> 00:07:49,000
And more importantly, maybe you learned something new.

85
00:07:49,000 --> 00:07:53,000
If so, don't forget to like, share and subscribe.

86
00:07:53,000 --> 00:07:57,000
Stay creative and I will see you next time.

87
00:07:57,000 --> 00:07:58,000
See you next time.

