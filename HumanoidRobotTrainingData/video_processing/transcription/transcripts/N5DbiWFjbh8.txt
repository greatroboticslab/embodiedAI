N5DbiWFjbh8
https://www.youtube.com/watch?v=N5DbiWFjbh8
Unknown Category
but yeah essentially you're just going to fly your quad line of sight or have it freak out on you all right so real quick i just wanted to give a disclaimer that this isn't a betaflight tutorial for instance on how to update betaflight or how to set up with your build this is just going off of the assumption that you already have that all done and you're just looking to get that perfect pid tune or improve your bid or you're just curious on how i tune my builds and another thing to mention is that every quad is different so they all require their own unique tune so please don't copy my end result and expect it to work flawlessly with your build so with that out of the way essentially you're gonna need three different softwares first being betaflight configurator obviously then black box explorer and then pid toolbox i'll have links to all these in the description but for the betaflight configurator make sure it's on the latest release at the time of this recording it's 10.9 essentially you're just going to scroll down to these download links um i have windows so i would just do win64 but i already have it downloaded so i'm not going to save it same thing for black box explorer you just scroll down click the download link and then for pid toolbox you're going to go over here under releases and then just scroll down and download it for years this uh pid toolbox software it can be kind of finicky to install it takes a minute it's got to install some other things but and sometimes if you create a shortcut on your desktop for example like this there's a chance that it won't load if the application isn't launching after you installed it what you want to do is right click open file location and then um open it from here and this should work if that happens now that you have all these softwares downloaded obviously open up betaflight assuming you already have updated your quad the latest release of betaflight 4.4 you probably can follow along if you're using 4.3 i would recommend updating the 4.4 they improved uh some dynamic notch filtering and anti-gravity they also supposedly improved that so heading over to the pid tuning um these numbers are going to be different from yours essentially i just applied the express lrs preset at 500 hertz so yeah after i applied that preset that's what changed these numbers so just make sure you already have your right control preset like i said in the beginning this is going off the assumption you already know how to work with betaflight you just want that perfect pit tune next i go to dynamic damping i actually change this value from 37 to 40. and then another thing dynamic idle i enable this and i like to set it to 25 that fits my props i run a 3.5 degree pitch if you have like a three degree pitch such as the ethics pb and j's or gempan 3s i would suggest maybe send that to 30 or if you have a steeply pitched prop like ethics p4s or like a four degree pitch then i would set this to 20. but for my case i'm going to have it set to 25 just click enter and as far as for the rest of these that's pretty much how i leave it for all my builds all right so with that out of the way go ahead and head over to the black box tab make sure you erase any remaining storage you have so with that being done make sure you just select the right settings for your specific setup usually it's just onboard flash for logging device to have it minimum two kilohertz and then for the debug i don't think you need it but i just like to set it to gyro underscore scale that could help with the filtering we're gonna have to view later but save and reboot so now that you have your black box settings in go ahead and head back over to the pit tuning tab first of all you're going to turn off feet forward then you're going to turn off dynamic damping and then you're going to turn off your eye gains essentially you're just going to be finding the pd balance and in order to do that you want to take your dampening slider and just bring it down to 0.6 and essentially you're going to fly your quad line of sight for about 30 seconds to a minute land it and then bring this value up to 0.8 do the same exact thing and just go up essentially in the increments of 0.2 so next would be one 1.2 and then even as high as 1.4 and what you're going to do while you're flying line of sight is you're going to be moving your pitch and roll axis essentially like in circles like if you just follow my mouse just move your stick like this or just up and down like crazy or left to right like crazy all for about 30 seconds to a minute like i said before another thing to mention probably self-explanatory but make sure your quad is uh set up exactly how you fly it like if you fly with a gopro make sure the gopro is on if you fly if you tend to crash a lot you might want to put on damage props these ones are somewhat damaged i don't know how well the gopro can pick it up but yeah essentially however you fly it out like in the field or at the bando set it up to exactly how how you black box it and that's how you know you do your answer to your hop now that you have all those tests completed go ahead and plug your quad back in head over to black box and then activate mass storage device mode and what you're going to do is save all these files except for this beta flight underscore all once that's completed go ahead and unplug your quad and plug it back in head back over to beta fleet go over to black box and erase flash and you might as well just go ahead and minimize beta flight so now we're going to be working with pid toolbox so go ahead and open that up now that pid toolbox is open simply select the select button right here and locate your black box files in my case it'd be in stuff drone black box siren of five and i have two files another thing too a lot of uh youtubers or other people attuned say to unplug the battery between each flight but i don't do that and it works perfectly fine i know probably going to start some controversy in the comments let me know how wrong i am but i mean it works for me at the end of the day so as you can see this first log had two flights on it so i'm just gonna select them both and then these were the other two logs i did and this one right here this is where i had too high of d gains so that's why it's only six seconds and there's no point of selecting that after this all loads what you want to do is come over here to the step response tool highlight all of these and then click y correction and as you can see this is the data from uh this these values right here represent 0.6 this represents 0.8 1 and then 1.2 and based off of these lines it looks like 0.8 it is so now we head over we head back over into beta flight plug or quad in and 0.8 was my best result so put that there save all right so real quick i just wanted to explain how these lines should look ideally so right here is like a perfect example you want the line to slightly overshoot and then get back right on uh to this center point so this right here is actually perfect the lighter red value on the pitch axis though it's actually slightly under damped so with that being the case i'm actually going to head over to the pit to me and for pitch dampening i lowered it down to 0.95 because it's just very subtle yeah like it's almost perfect just slightly under damped you want it to look like this light red line if i just click reset run that like this just right onto there maybe a little overshoot yes this is perfect this is almost perfect all right next step we're going to be messing with the master multiplier now this might also start up some controversy but just hear me out on this if you are running a fast controlling such as express rs ghost or tracer as in you're running a high packet rate uh basically that creates a noisy signal so when you have a noisy signal you need to filter it out more so what i'm getting at is that if you are running one of those fast control links your master multiplier is going to be lower than someone who's running a slower control link such as crossfire like the dji transmitter so i have been able to get my quads up to 1.4 but i like to play it on the safe side so i'm guessing it's going to get up to like 1.3 or 1.2 um hopefully this doesn't come across as confusing but if you have a fast control link i would go up in increments of 0.1 if you have a slower controlling i would go up in increments of 0.2 so you might be asking what's the limit that i should take this slider to and honestly after every time you land i would feel the motors and once they start feeling just a little bit uh too hot that's probably a good place to stop or if you start hearing flutter obviously or if you start hearing a raining noise that would be a good place to stop and usually about the 1.6 area and above that's when those uh instances will occur that just all depends on your control link and how well your quad is built now that we're done logging those files i actually went up to 1.5 on the master multiplier before things started going haywire okay so now you're going to notice that the line is starting to get a little more swiggly this is completely fine this is what happens when you turn up pids everything gets more precise and any little imperfections really start to show don't be too worried all right so now that all these black box logs are loaded this is one point or this is where the master multiplier is at 1.1 1.2 1.3 1.4 and 1.5 over here is your latency your your pid latency and as you can see the more we moved up the master multiplier the less latency we had yours will probably vary usually it's like a curve that goes down steeply and then kind of levels out somewhere mine's still like a linear curve which is kind of ironic i've never seen that before but uh knowing based off of my experience i'm gonna leave the master multiplier at 1.4 so this green value right here let's just reset this and this is the one we're going to go with and now this is over damped but these values are actually looking good and i when we implement feet forward um and i term this should actually go back up so i'm not too worried all right so heading back over in the beta flight let's just move this down to 1.4 save now we're going to start implementing i term back again so i like to start this at 0.8 and just go up in increments of 0.1 so next would be 0.9 1 1.1 and 1.2 usually one as the default has always worked but just to be on the safe side just start lower and increase oh so interesting we have what this means right here is oscillation so what that means most likely is that my master multiplier is too high so i'm actually going to decrease this from 1.4 down to 1.3 save that okay so it's actually looking identical from 1 all the way up to 1.2 but honestly i'm just going to leave it at the default value the i term slider that should be good yeah the pitch looks absolutely beautiful um we just have some oscillations on the roll axis all right next we have feet forward now feet forward we're going to be tuning that not using pid toolbox but rather the black box explorer itself um i like to start this off at not dynamic david i like to start feet forward off at uh 0.6 and just go up in increments of 0.2 so 0.8 1 1.2 and 1.4 and another thing to mention about feet forward this is when you're gonna have to start doing flippy flops so if you've been flying in angle mode um you could do rapid stick movements that might be able to work but doing flips and rolls on both the pitch and roll access will be the best way to tune this all right now instead of opening up this file in pid toolbox we're just going to open it up in the regular black box explorer and if you don't have this chart what you want to do is go to graph setup and add in the access label gyro plus pid roll and then the access label gyro plus pid pitch you usually go here and then right here and right there so what we are looking for this is going to be the first log second log third fourth fifth let's go for one of these so essentially we're looking at this red line which is the p term we want this to be as flat as possible because we want the feet forward this purple line doing all the work so right here you can see the p term is actually pulling against uh the feet forward which is kind of surprising with the slider being so low i'll have to look at the other results but yes right here for example on the pitch you can see the p term is actually helping the feet forward that means that feet forward is too low so if we go to another example same here p term is helping like i said before you want this red line to be as flat as possible with this because feet forward needs to do all the work so it looks like in my case feet forward is best going to be left at one on the slider as you can see this is resisting or p term is resisting the feet forward but at the same time it actually catches up at the end i noticed on pitch this is actually as flat as i can get it other sliders were this is 1.2 and this is 1.4 on the feet forward slider these were like way too overdone um so yeah feet forward one it is now that we have feet forward out of the way the final step will be dynamic dampening and honestly i'm not too much of an expert on how to properly tune this but i basically just go off of how far i pushed the master multiplier for example i pushed it all the way up to 1.5 1.6 is where the quad started having issues and then i'll look at the d term here and be like all right this is 35 and 38 bring this back down to 1.3 and then push this up until these values match 35 and 38. so in my case it would be 0.45 now this is the point where you're going to want to go fly a full pack um preferably with the goggles on as you would normally push your quad to the limits get the get all the prop wash out test the anti-gravity by giving it throttle blips and make sure your black box is good to go have it set to gyro scaled so you can view your filtering and yeah that's basically it we covered everything and for this specific build this is the tune we ended up with just before i showed the flight footage i thought i would show you guys um the pid toolbox results at the end as you can see our latency is extremely low now that everything's implemented and these lines are pretty much almost perfect we could somewhat tweak this to make it even better but i'm happy with these results another thing too these are the black box logs keep in mind this is a two minute flight so the longer you fly the more noisy these graphs are going to look i just wanted to show you guys this just to show like how good of a frame quad mullet is like there's especially for being a two minute flight there's just barely any noise on these graphs and then heading over to pitch we'll do frequency versus throttle and the reason i have a throttle cap set to 96 just at my motor kb at 1750 instead of 1850. so yeah i really appreciate you for sticking to the end if you have any feedback or criticism uh let me know in the comments i'm very open to it this is just specifically how i tune it could be right it could be wrong everyone tunes different but hopefully you learned a few things and again thank you for watching and here's the flight oh eh WOOOOOOO WOOOOOOOboarding AST if thefunded has Meræ¬  that can