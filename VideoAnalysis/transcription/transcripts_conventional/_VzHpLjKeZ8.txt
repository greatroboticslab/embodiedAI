_VzHpLjKeZ8
https://www.youtube.com/watch?v=_VzHpLjKeZ8
Unknown Category
Hello everyone and welcome to another video. So today I'd like to introduce the idea of PID control. So today we're going to keep the discussion fairly brief and fairly high level because we're going to have several other dedicated videos which explore various aspects of PID controls in much greater detail. So this extended discussion is very well warranted because PID controllers are probably the most popular control scheme in history. So if you spend any amount of time working with controllers or looking at control systems you're almost guaranteed to run across at least one or two PID controllers throughout the course of your career. So for today I just want to get everyone comfortable with some of the core concepts surrounding PID control. So if that sounds like fun let's take a look at the board over here. Alright so to set the stage for PID control let's go back to our standard feedback control architecture that we've discussed in previous videos. So in this scheme just to refresh your memory right we've got some kind of plant here G and the idea is that this plant produces some kind of output and we would like this output to match some reference signal. If they don't match we're going to take their difference to create some kind of error signal and the controller is then going to look at this error signal and compute a control signal which is applied to the plant so that hopefully in closed loop this output signal Y will eventually match the input reference signal R. So again that's the grand scheme that's the very general idea of a simple sometimes referred to as an inner loop or a single loop controller right. So the whole game at this point is what does this controller look like right. Let's think about this what is probably the simplest thing that you can do here. Well the simplest thing you could do is you can probably just take this E and run it into a gain of some value let's call this gain K right. So something like this this is about the dumbest thing you could possibly do right. This is the simplest controller and in this case let's think about what is the control law. Alright so the control law basically says that the control signal at any given time it's just going to be here which is just nothing more than this gain K times the error. Okay so you can see that the control signal it's just the error multiplied by a number K. So you can say that the control signal is actually directly proportional to the error right. It's proportional by this gain factor K. So this is actually what's referred to as proportional control right. And this P here is actually the same P in the PID scheme. So this is pretty much the simplest scheme it's actually a P it's a type of PID controller is the simplest controller you could come up with right. It's nothing more than take the error multiply it by a static gain K to compute your control U. Okay so that's the simplest thing you can do and what PID control is and PID controllers is just extending on this. So instead of just having one term what if we had multiple terms like what what else could we potentially do. So the thing we could do is let's start adding on extra terms to our control law. So to distinguish this we're gonna have multiple gains. So I'm actually gonna call this KP. Okay and actually I'm gonna draw this in a slightly different fashion. I'm gonna move this up a little bit you're gonna see why we're doing this in a second. I'm gonna do it like this. Okay so you've got this KP. Okay really I haven't done anything fancy yet right. But now what we're gonna do is let's add on another term here. So the next term in my control law it's actually going to be again KI multiplied by the integral of the error D tau from times zero to time T. Okay so this term right here is sometimes referred to as an integral component right. And again this I here is this I in the PID scheme right. And then what we're gonna do is let's add on a third term which is going to be KD times the time rate of change of the error right. And this is sometimes referred to as a derivative right. And again the D here is this D in PID control. So we can see that PID control stands for proportional integral derivative because it basically has the control law being computed using three terms. So this term right here is the proportional part. Let's go ahead and maybe I'm gonna put this here in blue. Let's call this U proportional. Okay. Or sorry I'm gonna do this in green and then let's go ahead and put this I term here this entire I term here is gonna be U I. Okay and then finally this term down here is U D. Okay so we see that the control signal here is made up of three components so maybe let's actually draw this in a block diagram format because I I like to always see things in block diagram format. I mean this is an explicit control law right. You could go ahead and implement this in in a you know C++ or something like that but I like to think in terms of block diagram so let's translate this control law into a block diagram. So we already have this term right here right. You can see clearly that right here this signal here is U P right. It's the green part right. It's nothing more than K P times the error. Now we got to get this this blue part right. It's K I times the integral of the error. So what we need to do here is we need to integrate and I'm going to write 1 over s for the Laplace version of an integral. So this is an integrator right. So what this thing does is you give it E it just accumulates or integrates all the error that's coming in. So coming out of this is basically this term here integral of E tau D tau from 0 to time T right. That's what that integrator block does. It just does the the integration of the error signal. Now all I got to do is multiply this by again K I right. So now here's your K I right and then that goes into this summing block and right here we have the signal U I time T right. That's this signal right here. Okay and then lastly what we've got to do is take into account this term right. So what this term says is you need to compute the instantaneous time rate of change or the error dot right. So this is the derivative of the error at time T. So again let's go ahead and branch this off and I'm gonna go write it like this again. Let's just use the Laplace version of an integrator. So this is a an S and you can think about this block is just a different she a tour right whose sole job in life is you give it a signal it computes its time rate of change of that signal. So coming out here is E dot this term so I just need to now multiply it by K D. K D right and that goes into the summing block and now this signal here is our U D. Okay so this is what's great about a PID controller is that it is actually surprisingly simple that's all there is to it. It's just a controller where you have the error coming in and the error then gets sort of split into these three branches or these three terms and that's all you do right. You just take the error multiply by K P that gives you the proportional component of control. There's also an integral component of control which you get by basically integrating the error and then multiplying by K I or you can flip these around right from our block diagram algebra discussion to the fact that this is a linear system you can actually it doesn't matter if the K I comes before or after the integral right and then same thing for the derivative right you can basically switch this around it can be K D times S or S times K D it doesn't matter but at the end of the day you have this third branch here which is basically has something to do with the derivative of the error right so in a nutshell that's pretty much what this does right so computing it is really really simple okay now I'm gonna put in your mind right now just stick in the back your head that yes this seems simple but there are a lot of ways this can go pear-shaped and we're gonna talk about that in other dedicated videos but for the time being let's assume everything is hunky-dory and we're gonna go ahead and maybe let's examine each one of these terms this UP UI and UD or the proportional control the integral control and the derivative control portions in isolation by themselves just so we can get a better feel for what they what they do and how they behave all right so to get a better feel for what each of these terms do why don't we start with just the proportional control and what we can do is let's consider it by itself so in other words let's see if we can ignore the integrator so I'm gonna have a little sticker here that says just ignore that and let's also ignore the the derivative component so the only thing we've got is this proportional control right and look again we said earlier at the beginning of the discussion that this is probably the simplest controller you can have so let's see if we can understand how it behaves and just some general characteristics about it right okay so what I've done here is let's just look at since we're only caring about the controller let's look at the error signal going in and what the control signal coming out might be and again the control signal is just UP right it's only that's the only component so I'm gonna draw the error in purple and let's go ahead and say that everything is fine everything is fine and we have zero steady state error or excuse me zero error and then at some point we introduce some error so that what what that could mean is that suddenly you know everything is fine the output is actually matching the reference and then at some point we maybe have a step input of magnitude a at some time and that will create a jump in the reference signal the plant can't respond instantaneously right so this signal Y is still going to be at the old value so when you introduce this step there's going to be a step in the error right of also of magnitude a so what the error signal is going to do is it's going to jump up to a okay and I'm going to just label all of these about and I'm going to put a little dash the lines we can see this kind of event horizon okay and this is now going to jump up to a value of a okay so let's now go ahead and draw in green what is the the proportional control signal going to do so again we can see very easily what it's going to do in this window right because there's zero error right there's going to be zero control right because that's how this works the control is just the error multiplied by kp so I don't care what number kp you have if e is zero this is going to be zero so the control signal is just zero zero zero zero zero zero until this event horizon again and now this is now going to instantaneously jump up to a value now of what this value is going to be a times kp right so this is what's actually kind of nice about a proportional controller is a proportional controller is going to respond instantaneously right this gain is just a multiplication that happens right away there are no dynamics associated with it so proportional controller is going to kind of freak out a little bit right it's going to realize there's a large error and it's going to then apply a large control signal right and hopefully you've got this control signal set up in in the correct orientation in the sense that this positive number of a kp it's going to start pushing this signal y to start matching this signal are so what the error is probably going to do is it's going to probably start coming down right would you agree right as the plant starts to respond it's going to start coming down now what is the control signal going to do again the nice thing about this is to get the green line we just multiply the purple line by a gain kp so this is going to basically mirror it like that right so this is where it gets interesting though if you think about this long enough eventually this error is going to keep going down hopefully you're getting closer and closer and closer and now what's going on is at the same time the control signal is is getting smaller and smaller and smaller right at some point for real systems what might end up happening is you might get stuck and there might be some steady state error and the reason this occurs right is if you think about this what's going on is as the error starts going down so does the control signal right the control signal also starts going down so the control starts getting weaker and weaker and weaker so you're applying less and less control to the off to the plant so if you think about like what if your system is a mass on some surface right and you're sitting here at the location Y and now you want to move over here to a location R right there's a step input of magnitude A right so you are going to start applying some proportional control to this guy right and initially when the error is large this signal is large so you're pushing the block hard the block is going to start moving over and maybe it's going to get to over here right at this point here's your Y here's your R the error is now much smaller right so the force on the block is going to be much smaller do you see how like maybe if there are nonlinear effects like friction right friction might grab the block and at some point the control signal is going to be too weak to overcome friction and the block is going to stop and it's not going to move anymore so the problem that you may see with proportional controllers is that at some point they become basically the control signal becomes too weak to drive this steady state error to zero right but it's actually quite simple though the reason why the proportional control it's easy to understand what's going on we get a good feel for what it's doing all it's doing is it's exerting a control which is directly proportional to the amount of error right but one of the drawbacks of this is that in many situations a proportional control by itself is subject to this this steady state error which leads us to the next component okay so let's modify our little diagram here and now instead let's ignore kp and kd and just look at an integral term like let's pretend like you decided to make a controller which just has an integrator so let's look at this integral control component and see what happens so again we've got error on the top and now let's ask ourselves what is the integrator going to do right now remember all this integrator does this integral control component it's given by this equation right here right all you have to do is integrate the error and then multiply by some number kp okay so let's take a look at this again um okay again the error is zero and then suddenly you give it some kind of input right or some step in reference to generate some step in error okay so again let's ask ourselves what is the integrator going to be doing here so again down here the integrator is doing nothing zero zero zero zero zero zero zero zero zero zero zero right until some action happens here when we introduce this this error step something happens now we got to ask ourselves what is that something okay so the way i like to think about this is let's go ahead and look at a little time here okay after this step gets introduced okay let's say that the error signal does something like that okay now we got to think about this okay now we got to think about this okay now we got to ask ourselves what is the control signal at this time well the way you get that control signal at this time t is apparently you integrate the error so let's just focus on this integral term where is this integral term in this picture well again the integral of the error signal it's just the area under the curve of the e of t right so in other words it's this area under here right this amount of area this amount of area is what this integral term is it's how much the error the integrator has accumulated right so that is this area multiplied by the number ki that's going to tell you what the output of your system of the integral of the integral control component is at this time and as you can see because there hasn't been a large time this area is small right sure it might have a large So this area is kind of small. You multiply it by some Ki, you probably get some small numbers. So it's probably something like this, right? So the integrator is going to do something like this. Does everyone see what's going on, right? Now all we got to do is just march along a little bit further in time, right, and ask ourselves the same question, right? So again, maybe the error signal is doing this, right? So now the total area is this. So the total area is now bigger, right? So the integrator keeps pushing harder, right? And et cetera, et cetera. You can see what this is going to be doing is it's going to keep going. And let's say that this thing goes down to here. Let's say it does this. At this point, the area looks like that, right? And we can trace this exact same point down. And we're going to see what's interesting is at this time T, the integrator has accumulated all of this green area. So it's actually quite large at this point, right? And here's the rub with integrators by themselves. And this is one of the reasons why you usually never see an integrator by itself. Think about what's happening right here. Here, everything is fine, right? This is what you want, right? You want error to be zero. So at this point, you want to just say stop, right? If your controller was intelligent, you'd be like, okay, stop doing whatever you're doing. The system is where it needs to be. Let's quit, right? But think about what the integrator is doing right here. The integrator has accumulated all of this green area. So actually, it is still pushing. In fact, it is pushing. It's applying as much control as it ever is going to be doing. It's built up some, almost like some momentum, right? It's almost got some mass. And this integrator has got some momentum. And it's going along. And actually, what's going to happen is it's going to keep pushing on the system, right? It's going to keep applying control. So the system error, it's probably going to overshoot, right? The block is going to go, you know, if this was our mass spring system, it's going to start going down, right? It's going to overshoot the system. And now what you've got is you actually have negative area here, right? So again, if you think about this, what's going to happen is the error sign changes. It becomes negative at this point, right? So now that integral in the red component is negative area. The green is positive area. So maybe let's just label it. So this is sort of positive area that the integrator has accumulated. This red is negative area, right? So what's the net between the green and the red? There's still much more green than there is red. So this signal, it's going to start coming down, but it's still positive, right? So do you see what's going on? You overshot where you wanted to be, but the integrator is still pushing in that same direction, right? It's not pushing as hard as it used to, but it's still pushing in that same direction. So this is probably going to get worse before it gets better, right? Because at some point, you're going to have to accumulate a net difference between the positive and negative area such that you get something like this, right? What's going to end up happening is that eventually this thing is going to get you zero steady state error. And that's what's actually the nice benefit of this integral control is that eventually, and I should make sure I draw this accurately, right? Eventually, what you're going to end up with is zero steady state error. Okay? And what's going to end up happening is that the control needed to achieve that zero steady state error is going to be output by the integrator and the integrator alone. And again, we are going to explore that statement further in future lectures, future discussions. But I just want to state that right now. Now, the thing to take away from this is that the integrator is going to eliminate steady state error. The integrator will not allow your system to have steady state error, okay? And it does so through this sort of exchange of positive area and negative area when you're integrating the error signal, right? And again, this is one of the reasons why often this is coupled with other components, the proportional and the derivative, to try to get rid of some of these oscillations because this is probably not great. Now, I do want to dwell a little bit further on this idea of this claim that we made here that you're going to have zero steady state error, right? The way you can actually kind of think about it and prove that to yourself is almost sort of in a paradoxical sense, right? What I mean by that is let's draw a quick picture, maybe a smaller picture of error versus time, like a smaller version of this picture up here because it's really quite simple, the idea. Let's say that this thing is doing whatever, right? And let's say you have steady state error, okay? Let's assume that somehow you have a non-zero steady state error, okay? What is the integrator going to do in this situation, right? What does the UI component look like? Well, according to our discussion above, right, all we're doing is we are integrating the area under the curve, right? So what the integrator is going to do, I think we're drawing it in blue, is it's going to do something like this and then it's going to start integrating error, right? So this thing is increasing. In fact, this is all monotonically increasing because I only have green positive area. So this thing is going up, right? Going up, going up, going up, going up, going up, going up. Now, think about this, right? And if you have a non-zero steady state error, what that means is the area under the curve is going to become unbounded, right? It's going to go to infinity. Therefore, your control signal is also going to go to infinity. So there is something really wrong with your system. If you have an integrator in it and it keeps pushing harder and harder and harder and harder and exerting more and more control authority, eventually it has to be able to move the system towards the reference signal, right? If it's not, you've broken something, right? Something else is going wrong. But mathematically speaking, it should not be allowed to do that, right? Because of this pair. This is a paradox right here, right? You cannot have non-zero steady state error because that would lead to an unbounded infinite control signal, which is sort of a catch-22 because if this control signal became large enough, it has to be able to eventually move this signal Y towards the reference, right? So this is one way you can kind of prove to yourself that the whole reason of adding an integrator is to get rid of steady state error. It does create some complications like you're seeing here. And again, we are going to dig into some of the complications and problems of things that can go wrong with an integrator in a lot greater detail in a future video. But I just want to throw this out here now just to kind of put it on your radar so people can start thinking about this idea here. Okay, great. So that's the integrator. Give me a second to clean up the board and let's look at the last term. All right, so the last term we want to look at is let's look at the derivative term. So we'll kind of ignore the proportional in the integral. And again, I'm going to say kind of because you're going to see in a second that the derivative control really cannot operate by itself. That doesn't really make a lot of sense. So maybe let me kind of halfway put the ignore on these. Let's assume that there are other components that maybe drive the error signal. But mostly I want to talk about what does this UD look like. So let's just look at the derivative control portion and what does the UD signal look like. Okay. So again, same idea. Let's assume everything is hunky-dory until this time when we introduce some step in R, which generates a step in the error signal. Okay. So again, let's ask ourselves, what is the derivative doing? So again, the derivative is looking at basically the slope of the error plot. Right. And then it's multiplying it by KD. So you look at this slope here and you're like, oh, that's easy. That's a big fat zero. So again, it doesn't matter what your KD number is, your derivative gain. This is going to be zero. Okay. Now, at this point here when we introduce this step, you actually see that we have a little bit of a discontinuity. Right. Because the slope here is infinite. Right. It just jumped from zero to something not zero instantaneously. So actually the derivative control is going to be enormous. You're going to get some spike here. Right. You're going to get a giant number. Okay. And now what's going to happen is this is why, again, the derivative maybe doesn't work by itself. Maybe the proportional control, the integral control, something starts driving the error down. Right. This thing starts going down towards the reference point. Okay. So now what we can start asking is I can start looking at the slope here. So the slope here is kind of, you know, something. Right. And it's small. So let's just say that this is, I don't know, maybe this thing comes down. Down nicely down to here or something like that. Maybe your KD is negative. So that even though this is a negative slope, by the time you multiply by a negative KD, you get a positive UD. All right. So again, the sign doesn't really matter. I'm more interested in the concepts. Right. So the idea is, okay, that's like that. And then you see here the slope is a little bit steeper. So now it's a little bit more. And then it's even steeper. So you get even more. So I think everyone gets the idea. Right. What's happening is that this derivative signal is basically looking at the slope of the error to basically compute what it's going to do. Right. So again, I'm not a great artist, but I think it's going to, you know, something like this. Okay. Okay. So again, the other thing that is maybe interesting to mention here is that at steady state. Right. So here is where we have sort of steady state behavior. So maybe there's zero steady state error. Maybe there's non-zero steady state error. I don't really care. All I care is that it's at steady state. And what that means, right, is that steady state, what's the slope here? The slope is zero. Right. So at steady state behavior, the derivative is zero. Right. So interesting. Right. At steady state, the derivative does nothing. Right. So the derivative is really this D term. This control comes into play only when the system has dynamics. Right. When the error signal is changing, that's when this thing actually kicks in and contributes something to your overall control signal. Right. Now, again, you couple that with the fact, as we talked about earlier, that if you had zero steady state error, let's draw maybe an alternate signal, maybe as like dashed. Right. Right. And again, the derivative would look pretty darn close here. So again, this is maybe a nice part to maybe mention. You have steady state behavior and you have zero steady state error. Right. This is the picture you want. Right. We want whatever control scheme to do. We want the error signal to eventually settle out to zero. OK. Now, think about this. If this is zero. Right. The slope of this is flat. So the derivative controller is doing nothing. Right. So this here is basically zero. I mean, it is zero. Right. So this is zero. And now let me take away these ignore things. Because now really we can start talking about all of these together. Because that's what a PID controller is. It's when you've got interplay between all three of these components. Right. And we already talked about the UP idea. Right. The proportional part, it's just the error multiplied by KP. Well, if you have zero steady state error, you have zero error. So therefore, this is actually also zero. Right. So again, this supports what I kind of briefly waved my hands on very quickly earlier. is that in a good situation where everything is, where things are behaving the way you want it to when you have this picture, the integrator is the only thing that is non-zero. Right. It is the only thing that is contributing to your controller or to your control signal in this configuration. So again, this is just, there's a lot more discussion to be had. But I just wanted to kind of give everyone some core ideas and get a rough feeling of how all these little terms contribute, what they do, what they feel like. And now the game is considering all of them simultaneously. So to maybe get a little bit more intuitive feel for what these are, let me actually, let's jump outside. And I've got a little demo that we can look at with a physical system to see how these all interplay. All right. So I've got a little experimental setup here. And what we'd like to do is think about, I've got this little weight here and you can see, it might be a little hard to see on the camera, but I 3D printed this little green piece of plastic. That's going to be our variable of interest. That's our position Y. So let's track the position Y of this green disc on this weight. Okay. So now what I'd like to do is, you know, let's just sit this down. Okay. So the weight is just hanging around here and the position Y is just, you know, down here at the floor right now. And again, if the reference position of where I'm trying to track is also down here at the floor, everything is fine, right? There's zero error, right? Now, what makes this interesting is, okay, if this is all fine, what if we go ahead and change this reference position? So what if I want the reference position now to be, oh, I don't know, something up here maybe, right? So now you can very clearly see there is a difference between R and Y. So we have a non-zero error. And now that's the job of the controller. So we need the PID controller to try to fix this error and make this error go to zero. So now, right now you can see we have, there's no control. The control in this case is going to be a force that we're going to apply on this mass to try to move it to this position R. So right now there's nothing, right? There's no control input. So let's again start simple. Let's start with the proportional component. So remember, the proportional component of the controller, it's going to be a control signal which is directly proportional to this error, right? And if the error grows, then the force or the control on this is going to grow. So now you got to think, is there some kind of thing that we can apply to this mass whose force is proportional to this distance? That's exactly what a spring is, right? Or a spring or maybe like a rubber band or something like that, right? So maybe what I'm going to do is I'm going to hook up this rubber band. And I've measured this in such a way that, again, we need this to be, when this rubber band is not elongated, right? When it is, when it is, yeah, basically not elongated, right? There's no force by the rubber band. So this is perfect, right? So when there's zero error, there's going to be zero force from this rubber band. And now we should be able to let this thing go and see how does this proportional controller work, right? Because right now, if the position Y is right here at R, there's no force on the rubber band. But the problem is, as you can kind of see, is that that's actually not the case, right? Right? So this thing, it's doing better than it was before, right? It used to be all the way down on the floor. But now this proportional controller is able to move the position Y to about, you know, something like that. So we see there is steady state error in this case. So it's trying to bring it up to this R. But the fact that you actually need some finite error in order to have a finite control is what makes this problem with a proportional controller a little bit, it's not going to solve the entire problem, right? Now, you might ask, is there something better I can do? How can I decrease this error, right? We talked about that. Well, that just means your first try might be to do something like just go ahead and increase the gain on your proportional controller. So in this case, what's the gain of the proportional controller? What's the physical equivalent? It's basically the spring constant, right? If we increase the spring constant, we should increase the gain and therefore the behavior should change. So I've got a stiffer rubber band here. Let's do the same thing. Let's go ahead and add now our stiffer spring and see if that changes anything. Okay. So again, now, aha. Now look at this, right? So again, we still don't make it all the way up to R, but we have reduced the amount of steady state error. But again, the problem with the proportional controller is again, no matter how stiff you make this spring, in other words, no matter how big you make that gain KP, you are not going to get zero steady state error, right? That's the whole issue. Now, what we talked about on the board is, all right, so if that's the problem with a proportional controller, maybe what we're going to do is start adding an integrator, right? So now what I need is to add some type of control to this system where the control component, right, the UI, it's somehow related to the integral of the error. Because right now, with just a proportional controller, right, we can be sitting here at steady state error like this forever and nothing is ever going to change, right? That's what the integrator is going to do. So I'm going to go ahead and add this pink string. This pink string is supposed to represent the integral component of control. And right now it's slack. You can see the integrator is doing nothing because we're going to pretend we start our experiment right now. And now the integrator starts seeing there's some non-zero error, right? So it's going to start integrating it. So this string is going to start, whoops, hold on, it's stuck. This integrator component of the force, it's going to add on top of the proportional part, but it's going to start pulling harder and harder and harder. So I'm going to have to play the part of the integrator and I'm going to have to integrate the area under this error curve. And I'm going to have to start pulling and pulling and pulling. And as I see that the error is still non-zero, right, I'm going to keep pulling harder and harder and harder until eventually it hits here. But I've wound up so much error in my integrator that it might overshoot a little bit. And then it might come down and oscillate and whatnot. But at some point, right, the pink string, which is the integrator component, you can see brings the actual position of the weight up to R. So now R and Y are the same thing and there's zero error. And what we said earlier is because there is zero error, right, this rubber band, the spring or the proportional component is doing nothing, right? The pink string is taking up all of the force, is generating all of the control, right? So this is kind of interesting. So there you go. Here's a physical demonstration of a PI controller. Why don't we add the last component? Let's go all the way to maybe PID. And for giggles, let me go back to the weaker spring because this one is actually more interesting. So let's go back here. If I can hook all this back up, okay. All right. Okay. So now we're back here, right? Here's our P only controller. Again, we've got some error now. Let's go ahead and make a mark where that is. Okay. Again, we're trying to get up to this reference. And now, you know, we made the claim earlier that this is a P controller only, right? Because right now there's only a force which is directly proportional to this distance, right? Actually, if you think about this long enough, this is actually a P and a very weak D controller right now because there is a force that is acting on this weight which is proportional to its velocity, right? That's because we're sitting in a fluid, right? We're sitting in air. So there is some air resistance, right? That the faster you try to go through the air, the more force it's going to put onto it. Of course, that magnitude is negligible, right? Because the air is not very viscous. There's not a lot of aerodynamic drag in this regime. Okay. But what if we increase that? So for example, let me put this inside maybe this little graduated cylinder we've got here. Okay. Okay. Okay. Let me scoot this over just a little skosh just to make this line up a little bit more nicely. Okay. Okay. So I want to add now or I guess to be technically correct, I want to increase the derivative component of the PID controller, right? So what I need is I need to increase the amount of force that is applied to this which is proportional to its velocity. So if air is not a very good viscous fluid, why don't we try something a little bit more viscous? Like what about water? So if I pour water in here, right? Now what we have is I have basically increased the D component of this controller, right? Because now you see how much more damped out it is, right? You see how this thing does not bounce around or oscillate as much, right? Because there is now a lot more force. It's much harder for that weight to move through the fluid quickly, right? But what's interesting also is look at this. Like we said earlier, at steady state, the derivative is doing nothing, right? The velocity is zero, right? Error dot is zero. So the velocity is zero. So, right, the derivative component actually isn't playing that much of a role in this situation, right? So again, just to maybe compare and contrast, let me oscillate this a few times. And you can kind of see that when we increase the damping ratio or excuse me, increase the D component of the PID controller, you see there's a lot less oscillations, right? And again, just to compare and contrast, that is like what it is with water. Let's go ahead and pour this out. And again, now you can kind of see with air, whoops, right? There's a lot more, I guess it's kind of sticking now. Okay, this isn't quite the way I envisioned it, but you get the idea, right? And we can even go even further, right? What if I want something even more viscous? What about like honey, right? If I pour honey into here, this is going to really increase the D component of this controller, actually probably to the point of it being a little bit ridiculous. So give me a second to fill this up. I'm just kind of curious to see if this is going to work. Okay, let's try that. Boy, oh boy. Okay, so now we have really messed it up. The D component is way too high. So you can see the thing does not want to move, but it is moving, right? If we let this thing sit long enough, right? That D component of the control is not going to affect it, right? Because the velocity is going to be zero, so there's going to be no force on it. So all of that should work out. And again, I guess in the interest of completeness, let's talk about the full thing now. So we've got the proportional. We've got the derivative, right? Which is this viscous fluid. Now let's add the integrator back into this picture. Again, my integrator is this pink string. And again, we can play this game. So now this is sort of a, you can think of as a physical manifestation of this full PID controller. So now, you know, it has moved around and now I'm going to start pulling on this integrator. I'm going to start integrating this non-zero error and I'm going to start bringing this up to where it wants to be, right? So now the integrator is doing the work. The integrator is doing the work. The integrator is doing the work until we come up to around here, right? And now again, you can see here at this point, even with the full PID controller, right? At steady state, when everything is where it wants to be, it's the pink string, which is taking all of the work, right? All the control authority is coming from the pink string. The rubber band slash spring, which is the proportional component, is doing nothing. And the derivative component, which is basically the viscous fluid, is doing nothing, right? So that's my demo. Hopefully this gives a little bit of an intuitive feel for what this PID controller is doing, right? You can almost think about it as a proportional component is adding some amount of springiness to your system. Sometimes people refer to this as, you know, the proportional part is interested in the present. It cares about what's happening right now. It cares about what is the amount of error right now in the present moment and it acts upon that, right? Then we saw the integral, right? This pink string is, it kind of thinks about it like, it cares about the past error, right? It integrates all of the error that has occurred in the past and that's how you compute your current control signal. So the integral sort of thinks about the past. And from this analogy, you can also see that, I guess, the integral, you can kind of think about it as like adding inertia to your system, right? Because the integrator winds up all of this state error and it has a tendency to overshoot. It's like this idea of momentum of inertia or inertia of your system, right? And then finally we saw the D component or the derivative component, right? And that is almost thinking about, you can kind of, again, think about like thinking about the future, right? It thinks about, looks at time rates of change to kind of help predict where the system is going to go. So you can see the PID controller is sort of looking at the present, the past and the future all at the same time in kind of a loose hand wavy sense. And then lastly, the last analogy to maybe draw is that, again, we saw the derivative component is sort of related to, you can think about it as adding damping to your system, right? So there's a couple of ways you can think about this. You can think about the PID controller as basically a past, present, or sorry, present, past, future kind of system. Or you can think of it as like adding a spring, mass, and damper to your system. So there's a lot of nice kind of parallel analogies. But again, I think the rigorous way to look at it is mathematically, as we saw earlier on the board. I hope this demonstration just gives a little bit of a physical intuition of what all these components are doing. All right. So now hopefully you've got a good intuitive feel for what all of these terms do. So maybe it might be helpful to just make a little quick table. This is sort of some rules of thumb about how adjusting these parameters are going to affect different parts of your system. So if you adjust KP, let's ask about how does that affect things like the rise time, overshoot, settling time, steady state error, and the stability. And again, keep in mind, these are real loose generalizations, shooting from the hip kind of ideas. Don't take any of these for gospel. We will do the actual analysis down the road in other discussions so we can make quantitative and qualitative statements. But for now, let's just look at these general ideas. So again, what we're talking about here is if you make KP bigger, and again, maybe this is maybe really if you make the absolute value of these terms larger, right? As these sort of increase, basically you're talking about making these components more aggressive. What does that do to all these parameters? So we saw that KP, right? This is really like, it's kind of like you can think about as adding like a spring, right? A stiffer spring to your system, right? So what this does for rise time is this is going to generally try to, it's going to decrease your rise time, right? You're going to get there faster. The consequence of this is usually this is going to make your oscillations or your overshoot go up. Settling time, this is really a small change. It doesn't have much effect here, okay? Steady state error, we saw that this is going to decrease your steady state error, right? But you're still going to have steady state error with a proportional only. And instability, the problem with this is it sort of decreases your stability, right? It degrades your stability. It makes you more likely to have issues and become unstable, okay? Let's talk about the integrator. As you make the integrator magnitude larger, how does this affect it, okay? So your rise time, this tends to go down. Your overshoot, we saw the, you know, the integrator is one source of major overshoot in this case. So this goes up. Settling time, this also tends to go up, okay? Now the nice thing about the integrator though is steady state error, this really, you know, it eliminates it, right? That's the whole point of the integrator. So let's just write eliminate here, okay? And in terms of stability though, the price you pay for this is, again, you add the integrator, you add some dynamics, and you're more likely to make this overall system unstable, okay? So you got to be careful with that, right? Okay, let's talk about the derivative, okay? So the derivative, again, this doesn't really do much to the rise time. So it's not going to matter a ton, right? What it does do, right? We saw that the derivative, it's like adding a damper to your system. So actually this decreases your overshoot, right? It makes it like you're sitting there in honey and it's making it slower, so it's less likely to overshoot. Okay, settling time, this also, if you increase KD, it usually makes your settling time a little bit less because your oscillations go down. Now, and we saw steady state error. This is really no effect in theory. There are, we're going to see when we start looking at this from designing, from a root locus perspective or other techniques, that this does sort of affect it. But really, right, we saw that at steady state, the derivative really is not playing a role, okay? And this is also, the stability is, I don't know if I want to draw any hard conclusions here. Let's just say that maybe this might improve stability if KD is small. So it's, again, it's one of these things, everything in moderation. You don't want to go overboard because you definitely can drive things unstable with the large KD. But if you keep them small, it's usually pretty reasonable. So, again, these are some rules of thumb about how to tune these gains, again, right? Because the whole game with the PID controller, we said it's incredibly versatile. It's used all over the place. The only thing you've got to really do is pick these three numbers, KP, KI, and KD. And this will hopefully get you a little bit of the way there. But hopefully there are, you know, there are warning bells going off in the back of your head that says, I don't want to design an engineered system based on a rule of thumb table, right? But this gives us some intuitive feel. Well, what we instead want to do in some of our future discussions is look at mathematically rigorous ways to synthesize a PID controller, a.k.a. pick those gains, using things like root locus or other techniques. So that hopefully sets the stage. I think this is probably a good spot to leave it. And like I said, we're going to have a ton of future other videos looking at a lot of topics in PID. So please stay tuned. So I hope you enjoyed the video. If so, I also hope you'll consider subscribing to the channel. It really does help me continue making these videos. If you scroll a little ways down and click on that subscribe button. Also, remember the new videos come out every Monday. So I hope I'll be able to catch you at a future discussion and we can all learn something new together. So until next time, I think I'll sign off. Talk to you later. Bye.