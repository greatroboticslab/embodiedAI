P4GsoMTv-SY
https://www.youtube.com/watch?v=P4GsoMTv-SY
Unknown Category
Greetings everyone and welcome back to the bench. In this video I want to build a little amp using the ubiquitous LM386. You know on this channel I do a lot of amplifiers, mainly playing with higher power amplifiers, but I understand that there are people that are just starting out that might want to build a simpler amplifier, or somebody might just need a lower power amplifier and the LM386 will fill the need. Well instead of just building an ordinary LM386 amplifier, I want to do some things that will make the amplifier perform as best as it can. So in this video I will give you a layout and show you what I'm doing to make the chip perform at its peak performance. Also give you some tips. I'll show you the layout, give you the parts list, actually build the amplifier, and then we'll hook it up and do the usual music test and the power test and distortion and all that good stuff on the oscilloscope. So without further ado, let's get started. Okay here's the schematic that I've come up with and I'll go through the changes that I made as compared to some of the samples on the data sheet. And I'll also talk about some other things that I would recommend for getting the best out of this chip amp. First thing that I did is add a coupling capacitor on the input, and with this chip you don't really have to due to its ground referenced input, but it's very good to do so anyway. If you connect a signal source that has a DC offset, well that'll pass through into the amplifier and get amplified and come out the output. Well there is a DC blocking capacitor that will block it from reaching the speaker. However, that DC offset will affect the output swing. It will shift it to one side, and it will clip early causing you to lose maximum power. In other words, it'll clip before it can reach maximum possible power. The next thing I did is add a capacitor across the input, and that's this 47 picofarate here. The reason for doing that, it acts as a low pass filter keeping high frequencies out of the amplifier. Usually see this used with a resistor as well, but I'm not including it here. It's, I don't think it's really necessary. It'll do the job in the situation where you're connecting a high impedance source, and the amplifier's output can couple back to the input and cause oscillation. So having that there along with good shielding should prevent any of that feedback type oscillation. You'll see this on hi-fi amplifiers as well. It's just really good practice to have that there. And the third thing I'm doing is instead of shorting the inverting input to ground, I'm connecting it to ground through this capacitor. And here is the reason for doing that. This schematic here is what's internal to the chip. It's what they call the equivalent internal schematic. All this circuitry here is part of the input stage. You have your inverting input and non-inverting input. And you can see from the bases of those input transistors to ground is a 50 kilo ohm resistor. The reason that's there is for biasing. For if that resistor wasn't there, there's nowhere for this current to go from the base of the transistor. Now you need some current flowing out of the base of this transistor in this case for them to be biased. And without that the input section would not turn on. You'd have to have external resistors. The reason they put it internal is just less parts that you would have to use externally. So the problem is when, for example, connecting the inverting input to ground, you're bypassing this resistor. And now you're changing the current slightly that flows here, the bias current. And you know it's different on this side. So now you're causing an imbalance. Well that imbalance will shift the output. And it might clip a little bit earlier on one of the peaks of the sine wave. And that'll cause you not to get as much power as possible. It's not a big difference, but anything helps with these small low power chip amps. Okay, for a few other tips for using this chip amp. Well, you might know that pins 1 or 8 are set to allow you to connect an external capacitor or a series resistor and capacitor to adjust the gain of the amplifier. And I'm showing a 10 microfarad capacitor in dotted lines. They do that on the data sheet as well. Well, it's very important to set up an amplifier only to have as much gain as needed and no more. If you set this amplifier up with high gain when you don't need it, you're just going to end up with a lot more noise, background hiss, and also you can have more distortion. So if you're using this amplifier with a line level signal or like a music player headphone out jack, the amplifier has enough gain that you don't need to add an external circuit to pins 1 and 8. On the other hand, if you're amplifying a musical instrument such as a guitar, you might make a little practice amp with this. It might be a good idea to add some components to pin 1 and 8. For the maximum gain, you can add a 10 microfarad capacitor or if you don't need as much gain, add a 1 kilo ohm resistor in series with a capacitor on pins 1 and 8 and you'll kind of get a moderate gain. And the data sheet will explain all that if you want to reference that. As far as the output coupling capacitor value, I'm using 470 ohms. Some people say, oh, that's not big enough. You won't get as much bass. Well, you know, it's an LM386 amplifier. The speakers you connect it to are probably not going to do that well with bass anyway, so it doesn't make sense to use such a large value. Though, you know, if you want to, you can, if you're making a guitar practice amp, you can even use a lower value like a 220 or a 330 because you don't need to go real deep with the bass for guitar use. I'm using a 0.27 across the supply rails capacitor. I've tested it also including a larger value electrolytic and it doesn't make any difference. But instead of using a 0.1, I'm using a 0.27. Okay, this amplifier, you can run it between 5 and 9 volts. I'd recommend 9 volts to get as much power out of it as you can. But you can really only use this chip with 8 ohm loads. It just doesn't work very well with 4 ohm loads. And let me show you why. Well, here is a graph showing the output's voltage swing versus the supply voltage. This is a peak to peak. Well, as the supply voltage increases, you want to see this line on the graph steadily increase like these two. And this is with no load. They're showing infinity here. It just means no load connected to the output. This is with 16 ohms. And you can see how they follow pretty close, which is very good. With 8 ohm loads, it's decent up to about this point, up to around 9 volts. And then it pretty much gets flattened. It gets horizontal here. So after a certain point, the amplifier really can't deliver any more current. And the output voltage swing flattens out, which means your output power also flattens out. So you're fine up until 9 volts with 8 ohm loads. Because if you increase the supply voltage, you see it doesn't really increase that much, you know, very little. What happens is the chip just gets hotter and hotter without delivering extra power. Well, here's the 4 ohm curve. It's pretty pathetic, really. You know, it's only slightly curved here, and then it's pretty flat the top half of the supply voltage range. And because the voltage swing is so much less, you're not really getting any more power than you would with an 8 ohm load. So it doesn't make sense to use a 4 ohm load. The chip's just going to run really hot. It's not going to deliver any extra power. So what do you do if you have a 4 ohm speaker? Let's say you don't have a choice. The only extra speaker you have is a 4 ohm speaker. Well, you could add a resistor in series with that. For example, just add a 4 ohm resistor in series with the speaker. So the amplifier will see roughly an 8 ohm load. You can actually use a 3 or 3.3 ohm. It's probably a common value. That would still be safe. So that's what I would recommend in that case. So here's the layout I've come up with. I like to use this graph paper. The line spacing is 0.1 inch or 2.54 millimeters, which is the standard hole spacing on perf board. So it allows me to lay these circuits out in real life scale or 1 to 1 scale. So what you're seeing here is the top view. You're looking down on the component side, looking through the board to the traces. And the reason I do that is because it's a lot easier for me to lay out the board looking down this way because I'm more familiar with the pin outs and the layout that way. So if you want to screen grab this, you can mirror it in an imaging program if you want to work from the bottom of the board the solder side so to speak of the perf board. So what I've done here is I tried to make the layout as good as possible. I'm using star ground. Each part of the circuit has its own return path back to ground. So there's no currents flowing in each other's path which can cause distortion and potentially even oscillation. So you know it's a nice compact layout. You know some of these grounds kind of shield around the input. The output higher current parts of the circuit are kept over here away from the small signal part of the circuit. So yeah, I think it's a decent layout should do the trick. In my circuit I'm not going to use this capacitor here that's connected from pin 1 to 8 because I don't need the extra gain. So this one will be omitted from the circuit that I come up with. Here is the parts list. Just pause and screen grab if you want this. And another little tip for you if you want to put this in a box and use a potentiometer. For line level type use I would use a 10k audio taper type potentiometer. And this little drawing I have here shows a potentiometer with the control shaft facing out or this way from the paper. And in that configuration your input signal would go into the leftmost pin. The audio amplifier's input would go into the middle wiper arm and the rightmost connection would be the amplifier circuit ground. And if you're using a plastic enclosure I would recommend also running a ground to the casing, the metal casing of the potentiometer. So that'll help eliminate noise by shielding the input a little better. Now if you're going to make a little practice amp for guitar I would use a higher impedance potentiometer. I'd use a 100k linear type potentiometer. So why would I choose a linear type potentiometer? Well you have to remember those resistors internal to the amp, the 50k resistors. What happens is with the linear pot working with that resistor as you adjust it it actually gives you kind of a logarithmic type curve as you turn the amplifier up. The only problem is though I know some people like to use a higher impedance pot for guitars. Well if you go too high that resistor will overcompensate and make the sound really quiet until you turn the potentiometer up to almost full and then suddenly gets loud. So that's the reason for that. Okay enough of this I'm going to build out the board and I'll come back and do some tests. You know the usual music test and then we'll hook it up and check the power and I'll demonstrate how this resistor has an effect on the output power. And hopefully it's a neat little project you might want to build. And here it is you can see you know I can trim this board down quite a bit because I'm only using pretty much this corner of it. I did run the wires through the holes here to act a strain release because I'm not going to put this in a box. And if I didn't do that it ended up breaking these wires off so that's why I ran it through the holes like that. Of course you don't need to do that when it's put inside an enclosure of some sort. Since I'm using the amplifier with line level signals I did not use the capacitor across pin 1 and 8 which increases the gain because as I mentioned before don't really need it. So let's hook this up to some music and give you a little sample run through. Okay I have the amplifier hooked up to a music source. Our supply set for 9 volts. It's only drawing 10 milliamps. Well this rounds up it's actually only drawing five or six milliamps. Very good for battery power. Draws very low quiescent current. So we'll get down here to the speaker. And very low level hiss. It's pretty quiet. Not quiet as some audio power amps but you know that's pretty good. So let's give you a little music sample here. YouTube safe music. The 40-80mm okay that ought to be good enough hopefully it wasn't over driving the camera microphones a little meter on the camera here says it's got up close to zero DB which zero being the loudest it can handle so hopefully it didn't get too loud okay so I got you pointed at the scope here you can see the clipping it's more symmetrical not quite perfect you probably never get it perfect but what I need to do is adjust the clipping out see the flat top get rid of that flat topping there so we just see a nice sine wave so now we're putting out 2.27 volts so 2.27 volts RMS we'll square that and divide it by 8 we're getting 644 milliwatts and that's a lot better than I remember in another video when I compared this chip with a bunch of other ones I was measuring 480 milliwatts you know just about half a lot so the reason I'm doing much better is because one I actually soldered up a board instead of using a socket board to set the amplifier up on number two I have that capacitor from inverting input to ground rather than shorting it so let me show you the difference if I short the inverting input to ground instead of using the capacitor so now I'll short the inverting pin to ground see what happens there it starts clipping because it shifted the output a little bit so now to get out of clipping I have to turn my signal down so I'll adjust it just so it's not clipping anymore and you can see what happened now it's 2.13 2.13 squared divided by 8 so that's 567 milliwatts so it's not a huge increase but you can see turn that back up so having that capacitor there instead of just shorting that pin the ground allows the output to be a little more symmetrical and I can get a bit more output that way so yeah it is a minor improvement okay so now we'll take a look at distortion as always this is the one kilohertz fundamental this is the 4.5 kilohertz pilot signal which is at 1% of the fundamental adjust this amp okay that's clipping bring it out of clipping so we'll get a nice flat signal this is a pretty clean amplifier not seeing a second harmonic a third maybe a little blip of a fourth and a fifth but yeah it's pretty clean little amplifier okay we'll do a frequency response sweep here okay there you go that's uh of course the response is going to be pretty flat except that the lower end because of the output coupling cap that I'm using it's going to tend to roll it off at the very bottom of the frequency band so there you go a simple little LM 386 board you can make that performs pretty good for what it is well that's it thanks for watching