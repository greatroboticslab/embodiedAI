AOf-i2vLd2o
https://www.youtube.com/watch?v=AOf-i2vLd2o
Unknown Category
Welcome! The subject of this video is connecting power MOSFETs in parallel. I got an email from a visitor who was having all kinds of problems using one of my circuits when he connected MOSFETs in parallel. The question became with RG. RG is used with these MOSFETs to bleed off any static charge and thus enabling the MOSFET to cut completely off. Using them for one MOSFET is fine. I was using a value of 10k. That could of course be lowered. Here I'm going to explain the problems you're going to run into when you connect MOSFETs in parallel. Let's look at a value here. This is RG. But we have something else in here that's hidden that most people don't think of much. But it's in the spec sheets. It's called CGS or Capacitance Gate Source. We'll look a little closer at the structure of a MOSFET in a minute. But if you go to the IRF 630 spec sheet, CGS is 600 PF. On an IRF 520, CGS is 350 PF. Now, when you connect these MOSFETs in parallel, you've also connected this capacitance or this de facto capacitor that exists within these devices. You've connected all of those in parallel. And if you remember your circuit theory, parallel connected capacitors add. Why is this like that? Let's take a look. This I got from International Rectifier. And you can see it on the website. This shows an in-channel MOSFET. You have an input resistance of some kind. You have a drive pulse or whatever they're using. And you notice something here. You have capacitance from the gate to the drain and gate to the source. And this creates all kinds of problems when you're putting in switching signals. If you parallel these MOSFETs, well, you've multiplied your problem. Four of them in parallel. You've got four four times the capacitance. This interferes and distorts your drive signal. How did we get to this? Look at this drawing of a MOSFET from a silicon wafer point of view. The gate electrode is separated from the rest of the MOSFET by a very, very thin layer of silicon dioxide. It's a non-conductor. By definition, what is a capacitor? Two conductors separated by an insulator. So here you've got a capacitor formed from gate to source. When you turn it on and you create a region, a conductive region from source to drain. Now you've got a gate separated by an insulator, which they even come out and call a dielectric, a conductive region. So there's what forms your capacitor. And that doesn't count stray inductance and other problems. All right, before we get into the rest of this, I need to give you a brief review on how an I.O. pin in a typical microcontroller, such as Arduino or microchip pick, whatever you're using. I'm going to use a 7414 to illustrate this. What we're interested in is the two output transistors. They're connected between VCC and ground. And how an I.O. pin works. If I want a high out, I'm going to switch on this. upper transistor. And of course, there's going to be some kind of resistance through through the circuit, including the transistor itself. And the output's going to go high, and it should be near VCC. If I want to switch the output low, I'm going to switch on this lower transistor. And it's going to tie and it's going to connect this to ground. Of course, there's going to be some resistance through the transistor junctions, both high and low. And so this is not perfectly zero. This is not a zero path either to ground or to VCC. There is going to be some resistance. That's how a typical I.O. pin works, or transistor switch in general. So keep that in mind as I explain the next part of this. When you switch that I.O. pin on and off, and you're feeding the gate circuits of a bunch of MOSFETs, what you thought started out as a square wave due to capacitive charge and discharge is going to look like this. It's not going to turn on in a linear fashion. It's going to have a charge curve. This charge curve depends on the internal resistance of the transistors used in the drive source times the value of the input capacitance. Well, the more input capacitance you got, the longer and drawn out this charge curve is going to be. When you go to zero and switch on that lower transistor that we discussed, it's also going to have some kind of resistance and the capacitors that were charged up when it went high are going to also discharge, but not in a linear fashion. So due to all this input capacitance and other issues within the microcontroller I.O. pin, you're going to produce a charge curve which is going to play games with switching on the MOSFETs. Then you're going to have a discharge curve that's going to play games again with the MOSFETs, and the faster you try to switch it, the more problems you will have. Let's look at the chart that we're looking at now, and this is RC charge and discharge curves on how this works. You have a time period, we call it T, and that's based on the resistance times the capacitance. The red line shows a charge curve, and a green line shows the discharge curve. And you notice here on the bottom it goes from zero to five. Because this is a non-linear curve, this occurs, what you're doing is charging a capacitor essentially through a resistance, and discharging a capacitor through a resistance. What happens is your greatest current flow, zero, in fact about 62 percent of it, is going to be occurring during the first time period. Because why? There's the greatest difference in voltage between the capacitor that started as zero, and the charging voltage which started at say VCC. And one time period, R times C, you're going to charge up about 62, 63 percent of the way. But now the charging rate drops steeply. By the time you get into 2T, that's two time periods, you've only charged up to about 80 something percent. In most electronics they teach you that it takes 5T, which is 90 something 98, 99 percent, is considered fully charged. So it isn't as simple as R times C. So the more T's you have the slower the charge rate. What does this mean when we're trying to turn on a collection of MOSFETs that accumulated a lot of input capacitance? Let's look at what people normally use. Some Arduinos and Raspberry Pi put out, what, 3.3 volts? I'm going to call it 3 volts. So in a time period of 1T, and I don't know exactly what the R and C values for a Raspberry Pi versus how many MOSFETs you are, but this is what you're dealing with. For R times C to get to 3 volts. From 0 to 1T, you're going to go to 63 percent, 63.2 percent. But 63.2 percent of 3 volts is 1.9 volts. When we go to 2T, that's 86.5 volts, and I've come up to 2.6 volts. Are most MOSFETs really going to turn on at 1.9 or 2.6 volts? Probably not. You're going to have to wait for a minimum of three time periods to get up just to 2.85 volts or 3 volts or so. What is the additional problem? Maybe you have some really good MOSFETs, and they cut on somewhere around 2T right here. But what if you had four MOSFETs in parallel like I showed earlier? MOSFET 1 fires here. MOSFET 2 fires there. MOSFET 3 fires here. And finally, they're all firing when we reach here. What's happened? I've got some super heavy load on those four parallel MOSFETs, and they're not firing off close enough at the same time. You might overload one or two of the MOSFETs. One of the MOSFETs is conducting like crazy by the time the other three could cut in. See the problem I'm talking about? Let's look at this problem again. But now we're going to go to 5 volts. 1T, 63% of 5 volts, is 3.16 volts. Aha! Big difference. So most of your MOSFETs, if they're designed to fire right at 3 volts, should have turned on pretty well. But a lot of MOSFETs take a little higher voltage to turn completely on. You could still have the danger of cutting on 2 or 3, and maybe number 4 cuts on out here. See the problems? You've got noise. They're not firing together. Some of them might be taking more of a load than the rest of them. But let's take a look at this. 1T, I get 3.16 volts. At 2T, or two time periods, it's 4.3. For the time you hit 2T, surely all the MOSFETs will be turned on by 4.3. But I did find some MOSFETs when I checked them that were cutting on around 4.3. Understand something. You can order a bag of MOSFETs. You can pull them out. But that doesn't mean that they have exactly the same specs. There might be a couple of tenths of a volt difference in the way they fire. Of course, by three time periods, I'm up to 3.75 volts. So, this is beginning to suggest a solution. If you're going to do this kind of switching with parallel MOSFETs, you need to go to a higher voltage. But even 5 volts on stuff that fires between 3 and 4.3 volts is still an iffy proposition. And look how much time I was strung over. I was strung over, even if they all fired from the end of 1T to the beginning of 2T, that's still stringing it out over this time period, is it? One time period. Let's take another look at this problem. Now, I'm driving them with 12 volts. 1T, that's 12 volts times 63.2% is 7.6 volts. All right. I have switched off. They're all surely going to be switched on. But the important part is, if you look here at 1T at 12 volts, they all switched on somewhere in this little steep curve here. So, that's your best bet. Drive these things. Remember VGS. Do not exceed VGS. But with a higher voltage, you will switch on all of those MOSFETs very close together. And they'll be switched on fully and hard. Down in here at a fraction of T. Or you can sit here at 3 volts and take up to 3T, three time periods, to try to switch it on. It's up to you on that. What about a drive circuit? When you put MOSFETs in parallel, of course, the capacitance is going to add. You cannot change that. But you might be able to change R. Go back into your drive circuit. If you're wondering what this circuit is, it's half of one of my H-bridge circuits that I've had around for years. But it would be excellent for this application. Let's look at it this way. This goes to your MOSFETs. Your gates that are all connected together. When there's no input on Q5, the gates of the transistors are high. Q2 is turned off. But Q1 is turned on hard. Okay. When Q2, in this case an IRF630, has a turn-on resistance of 0.4 ohm. So whatever capacitance I had on those parallel gates is quickly discharged through that very, very low turn-on resistance. I put a high in E. I turn on Q5. The gate voltage drops to 0. And Q2 will switch on. And it switches on hard and fast. It has very little. It has 0.8 ohm drain source resistance. So by reducing R again. By having a very low conduction resistance on Q2, I have really massively reduced T to something back here. That's how I reduce T is because my turn-on and turn-off resistance are so much lower than a regular bipolar transistor. So keep this in mind. You can use MOSFETs. RG, make it about 1 or 2K. And the 1N914 serves to clean up any noise generated by RG charging and discharging. Here is another variation of connecting the MOSFETs in parallel. You can put this resistor in the gate circuit. This would slow down the discharge surge. You might even reduce it to a lower value such as 10 ohms, 22 ohms, whatever you want to. You can do that to connect it to a gate or whatever. The 1N914 serves the purpose again as current rushes through the 47 ohm. The induced, the generated voltage spike is taken care of by the 1N914. Here is another variation. You can connect an individual resistor to each gate and then connect them to common. You'll still have the CGS problem. 27 ohms might be a bit high. You might want to go to 10 ohms each. That serves to slow down the huge rush of discharge current. On the preceding frame and this one, I highly recommend keeping in RG. The reason I say do this is because when you power up, if you happen to have this, for some reason, connected to a microcontroller gate or whatever, and the gate is floating, you could have these turn on when they're not supposed to. So with the preceding circuits, it does not hurt to leave the RG resistor in. It helps assure on power up that they are turned off. So these are possible solutions to look at when you are dealing with parallel MOSFETs. I hope this was useful. Give it a try. Let me know how it works out. This is your host, Lewis Laughlin. Visit my website at www.bristolwatch.com. Thanks for listening. Thank you.