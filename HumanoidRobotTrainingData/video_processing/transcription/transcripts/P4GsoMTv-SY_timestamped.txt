P4GsoMTv-SY
https://www.youtube.com/watch?v=P4GsoMTv-SY
Unknown Category

[00:00:00.960 → 00:00:03.680] Greetings everyone and welcome back to the bench.
[00:00:03.680 → 00:00:08.160] In this video I want to build a little amp using the ubiquitous
[00:00:08.160 → 00:00:12.400] LM386. You know on this channel I do a lot of
[00:00:12.400 → 00:00:17.200] amplifiers, mainly playing with higher power amplifiers, but I understand that
[00:00:17.200 → 00:00:20.880] there are people that are just starting out that might want to build a simpler
[00:00:20.880 → 00:00:24.160] amplifier, or somebody might just need a lower power
[00:00:24.160 → 00:00:28.400] amplifier and the LM386 will fill the need.
[00:00:28.400 → 00:00:33.200] Well instead of just building an ordinary LM386 amplifier, I want to do some
[00:00:33.200 → 00:00:35.760] things that will make the amplifier perform
[00:00:35.760 → 00:00:39.680] as best as it can. So in this video I will give you
[00:00:39.680 → 00:00:43.760] a layout and show you what I'm doing to make the chip perform
[00:00:43.760 → 00:00:47.600] at its peak performance. Also give you some tips.
[00:00:47.600 → 00:00:50.960] I'll show you the layout, give you the parts list,
[00:00:50.960 → 00:00:54.880] actually build the amplifier, and then we'll hook it up and
[00:00:54.880 → 00:00:59.600] do the usual music test and the power test and distortion and all that
[00:00:59.600 → 00:01:04.240] good stuff on the oscilloscope. So without further ado, let's get
[00:01:04.240 → 00:01:07.600] started. Okay here's the schematic that I've
[00:01:07.600 → 00:01:11.520] come up with and I'll go through the changes that I made
[00:01:11.520 → 00:01:15.040] as compared to some of the samples on the data sheet.
[00:01:15.040 → 00:01:18.720] And I'll also talk about some other things that I would recommend for
[00:01:18.720 → 00:01:23.920] getting the best out of this chip amp. First thing that I did is add a coupling
[00:01:23.920 → 00:01:28.240] capacitor on the input, and with this chip you don't really
[00:01:28.240 → 00:01:34.800] have to due to its ground referenced input, but it's very good to do so anyway.
[00:01:34.800 → 00:01:38.800] If you connect a signal source that has a DC offset,
[00:01:38.800 → 00:01:43.200] well that'll pass through into the amplifier and get amplified
[00:01:43.200 → 00:01:49.040] and come out the output. Well there is a DC blocking capacitor that will
[00:01:49.040 → 00:01:54.880] block it from reaching the speaker. However, that DC offset will affect the
[00:01:54.880 → 00:01:58.160] output swing. It will shift it to one side,
[00:01:58.160 → 00:02:03.600] and it will clip early causing you to lose maximum power. In other words, it'll
[00:02:03.600 → 00:02:08.400] clip before it can reach maximum possible power.
[00:02:08.400 → 00:02:13.040] The next thing I did is add a capacitor across the input, and that's this
[00:02:13.040 → 00:02:18.480] 47 picofarate here. The reason for doing that, it acts as a
[00:02:18.480 → 00:02:21.920] low pass filter keeping high frequencies out of the amplifier.
[00:02:23.280 → 00:02:28.400] Usually see this used with a resistor as well, but I'm not including it here.
[00:02:28.400 → 00:02:32.480] It's, I don't think it's really necessary. It'll do the job
[00:02:32.480 → 00:02:36.240] in the situation where you're connecting a high impedance source,
[00:02:36.240 → 00:02:41.600] and the amplifier's output can couple back to the input and cause oscillation.
[00:02:41.600 → 00:02:49.360] So having that there along with good shielding should prevent any of that feedback type oscillation.
[00:02:49.360 → 00:02:57.200] You'll see this on hi-fi amplifiers as well. It's just really good practice to have that there.
[00:02:57.200 → 00:03:02.880] And the third thing I'm doing is instead of shorting the inverting input to ground,
[00:03:02.880 → 00:03:06.720] I'm connecting it to ground through this capacitor.
[00:03:08.000 → 00:03:14.480] And here is the reason for doing that. This schematic here is what's internal to the chip.
[00:03:14.480 → 00:03:17.840] It's what they call the equivalent internal schematic.
[00:03:19.840 → 00:03:22.960] All this circuitry here is part of the input stage.
[00:03:23.760 → 00:03:26.720] You have your inverting input and non-inverting input.
[00:03:26.720 → 00:03:34.240] And you can see from the bases of those input transistors to ground is a 50 kilo ohm resistor.
[00:03:35.360 → 00:03:37.760] The reason that's there is for biasing.
[00:03:38.400 → 00:03:40.240] For if that resistor wasn't there,
[00:03:41.120 → 00:03:45.520] there's nowhere for this current to go from the base of the transistor.
[00:03:46.400 → 00:03:50.640] Now you need some current flowing out of the base of this transistor in this case
[00:03:50.640 → 00:03:57.200] for them to be biased. And without that the input section would not turn on.
[00:03:57.200 → 00:04:00.000] You'd have to have external resistors.
[00:04:02.080 → 00:04:07.520] The reason they put it internal is just less parts that you would have to use externally.
[00:04:08.880 → 00:04:14.800] So the problem is when, for example, connecting the inverting input to ground,
[00:04:14.800 → 00:04:22.160] you're bypassing this resistor. And now you're changing the current slightly that flows here,
[00:04:22.160 → 00:04:29.680] the bias current. And you know it's different on this side. So now you're causing an imbalance.
[00:04:29.680 → 00:04:36.800] Well that imbalance will shift the output. And it might clip a little bit earlier on one of the
[00:04:36.800 → 00:04:43.360] peaks of the sine wave. And that'll cause you not to get as much power as possible. It's not a big
[00:04:43.360 → 00:04:47.600] difference, but anything helps with these small low power chip amps.
[00:04:49.040 → 00:04:52.000] Okay, for a few other tips for using this chip amp.
[00:04:53.040 → 00:05:01.120] Well, you might know that pins 1 or 8 are set to allow you to connect an external capacitor or a
[00:05:01.120 → 00:05:07.120] series resistor and capacitor to adjust the gain of the amplifier. And I'm showing a 10 microfarad
[00:05:07.120 → 00:05:11.200] capacitor in dotted lines. They do that on the data sheet as well.
[00:05:11.200 → 00:05:18.320] Well, it's very important to set up an amplifier only to have as much gain as needed and no more.
[00:05:19.040 → 00:05:22.560] If you set this amplifier up with high gain when you don't need it,
[00:05:23.680 → 00:05:30.400] you're just going to end up with a lot more noise, background hiss, and also you can have more
[00:05:30.400 → 00:05:38.480] distortion. So if you're using this amplifier with a line level signal or like a music player headphone
[00:05:38.480 → 00:05:46.800] out jack, the amplifier has enough gain that you don't need to add an external circuit to pins
[00:05:46.800 → 00:05:53.840] 1 and 8. On the other hand, if you're amplifying a musical instrument such as a guitar, you might make
[00:05:53.840 → 00:06:00.400] a little practice amp with this. It might be a good idea to add some components to pin 1 and 8.
[00:06:00.400 → 00:06:08.640] For the maximum gain, you can add a 10 microfarad capacitor or if you don't need as much gain, add a
[00:06:08.640 → 00:06:16.560] 1 kilo ohm resistor in series with a capacitor on pins 1 and 8 and you'll kind of get a moderate gain.
[00:06:17.440 → 00:06:25.280] And the data sheet will explain all that if you want to reference that. As far as the output coupling
[00:06:25.280 → 00:06:32.480] capacitor value, I'm using 470 ohms. Some people say, oh, that's not big enough. You won't get as much bass.
[00:06:33.440 → 00:06:41.280] Well, you know, it's an LM386 amplifier. The speakers you connect it to are probably not going to do that
[00:06:41.280 → 00:06:47.920] well with bass anyway, so it doesn't make sense to use such a large value. Though, you know, if you want to,
[00:06:47.920 → 00:06:57.200] you can, if you're making a guitar practice amp, you can even use a lower value like a 220 or a 330 because
[00:06:57.200 → 00:07:08.640] you don't need to go real deep with the bass for guitar use. I'm using a 0.27 across the supply rails capacitor.
[00:07:09.200 → 00:07:15.600] I've tested it also including a larger value electrolytic and it doesn't make any difference.
[00:07:15.600 → 00:07:19.360] But instead of using a 0.1, I'm using a 0.27.
[00:07:21.360 → 00:07:28.400] Okay, this amplifier, you can run it between 5 and 9 volts. I'd recommend 9 volts to get as much power
[00:07:28.400 → 00:07:34.880] out of it as you can. But you can really only use this chip with 8 ohm loads. It just doesn't work
[00:07:34.880 → 00:07:38.720] very well with 4 ohm loads. And let me show you why.
[00:07:38.720 → 00:07:50.880] Well, here is a graph showing the output's voltage swing versus the supply voltage. This is a peak to peak.
[00:07:52.160 → 00:07:59.520] Well, as the supply voltage increases, you want to see this line on the graph steadily increase like
[00:07:59.520 → 00:08:06.800] these two. And this is with no load. They're showing infinity here. It just means no load connected to the output.
[00:08:07.840 → 00:08:12.880] This is with 16 ohms. And you can see how they follow pretty close, which is very good.
[00:08:13.920 → 00:08:20.400] With 8 ohm loads, it's decent up to about this point, up to around 9 volts. And then it
[00:08:20.400 → 00:08:23.760] pretty much gets flattened. It gets horizontal here.
[00:08:23.760 → 00:08:30.720] So after a certain point, the amplifier really can't deliver any more current. And the output voltage
[00:08:30.720 → 00:08:39.840] swing flattens out, which means your output power also flattens out. So you're fine up until 9 volts
[00:08:39.840 → 00:08:47.040] with 8 ohm loads. Because if you increase the supply voltage, you see it doesn't really increase that much,
[00:08:47.040 → 00:08:52.960] you know, very little. What happens is the chip just gets hotter and hotter without delivering
[00:08:52.960 → 00:09:01.200] extra power. Well, here's the 4 ohm curve. It's pretty pathetic, really. You know, it's only slightly curved here,
[00:09:02.000 → 00:09:09.040] and then it's pretty flat the top half of the supply voltage range. And because the voltage swing is so
[00:09:09.040 → 00:09:15.760] much less, you're not really getting any more power than you would with an 8 ohm load. So it doesn't make
[00:09:15.760 → 00:09:21.840] sense to use a 4 ohm load. The chip's just going to run really hot. It's not going to deliver any extra power.
[00:09:21.840 → 00:09:28.960] So what do you do if you have a 4 ohm speaker? Let's say you don't have a choice. The only extra speaker you have
[00:09:28.960 → 00:09:36.640] is a 4 ohm speaker. Well, you could add a resistor in series with that. For example, just add a 4 ohm
[00:09:36.640 → 00:09:45.040] resistor in series with the speaker. So the amplifier will see roughly an 8 ohm load. You can actually use
[00:09:45.040 → 00:09:50.320] a 3 or 3.3 ohm. It's probably a common value. That would still be safe.
[00:09:51.600 → 00:09:53.600] So that's what I would recommend in that case.
[00:09:54.880 → 00:10:03.040] So here's the layout I've come up with. I like to use this graph paper. The line spacing is 0.1 inch or 2.54
[00:10:03.040 → 00:10:09.680] millimeters, which is the standard hole spacing on perf board. So it allows me to lay these circuits out in real
[00:10:09.680 → 00:10:17.040] life scale or 1 to 1 scale. So what you're seeing here is the top view. You're looking down on the
[00:10:17.040 → 00:10:23.840] component side, looking through the board to the traces. And the reason I do that is because it's
[00:10:23.840 → 00:10:29.280] a lot easier for me to lay out the board looking down this way because I'm more familiar with the
[00:10:29.280 → 00:10:37.680] pin outs and the layout that way. So if you want to screen grab this, you can mirror it in an imaging
[00:10:37.680 → 00:10:44.080] program if you want to work from the bottom of the board the solder side so to speak of the perf board.
[00:10:45.040 → 00:10:52.240] So what I've done here is I tried to make the layout as good as possible. I'm using star ground. Each part of the
[00:10:52.240 → 00:10:59.040] circuit has its own return path back to ground. So there's no currents flowing in each other's
[00:10:59.040 → 00:11:03.440] path which can cause distortion and potentially even oscillation.
[00:11:03.440 → 00:11:12.160] So you know it's a nice compact layout. You know some of these grounds kind of shield around the input.
[00:11:13.120 → 00:11:18.720] The output higher current parts of the circuit are kept over here away from the small signal part of
[00:11:18.720 → 00:11:25.520] the circuit. So yeah, I think it's a decent layout should do the trick. In my circuit I'm not going to
[00:11:25.520 → 00:11:33.280] use this capacitor here that's connected from pin 1 to 8 because I don't need the extra gain. So this one
[00:11:33.280 → 00:11:40.960] will be omitted from the circuit that I come up with. Here is the parts list. Just pause and screen grab if
[00:11:40.960 → 00:11:48.800] you want this. And another little tip for you if you want to put this in a box and use a potentiometer.
[00:11:48.800 → 00:11:57.360] For line level type use I would use a 10k audio taper type potentiometer. And this little drawing I have
[00:11:57.360 → 00:12:05.360] here shows a potentiometer with the control shaft facing out or this way from the paper. And in that
[00:12:05.360 → 00:12:15.360] configuration your input signal would go into the leftmost pin. The audio amplifier's input would go into
[00:12:15.360 → 00:12:23.360] the middle wiper arm and the rightmost connection would be the amplifier circuit ground. And if you're
[00:12:23.360 → 00:12:30.400] using a plastic enclosure I would recommend also running a ground to the casing, the metal casing of
[00:12:30.400 → 00:12:38.480] the potentiometer. So that'll help eliminate noise by shielding the input a little better. Now if you're
[00:12:38.480 → 00:12:44.880] going to make a little practice amp for guitar I would use a higher impedance potentiometer. I'd use a
[00:12:44.880 → 00:12:53.680] 100k linear type potentiometer. So why would I choose a linear type potentiometer? Well you have to remember
[00:12:53.680 → 00:13:03.360] those resistors internal to the amp, the 50k resistors. What happens is with the linear pot working with that
[00:13:03.360 → 00:13:10.560] resistor as you adjust it it actually gives you kind of a logarithmic type curve as you turn the amplifier up.
[00:13:10.560 → 00:13:17.120] The only problem is though I know some people like to use a higher impedance pot for guitars.
[00:13:18.320 → 00:13:26.480] Well if you go too high that resistor will overcompensate and make the sound really quiet until you turn the
[00:13:26.480 → 00:13:32.560] potentiometer up to almost full and then suddenly gets loud. So that's the reason for that.
[00:13:32.560 → 00:13:41.280] Okay enough of this I'm going to build out the board and I'll come back and do some tests. You know the usual
[00:13:41.280 → 00:13:47.920] music test and then we'll hook it up and check the power and I'll demonstrate how this resistor has an
[00:13:47.920 → 00:13:54.640] effect on the output power. And hopefully it's a neat little project you might want to build.
[00:13:54.640 → 00:14:04.080] And here it is you can see you know I can trim this board down quite a bit because I'm only using pretty much this
[00:14:04.080 → 00:14:13.280] corner of it. I did run the wires through the holes here to act a strain release because I'm not going to put this in a box.
[00:14:13.280 → 00:14:21.440] And if I didn't do that it ended up breaking these wires off so that's why I ran it through the holes like that.
[00:14:22.160 → 00:14:26.400] Of course you don't need to do that when it's put inside an enclosure of some sort.
[00:14:27.440 → 00:14:35.280] Since I'm using the amplifier with line level signals I did not use the capacitor across pin 1 and 8 which
[00:14:35.280 → 00:14:45.680] increases the gain because as I mentioned before don't really need it. So let's hook this up to some
[00:14:45.680 → 00:14:54.160] music and give you a little sample run through. Okay I have the amplifier hooked up to a music source.
[00:14:55.840 → 00:15:04.320] Our supply set for 9 volts. It's only drawing 10 milliamps. Well this rounds up it's actually only drawing
[00:15:05.200 → 00:15:14.480] five or six milliamps. Very good for battery power. Draws very low quiescent current. So we'll get down here to the speaker.
[00:15:16.320 → 00:15:16.640] And
[00:15:19.920 → 00:15:22.720] very low level hiss. It's pretty quiet.
[00:15:25.120 → 00:15:33.440] Not quiet as some audio power amps but you know that's pretty good. So let's give you a little music
[00:15:33.440 → 00:15:46.320] sample here. YouTube safe music.
[00:15:46.880 → 00:15:59.840] The
[00:16:08.720 → 00:16:12.160] 40-80mm
[00:16:12.160 → 00:16:17.480] okay that ought to be good enough hopefully it wasn't over driving the
[00:16:17.480 → 00:16:22.700] camera microphones a little meter on the camera here says it's got up close to
[00:16:22.700 → 00:16:30.480] zero DB which zero being the loudest it can handle so hopefully it didn't get
[00:16:30.480 → 00:16:37.280] too loud okay so I got you pointed at the scope here you can see the clipping
[00:16:37.280 → 00:16:44.840] it's more symmetrical not quite perfect you probably never get it perfect but
[00:16:44.840 → 00:16:51.080] what I need to do is adjust the clipping out see the flat top get rid of that
[00:16:51.080 → 00:17:01.720] flat topping there so we just see a nice sine wave so now we're putting out 2.27
[00:17:01.720 → 00:17:13.360] volts so 2.27 volts RMS we'll square that and divide it by 8 we're getting 644
[00:17:13.360 → 00:17:19.540] milliwatts and that's a lot better than I remember in another video when I
[00:17:19.540 → 00:17:26.140] compared this chip with a bunch of other ones I was measuring 480 milliwatts you
[00:17:26.140 → 00:17:33.220] know just about half a lot so the reason I'm doing much better is because one I
[00:17:33.220 → 00:17:38.440] actually soldered up a board instead of using a socket board to set the
[00:17:38.440 → 00:17:44.860] amplifier up on number two I have that capacitor from inverting input to ground
[00:17:44.860 → 00:17:50.460] rather than shorting it so let me show you the difference if I short the
[00:17:50.460 → 00:17:56.400] inverting input to ground instead of using the capacitor so now I'll short the
[00:17:56.400 → 00:18:05.760] inverting pin to ground see what happens there it starts clipping because it
[00:18:05.760 → 00:18:12.580] shifted the output a little bit so now to get out of clipping I have to turn my
[00:18:12.580 → 00:18:19.700] signal down so I'll adjust it just so it's not clipping anymore and you can see
[00:18:19.700 → 00:18:32.000] what happened now it's 2.13 2.13 squared divided by 8 so that's 567 milliwatts so
[00:18:32.000 → 00:18:39.020] it's not a huge increase but you can see turn that back up so having that capacitor
[00:18:39.020 → 00:18:43.340] there instead of just shorting that pin the ground allows the output to be a
[00:18:43.340 → 00:18:50.100] little more symmetrical and I can get a bit more output that way so yeah it is a
[00:18:50.100 → 00:18:57.020] minor improvement okay so now we'll take a look at distortion as always this is the
[00:18:57.020 → 00:19:05.000] one kilohertz fundamental this is the 4.5 kilohertz pilot signal which is at 1% of
[00:19:05.000 → 00:19:12.200] the fundamental adjust this amp okay that's clipping bring it out of clipping so
[00:19:12.200 → 00:19:20.700] we'll get a nice flat signal this is a pretty clean amplifier not seeing a second
[00:19:20.700 → 00:19:30.800] harmonic a third maybe a little blip of a fourth and a fifth but yeah it's pretty
[00:19:30.800 → 00:19:37.800] clean little amplifier okay we'll do a frequency response sweep here
[00:19:47.800 → 00:19:54.800] okay there you go that's uh of course the response is going to be pretty flat except that the lower end
[00:19:54.800 → 00:20:03.300] because of the output coupling cap that I'm using it's going to tend to roll it off at the very bottom of the
[00:20:03.300 → 00:20:12.800] frequency band so there you go a simple little LM 386 board you can make that performs pretty good for what it is
[00:20:12.800 → 00:20:14.800] well that's it thanks for watching
