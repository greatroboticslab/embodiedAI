Sd6CcsCgFbg
https://www.youtube.com/watch?v=Sd6CcsCgFbg
Unknown Category
Hello and welcome to Enritsu's webinar entitled Network Extraction and De-Embedding Techniques for Differential Printed Circuit Probe. My name is Arno Pettai. I'm a field applications engineer at Enritsu company and my specialty is in B&As and joining me today is Brian Shoemaker, president and founder of DVT Solutions, a company that makes probing systems, solutions and probes and connectors. I also want to recognize Bill Rosas of Signal Microwave for supplying the verification board that we're using today to perform the network extraction as well as the verification and Dr. Jing Chao Wang of Atai Tech who has been so kind to allow us to use his ISD software which allows us to do the network extraction of the probe. So today we're going to cover first of all the basic topics of network extraction as well as embedding and de-embedding. These are common terms that are used in conjunction with VNAs but not very well understood. So I want to spend a few minutes explaining these important concepts. After that I will turn over to Brian who will explain the DVT Solutions probing system and talk about the probe in particular and some of the unique advantages and features of that. And Brian will also take us through the ISD software and how we generate using that software the S4P model for a differential probe. Then I will discuss Enritsu's VNA family and how we make differential measurements which is critical here because we're trying to obviously get differential measurement results so we need a four port VNA to do that. And at the end we'll apply and verify the probe model that we've extracted using the Atai Tech software and display that on a VNA with both the embedding or de-embedding implied and de-embedding off so we can actually see the difference which would be the probe loss that we're looking at. And we'll summarize all that with a live demonstration at the very end. So first of all what is network extraction? Well network extraction is a tool that we use to generate the S-parameters or the model for some network that we want to then embed or de-embed later from a VNA test port. This model can be single-ended or differential. And as I said earlier in today's presentation we're going to use the Atai Tech ISD software to perform this network extraction in our example being a differential probe. But there's also other uses for network extraction. We can extract portions of a circuit on a PC board. We can extract the launches for a test fixture. And it's an alternative to using time domain gating. That's always been a technique used in the past as well for isolating a network in time and then going back to frequency domain and capturing the characteristics in an S4P or S2P format. Or doing just simple test port extensions. But those of course don't always take into account loss and other characteristics. So it's very important to use network extraction especially in cases where you don't have all the CAL kits available at the various reference planes of interest or where you can't connect it through. And in our example today we simply cannot connect two probes together because it would be the chance of damaging probe tips in that case. So we are using network extraction in this case to avoid having to make that type of through measurement. And what we're trying to get of course is as a result is an SNP formatted file or model for the probe that we will then use in embedding de-embedding. So then what is embedding de-embedding? Well much like in a circuit simulator it's useful to add or remove networks from a given measured results. So we're able to look at a live measurement on a VNA and actually add a network and have that measurement display that network as if the matching network was present. Or in the case of de-embedding we can remove a fixture or in this case in our example a probe from the measurement so that we can concentrate or or isolate a measurement to just the device under test of interest. And an embedding de-embedding function is a standard feature in a VNA and basically it allows us to add that network or remove that network and measure that new data live on the instrument. Of course we need to have a standard VNA calibration performed first. So this would be your standard SOLT or other method that you choose to use. And then we can apply this embedding de-embedding to two, three, and four port devices under test. Now what kind of networks can we mathematically add or remove from ports of a VNA? Well we can have standard circuit elements. These would be lumped elements such as shunt and series, inductors, resistors, capacitors, and transmission lines. We can put in the characteristics of a transmission line and add and subtract that. We can also in our case here today use S2P and S4P models of the networks that we want to add and subtract. And so these would be created in network extraction and then applied here in the embedding de-embedding. Now there's also another example of a very simplified case of de-embedding and this applies to optoelectronic components where you only want to de-embed in this case the transmission measurement portion. So you're not concerned with reflection here. So you're doing a subset of full de-embedding by just treating the transmission only so that we can isolate a measurement to either an optical modulator or a photo receiver. Assuming of course you have a characterization file for one or the other that you intend to de-embed to isolate the measurement measurement on the device under test of choice. So this would be the same functionality as in a lightweight component analyzer or something else that Enritsu offers as part of their VNAs. So to summarize embedding and de-embedding, we can view results as if a different launch structure was present. So we can have an embedding task where we're adding something and we want to visualize it on the screen live with that launch structure present. We can also look at measurements with some matching circuit applied that we've gotten from our simulator and we can view that result live with that matching circuit applied or we can add a cable length or a transmission length or launch as needed. So that's in the case of the embedding where you're adding some network. In the case of de-embedding which is what we're demonstrating today, we're going to look at a probe but there's also other examples such as test fixture or a transmission line that you may want to remove on a fixture or a matching circuit that you want to remove the effects of physically in the measurement case. Okay at this point I'm going to turn it over to Brian. We'll explain the probing systems. First I want to discuss what is a differential probe so that it will become more relevant as to why we want to create de-embedding files and models in order to remove any artifacts within the probe for the measurements. So differential probe, we developed the first differential true differential probe back in Brown in 2005 when the LVDS circuits started to come out from National Semiconductor and a few other companies. This changed the entire architecture at that time from point to point to a dual line differential interface and it was designed so that you're able to reject common mode noise so the power supply glitch if it occurred would just wipe out your data and your system crashes. It also allows you to use a lower voltage to define the ones and zeros so that you can move data faster down the transmission line. In this slide set here I have an example of what an LVDS interface might look like. You've got your differential transmitter, your receiver. We had to develop a probe to measure the impedance and the s parameters of this transmission line according to the specifications of the specifications of the drivers. So in a true differential probe, as kind of describes the fields that are going up and down the transmission line on the bottom of the of the slide, is that it sends a positive and negative pulse down the transmission line so that it creates a virtual ground and not not have to rely upon a common mode or a physical ground. So there's coupling there that has to be modeled later and I will just discuss how we do this with a software product but in order to create a good model of a differential probe you have to be able to model the coupling between the two transmission lines. Next, let's discuss the model development. Well, currently we have a partnership with a tie tech which is a company that makes the in situ de embedding or ISD software that allows us to create a differential probe a differential probe to include the crosstalk or what we'd call if it's functional a virtual ground and it creates a S4P touchstone file that we can input into the VNA that allows us to then take this model and then de embed the probe from the model. So the model contains coupling between the differential conductors. The model creates its own virtual ground so the probes do not require a ground between the signal pins. If you draw your attention to the picture at the lower right hand side, we've just introduced these differential probes. These will go up to 70 gigahertz and as you can see the picture are kind of the center or a lot off to the left of the probe. There's only two signal pins. There is no ground so we're completely relying upon the coupling of the probe to carry the energy down back and forth through the probe. And to model that is a really, really, really difficult thing to do. But we've been able to do that with the tie tech software that we will discuss later on and have a live model creation demonstration later. Now probe the embedding process. What we do to create the model itself of the tie tech software pretty much needs three different measurements and open a short and one that's a measurement called a we call a probe in situ. It's basically it's a probe differential probing a differential line that connects to a connector and these three waveforms or S parameters are imported into I attack to create the S4P to create the S4P to create the S4P to create the S4P. The S4P model. By doing this, it allows us to create a more accurate embedding model to model the differential crosstalk. You get more accurate S-parameter measurements by removing the probe loss from the measurements and it sets the measurement reference plane at the probe tips. Now, lastly, I need to kind of define the differences between a differential probe and what the industry really calls a dual probe. Since we define a differential probe is that you have to have the transmission lines in the differential lines coupled in most probes on a marketplace that believe we're the only company DVT solutions that do have a differential probe is that they just use two coax cables in a plastic box. And with the shields around the conductors, the conductors are not coupled. So that very nature and that architecture. It's impossible to create a virtual ground because the conductors are not coupled and are isolated. So in a sense, these are referred to as dual probes. Now, I wanted to kind of since we build probe systems, a lot of people ask, well, I just need a quotation for some probes thinking that's all you really need. But it's not practical to hold in your hand probes onto a board control your instrument at the same time without creating bad data. So essentially a probe system that that we put together, it's not a fixed platform. They're basically components that consist of a probe positioner that you attach the probe. And what that does is it it holds it in place planar to the surface of the board, which allows us to go down onto the test pads with some maybe some minor planar adjustment controls. Allows the probe tips and the test pads to make contact so that you get good data coming from it. Secondly, in order to see that the probe tips are making contact with the test pads, you need a camera system. And that allows us to view the probe tips making contact with the test pads and also to that they're planar. Lastly, you know, if you're probing a board, you're most likely going to need to have some kind of fixed PCB fixturing to keep it from moving or bowing while you're measuring your data. Now here's an example of a little more elaborate probe systems that we put these together for the last 18 years. The pro different dual probe system on the left just means that we've got two probes making contact and we're making a complete full full through measurement from one probe to the other. And that data is is going into a full port VNA. We're using two cameras, one camera per probe, and we're using two manipulators. And then in cases where we're probing larger boards, we've got a probe bridge that we're setting the probe manipulator on, as you can see on the left and on the right. It raises it up high enough that I could slide the board underneath. That allows us to probe anywhere into that board that's necessary because primarily the length of the arm of the manipulator is about five inches. So if you brought that right manipulator right up to the edge of the board, you're only going to be able to probe into it about five inches. So if your board is say longer than wider than five inches or 10 inches, then you might want to take a look at getting a probe bridge to assist the probing of it. Now, going back to the AtaiTech software, I mentioned earlier that it requires three different measurements. So what we do initially is we set up the VNA so we have a time domain or harmonic cal that creates a time domain or like a TDR display. So we'll start on the left hand side. The VNA is showing us the time domain of the probe making an open measurement. And you can see at the end of that trace it goes up. So there's no contact at that point. The probes are raised. And we use a copper plate that comes with the probes to allow you to make the short measurement, which is the next one on the right. And you can see at the end of the trace on the vector network and I understand it goes down. So it's shorting. And by putting the VNA into time domain mode, it gives us visual feedback to see that we are making contact with the short. And it is making an open measurement. You can see the probe tips on the camera that's viewing the probe tips at the top of the VNA. On the screen, you can see on the left, it's up, it's open, right? It's short. It's making contact across the copper pad. So lastly, the third measure we need to do is the probe SITU S4P file. And so this is requires a board that has a probe pad on one end of a differential line that goes down to connectors, differential connectors on the end. So we're going to make a full insertion loss and S4P measurement. And this is our last file that we need in order to create a S4P model using a TITEC software. Here is a screenshot of the TITEC software on the left hand side. So we're going to make a look at the right side. We load the open, the short, the in situ. And then we select auto, which kind of verifies that our ports are correct. And then ports to skip on the right, kind of the right side is on the left, meaning that it's going to be not developing a model for the left side. This is going to be for the right side. The probe would be on the right side in this case. Now on the right hand side is the probe model after it's completed its extraction, its model extraction. And it's this is a 70 gigahertz, no ground probe model for our brand new differential probe to 70 gigahertz. OK, continuing on with the DNA, which is really the measurement engine behind the measurements that Brian was talking about that are required to build up the model for the probe. We need a differential DNA. Of course, for the first two steps, it's an open and a short. That's a two port measurement. But we need the four port, obviously, to make the in situ measurement. And then later on, when we're using the probe, of course, and de embedding it, we're talking about differential measurements. So once again, we need a four port. So and it's who has a quite a wide family portfolio of VNAs, ranging from the high performance vector star, which we're talking and demonstrating today. There's also a mid performance four port. It's called the shock line, and that goes up to 43 and a half gigahertz. It's also has the de embedding software as standard on it as well. So much the same as what what Vector star has. But we're using Vector star today because we're going up to 70 gigahertz. And it's also possible to extend even higher with millimeter wave extenders to 110 gigahertz, 145 and even 220. We're the only company that has a single sweep vector network analyzer from 70 kilohertz all the way up to 220 gigahertz. So a lot of these concepts we're talking about can be extended, of course, into higher frequencies. But we're going to concentrate on the picture that's in the middle and the bottom there. That's our four port system. And it consists of our two port mainframe VNA plus the multiport test set, which basically combines the two ports on the mainframe with the two ports on the test set to create a four port system. So this is our vector star with the test set. Obviously, signal integrity application being that they are differential in nature. They need a four port VNA to make all of those measurements possible. So the test set is added. We have four ports. We do the single ended and we have superposition mathematics that basically transform single ended S-paramers into differential S-paramers, which is what we're after because we want the differential insertion loss and differential return loss of our probe as the final result when we do the network extraction. So embedding, de-embedding is a standard feature, as I said, on Enritsu VNAs. And then we can also add a second source and we can add differential view in those cases where true mode differential stimulus is required. In this case, since we're working with a passive device, we do not need true mode to do that since we're able to measure it with single ended and then use the mathematical transformation to get our differential results. So we don't need to have multiple sources as a result. The single source will allow us to make all of the necessary measurements for computing the differential S-parameter results. These are the only systems that cover kilohertz to gigahertz. So again, 70 kilohertz low end frequency all the way up to 70 gigahertz in the case of this VNA. So superposition is what we use to take the single ended S-parameters and convert them to differential S-parameters. And the way superposition works basically is we're applying a signal one at a time, an incident stimulus one at a time to each port via switch matrix that's part of the system, part of the VNA system, and measuring the response from all of the ports simultaneously. And then we go to the next port and do the same thing. So we collect all of these measurements, all these ratio measurements to form our S4P matrix of single ended S-parameters, and then mathematically generate the differential common mode and mixed mode quantities based on that. So as I said, this works perfectly well for passive devices and even linear active devices. It's only in the non-linear case that you would actually need a true mode differential and thus a second source and all the phase synchronization required to get a full true mode differential stimulus. So this is our single ended S-parameters on the left side. That's our S-4P matrix basically, and we're mathematically transforming that to the differential quantities. And what matters here is basically the differential transmission. So the SD2D1, the return loss, the SD1D1 or D2D2. Those are the return loss of reflection terms. And then there's also common to differential, differential common, what we call mixed mode. Some of that's important for common mode rejection type measurements. And there's also common mode, which usually no one cares about because differential is what everyone wants. So it's really the 180 degree out of phase that is of interest, which is how differential is defined. So we're looking at insertion loss, as I mentioned, the D2D1 and in the reverse direction, that would be D1D2. Return loss at both ports, both differential ports. And then the common mode rejection may be of interest in just looking at how well your design performs in a differential sense and how well it rejects the common mode. Cross talk is really just single ended S-parameters. We're looking at really the near end and the far end cross talk here. So these are looked at in terms of single ended S-parameters. These are the cross terms. These are not the direct through terms that you would have in the differential transmission. That would be one to two and three to four. So here we're looking at the cross terms and that would be the leakage across or the isolation. And then we can use time domain and, as Brian mentioned, the low pass time domain step response to get our impedance profile. And we actually see what is happening along the line. And this is helpful when you're landing the probes as well to actually see the result that you expect if you're probing an open, probing a short or probing the line to make sure that you're touched down correctly and that the line impedance makes sense. Remember, this is a hundred ohms because it's a differential. So this is what we're looking at in our in our impedance profile. So all of these measurements are possible with a four port VNA. Now turning to the embedding, de-embedding menu. This is after you've got your calibration and you're making measurements. And now you want to input the model that we've developed or extracted using the ATITEC software for the probe. And you want to actually apply it to your measurement because at the end of the day, what you want to measure is your device under test and not anything outside of that. So everything else in the measurement path, including the probe, has to get removed if you want to isolate the measurement to your device under test. So this is the process that we use. So we load the file. If it's a two port S2P file, it would be the menu on the left. If it's a four port, it would be the menu on the right. You would load an S4P file. You would add that to your network. If you have multiple layers of de-embedding that you wish to accomplish, then you would add an additional network to that table below. And then when you've got everything set the way you want it, you apply it and turn the embedding on. And the Enritsu VNA menu has a way of toggling on and off. So you can actually see very quickly what the result is after de-embedding. And you can revert back to what it was before de-embedding and actually see the difference. And we'll be demonstrating that when we do the verification portion of our demonstration. And this is what it looks like. This is actually what I'm talking about here is where we're applying the probe model and the trace is the blue trace and the green trace is the original measurement with no probe de-embedding taking place. So you can see that the insertion loss of your device under test improves as you remove the probe because the net difference between these two traces is the actual insertion loss of the probe, which is about 8 dB at 70 GHz. So at this point, we're going to turn to the live demonstration and we'll be back with you in just a couple of minutes. Okay, now we're back for the live demo. The live demo is going to consist of the systems that you see up on the slide. Starting with the left, what we're going to do, those shows the port assignments, how we're connected to the probe in situ board. And then in the middle is the actual devices that we're using as the probe system. This is kind of the half of a dual probe system, essentially. You would need the camera system and the probe and the manipulator to hold it and a board to make measurements from. And then on the right side is the full system, showing you the board to set up the DNA, the display. And next we're going to do is we're going to go to a live demonstration of making the probe in situ measurement. All right. The picture on the left side, as you see in the camera, down at the bottom, the black thing down there is the probe positioner. And as I said earlier, you want a long arm on this thing. And then this is connected to the probe. Now this is the true differential 70 gigahertz probe. And it's controlled by these controls back here, your X, Y, and Z. And this one here is your planarization control. If the probe tips are not planar to the test pads, you're not going to make good measurements. And in order to verify they are or not, is that we have a camera here that's showing the probe tips very, expands it on the display, as you can see here by the display on the PC. So those are the two signal pins within the probe itself. As you can see, there is no ground. So we have no common mode path, just a differential path with crosstalk. And they were making contact with the differential line, as you can see on the trace. So this connection to the VNA is we have a differential port one on the left here, one and three connected to one side of the probe in situ board. And then the other port, differential port two and four are connected to the probe. And now that completes the path. So on the display to verify and help us kind of guide that we're making good contact is the time domain display on the VNA that shows the probe's making contact through the transmission line. And now the next thing we're going to do is we're going to make an S parameter measurement, return loss measurements. And this is going to be our probe in situ measurement that we're going to be sending to Arno, who's going to do a live demonstration using a TIA-TECH software. And this insertion loss measurement, which is the last of the three waveforms that we need, the open, the short, and now the probe in situ measurement. So I'm going to pass this waveform off to Arno, who will next create the extraction that will give us our probe model. We're going to use the TIA-TECH software next. And for this, we're going to use a 1X open and short. This is what we measured. These are basically S2P files. These were two port measurements we made with ports 1 and 2 of the VNA. We probed the open, which was basically probes in the air. And we probed the short, which is the probes touching down on the copper shorting plate. And so we're going to select 1X open and 1X short. And we're going to load the two S2P files. So the first one is for the open. And I have that one here in the directory. And over here I have the short. So we'll load that one. And then finally, it's the measurement that Brian was just showing live, which is the in situ through measurement. And that is S4P because it's a full differential measurement that we're taking there from the connector to the probe through the transmission line on the board. And so that's our in situ measurement, which is the one here. It's the one inch board we're using to 70 gigahertz. So we'll load that measurement. And then we perform an auto port sequence check. This is just ensure that our through line or through connections are as we expect them to be. So the port sequence for our through is one to two single ended and three to four single ended. And it also shows the frequency range where we're covering with 2000 data points from 35 megahertz to 70 gigahertz. And now another very important step is the port to skip. Since we're not concerned about the left side, the left side is where the connectors are. The probe is on the right side. So we want to skip the side that has the connector. So that would be the left side. So we select left and then we're ready to run the ISD software to extract the S4P model for the probe. So this takes just a few seconds. And what you get is the single ended S parameters. Well, that's not all that interesting for us because we're after the differential S parameters. So we come over here to plot S parameter. And we de-embed from the right. And it's basically the differential view that we want to see. And so if I expand that, this is the actual differential S parameters of the probe by itself. So it's extracted the probe from those three measurements that we supplied. And it plots out the differential return loss, both the input side and the output side. So that's the blue trace over here is the input return loss. The red trace over here is the output return loss. And we see over here the insertion loss, the differential insertion loss of the probe itself. In the forward direction is the blue. In the reverse direction is the red. And they're the same as we would expect. Because this is a symmetric and a passive device that we're extracting a model for. So once we have the model, we're ready to go over to the VNA and actually apply it to that measurement that Brian was showing just a moment ago. So I'm going to go ahead and close this window and bring up the VNA menu again. And look at the differential transmission. And right now what we're measuring is the probe and the board all together. But what we want to get to is basically just a measurement of the board and the connector on that board on the left side. But we're going to remove the probe that is on the right side. So the first thing I'm going to do is place this trace into memory. So we have a record of what it looked like before we de-embed it. So we're going to go ahead and store this trace to the memory. And then we're going to put data and memory on. And then we're going to go to the measurement menu, which is where we apply all our post-processing. So as I mentioned earlier in the presentation, all of this assumes that you've done a standard calibration, S-O-L-T type calibration, so that you're obviously measuring accurately. But now what we want to do is apply that probe model and remove that probe from this combined measurement. So it becomes a post-processing step. And we call that de-embedding. And we want to go into the edit menu for de-embedding. And you'll see the menu that I showed earlier in the presentation where you can choose between embedding and de-embedding. Obviously the default is de-embedding. Most of the time you want to remove things rather than add things. But it can go both ways. We have to decide what port we want to apply it to. And this is very important because you can do S-2P embedding de-embedding, which would be on a single-ended port. Or you can do differential embedding de-embedding, which would be on a differential port. Obviously we're here to do differential measurements. So we're going to pick ports two and four because that's what's on the right-hand side. That's our output. That's where our probe is. And as I mentioned in the presentation, we can handle discrete components. We can also do transmission lines. But really the most useful de-embedding network, of course, is the S-4P file itself. So that's what we're going to use here. And we're going to load in the S-4P file. And so when the ISD software ran, it created a file in the same directory that's labeled write DUT. And that is basically distinguishing that we're removing what's on the right-hand side and creating a file for it. And so what will be left is just the DUT measurement. So the actual probe file is this one, the one I'm pointing to that's called write DUT. So this captures the probe model. So we're going to go ahead and open that. And we're going to apply that. Sorry, we're going to apply that. I had another one in there, so I'm going to remove that. So now I have the file loaded in the table. And we're going to apply it. And we're going to close. And now all that remains is to basically turn on the embedding. And what you'll notice right away, the memory trace still captures the combined measurement with the probe. And the measurement in blue is now the D-embedded result. So we remove the contribution to the probe. And that's somewhere around 6 to 8 dB, depending on where you're looking at it, frequency. But that's the result. So this is where we end up after the probe is basically removed from the combined measurement. So that concludes our demonstration and also concludes our seminar for today. We hope it's been informative. We do want to mention again, this was a collaborative effort with four companies involved. So we thank you today for your attention. If you have any questions, feel free to reach out to any one of us. I'm, of course, responsible for the V&A part. Brian helped here with the probing part of it and probe systems. And Bill Rosas manufactures the probes themselves as well as the verification board that we're using. And Dr. Jing Chao-Wong at the TITEC for the ISD network extraction software. So again, on behalf of Brian and myself, we want to thank you for your attendance today. And feel free to contact us with any questions you may have. Thank you and good day.