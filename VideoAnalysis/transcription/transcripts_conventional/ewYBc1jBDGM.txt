ewYBc1jBDGM
https://www.youtube.com/watch?v=ewYBc1jBDGM
Unknown Category
Hey guys! Welcome to Allotronics! I'm Gregory and in this video we are going to take a look on an IF amplifier with variable gain. I designed this IF amplifier for an SSB transceiver where the gain can be controlled. We are going to see it working here on the bench and we're going to go to the whiteboard to understand how it works. Take your coffee and come with me. So guys, here we have the prototype. I'm going to show it later. And I'm using the tracking generator of the spectrum analyzer to plot here the gain. So this trace here over frequency is the gain of the amplifier. And you can see that if I change the control voltage, we can change the gain of the amplifier. If I change the control voltage, we change the gain. Let's go to the maximum gain here. Around 28 dB. And if we go down, we can reduce the gain. Even having a gain lower than 0 dB. So this amplifier can actually work as an attenuator also. Look at this. Here you can see the prototype using my favorite technique, the SPIDER technique, as I called. We have the input signal here on this connector where we connected the tracking generator. And this is the output connector where we are measuring the output power, plotting the gain on the spectrum analyzer. Construction is very simple. Using a single transistor, a BJT transistor, a BC547 here. And what is important for this design is that we are using a diode as a variable resistor to control the gain. This mouse signal resistance of the diode is being used as this mouse signal emitter resistor of the transistor. And we can control this mouse signal resistance, changing the voltage over this 10k resistor here, generating an almost constant current on the diode. And the other important thing of this design is the auto transformer on the output that is converting the fifth ohm impedance of the output to a much higher impedance to the collector of the transistor. So we can get the maximum gain of this stage. And guys, to plot the gain of this stage here, it's very easy. We only need to go to the amplitude menu of the spectrum analyzer. And we need to generate a reference offset of the same value as the power we are using on the tracking generator. So if we are using negative 20 dB as the input power and we are offsetting the line 20 dB, we are actually plotting here the gain of this stage. My cable setup here has 0.8 dB of attenuation. So we can add it there. And we're gonna have a little higher trace here because now we are compensating for the losses of the cable. The assumption that the diode is working with a constant current only works for very high control voltage. If the control voltage is very low, now the voltage drop over the diode becomes significant. And of course, if we have changes in the diode temperature, we are going to have changes on the current and on the gain of this stage. Here I configure this stage for a very low gain, 5 dB. And take a look at what happens if I touch the diode hitting it. Take a look at the gain increasing. So for controlling the gain of this stage with precision, we need a constant current source. Using this, I will have very precise gain control, so I can grab some data of the amplifier to show you in the next video. I wanna plot the third order intercept, the 1 dB compression point. And for this, we need to have very well controlled current to stabilize the gain in a precise level of the measurement. And you can see that I thermocoupled the three transistors of the current source. And this approach here worked very well. Very well. Very nice. So guys, let's understand how the circuit works. And as we can see here, it's a very simple circuit. A single BJT amplifier, common emitter amplifier. But I played some tricks here to have its gain controlled by a voltage or actually by a current. As we are using this mouse signal resistance of the diode as a variable resistor, actually the gain here is controlled by current. Very interesting. Because the resistance, the mouse signal resistance of the diode is proportional to current. Actually, it is inverted. As the current increases, the mouse signal resistance decreases. We see that we have a very simple circuit. We have the 5th ohm output here being transformed to a higher impedance to the collector. We are going to understand why I did this and how the turn ratio of this auto transformer was chosen. And we have common biasing of the transistor here with a voltage divider generating a constant voltage over the base, generating an almost constant voltage on the emitter. So we can control the current of the amplifier using an emitter resistor. This resistance here is controlling the stage current that I'm using here, 12 milliamps. So we know that here we have 12 milliamps. And why 12 milliamps guys? This comes a little more from experience because I have developed a lot of amplifiers like this one. And I know really by experience by going to the bench that it works very very well with 12 milliamps. Actually something between 10 and 12 milliamps works very well for this kind of transistor here. And guys, before we proceed, do you know why a transistor amplifier like this one amplifies? It's actually very very easy to understand. We know that by the working principle, the working behavior of the transistor, the BJT transistor, is to have a very similar current on the emitter and on the collector. We know that any current that flows into the collector will flow into the emitter. So any current entering the collector will go out on the emitter. And we have very little current on the base. So we can assume here that any current flowing here on the emitter will be flowing here on the collector. And knowing this first order behavior, it's very easy to see that this setup here will amplify if we place different impedance on the emitter and on the collector. Because the same current will flow on both. So if we have here 39 ohms, let's say we don't have this inductor here. We have here 39 ohms on the emitter. Any voltage fluctuation here will generate a current fluctuation on this resistor here. And this current here will flow on the collector. So if I place a 10 times higher resistor here, I'm gonna have 10 times higher voltage here. Because the resistor here is transforming the current on voltage. And we have the same current on the collector than in the emitter. So it becomes very clear that an approximation for the gain of any common emitter amplifier is the ratio between the collector impedance and the emitter impedance. The emitter impedance will set the current flowing here by the fluctuation in voltage on the base. Imagine the signal changing here the voltage of the base. Changing in voltage of the base will appear here as a changing in voltage of the emitter. Okay? Because we have a constant voltage drop, this fluctuation here of voltage will generate a current fluctuation here on the impedance of the emitter. And the same current fluctuation will happen here on the collector. So if the impedance are different, of course the voltage here can be higher than the input voltage. Very nice. Understanding this behavior, it becomes very clear what I did here. I first placed an inductor in series with this resistor here. So now any AC fluctuation of voltage will see a very high impedance here. Much more than 10 kilo ohms. Because this inductor here for AC will have very high impedance. So this transistor will not work as an amplifier. Because any AC voltage here will not generate fluctuations of current here, because the impedance is very high. So we don't have any fluctuation of current here on the collector and we have no amplification. But now we can AC couple a diode here only in the AC path using a capacitor here. So voltage fluctuation on the base generates voltage fluctuation on the emitter. And now this voltage fluctuation can generate an AC current flowing through the diode. Very, very nice. And remember, as we are biasing this diode here with a constant current, I gain control, IGC, I gain control. This diode here is being biased, so it behaves like a resistor. The small signal resistance of the diode, we're gonna call it here, AirD. Small signal resistance of the diode. Any fluctuation here in the base generates fluctuation in the emitter, and generates AC current on the small signal resistance of the diode. And this fluctuation of current here is reflected back to the collector, and generates a signal here on the collector. So using this arrangement here, the gain of the stage now is controlled by the resistance of the diode, that is controlled by the current flowing in the diode. The DC current flowing in the diode. So changing the voltage here, gain control, we change the biasing current of the diode, and we change the gain of the stage. Before we understand the auto transformer here, let's think we have a constant resistance here. It becomes very easy to see that the collector current pumped to the resistor here, will generate a voltage here on the collector. So it's important to see that here is the impedance that matters to the collector. The impedance at this node here is what matters for the collector of the transistor. The gain of the stage here will be proportional to this impedance over the small signal resistance of the diode. So the gain of the stage will be approximated by a constant, a non-ideality constant here, times the impedance of the collector over the small signal resistance of the diode. That is a value proportional to the IGC. If we change the current, we change the small signal resistance and we change the gain of the stage. This is the gain from the base to the collector, from a signal applied here on the base, to this node here of the transistor. Now let's understand why I placed here an auto transformer. We can see that this capacitor here is shorting this node, so this node here actually is an AC ground, okay? And we have less turns here on the upper winding of the auto transformer than here on the bottom winding of the auto transformer. So as we're gonna connect here in that side a load that has 5th ON, we have the 5th ON connected to the lower part of the auto transformer. We call this the cold side. Cold side because it is connected to the GND, to the ground. Here on the collector we have a higher impedance. So here on the collector we have a higher impedance than 5th ON. And this will make sense now. To bias the transistor to 12mA, I choose here to have 0.5V here, 500mV of drop from the 8V supply here, and also to have here 0.5V. So the voltage available here on the collector is 7V. This voltage here is 7.5V. The biasing voltage is the average of voltage, the DC level. We have 7.5V here on the collector, 0.5V here on the emitter. So we see that the voltage excursion here can be around 7V. The transistor here can have its collector changed by 7V. And we know that the biasing current is 12mA. And for linearity reasons, I don't want the current to go to 0. I want at least 2mA of current always flowing on the transistor. So we can have 7V of variation and 10mA of variation. Because from 12, the minimum current possible here can be only 2mA. And of course guys, understanding the maximum current and voltage we can have here on the collector of the transistor, we can calculate the ideal load impedance that the collector needs to see. And of course, it is the voltage over the current. So the ideal Z collector will be 7V over 10mA. And of course, this is 700 ohms. Very interesting guys. In the case of connecting 5立 directly to the collector of the transistor, we would be saturating the transistor much earlier. Because the biasing condition will not have current enough to generate the maximum possible voltage drop here on the collector, to have the maximum output power. Very interesting. So using the proper impedance here on the collector, we're gonna have the maximum power on the output, because we are using all the current and all the voltage available on the biasing condition. Very, very, very interesting. And to have a transformation from 5立 to 700立, I choose here a ratio of 3 and here 7. I'm not reaching exactly 700. Probably we could use here 8, an N of 8. But I use it 7. All the other components here guys, this voltage divider here is setting a constant voltage on the base to have the constant voltage here on the emitter, the average voltage, the biasing voltage. We have this resistor here setting the 12 mA biasing current, the inductor is isolating the resistor here from AC fluctuations, and in this way we can deviate all the fluctuations of current in the emitter directly to this mouse signal resistance of the diode here. Very, very interesting. And the autotransformer is transforming the impedance, the low impedance output to a higher impedance here, a proper impedance for the functioning of the transistor. This voltage drop here, this resistance here guys, the 39立 resistor is only here to help a little more stabilizing the stage. Because think with me, if the temperature here changes and the transistor tries to sink more current, the voltage here will drop and the biasing voltage will also drop to compensate a little. So we use this technique where we get the voltage from the biasing divider from a voltage drop here of a series resistance. This needs to be a very low resistor to have very low voltage drop here, so we are not losing power here, available power of the signal, of the output signal. And here I use a 39 because I was already using 39 here on the emitter, so I use the same value here. And this resistor also works as a filter, isolating a little fluctuations of voltage noise from the power supply into the stage, and also fluctuations from this stage to the power supply. So if we have a lot of these stages in cascade, as an example, it's very nice to have this air-sea filter here to isolate a little more all these stages. Well guys, thank you for watching the video, I hope you like it. If so, subscribe to the channel, give it a thumbs up. And remember you can support the channel becoming a Patreon, link here on the description. I see you in the next video of Aulatronics.