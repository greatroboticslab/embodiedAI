YQeOmeMGpvE
https://www.youtube.com/watch?v=YQeOmeMGpvE
Unknown Category
Hello guys and welcome back to my channel. Today in this video I'm going to show you how to connect a GPS unit to a flight controller, explain how to configure it using Bitaflight, and address common issues that you might encounter. First of all, this video is kindly sponsored by VONT, a company that manufactures and sells high-quality but yet budget-friendly LED headlamps. The VONT Spark LED headlamp comes inside a twin pack, so you are getting two LED headlamps for $14. The device is powered using three AAA batteries which are not included, and according to VONT, they can provide you with up to 90 hours of continuous use. In addition, the headlamp is waterproof, as far as I can tell the lamp is very powerful, and it features seven different light modes. Now after the sponsored part, let's get back to the main topic. The first question that you might ask yourself is why should you even better adding a GPS unit to your quadcopter? And for that question there are a couple of answers. For a long range system such as this one, using a GPS is very crucial, since it enables you to monitor the direction and distance to the home point where you took off, so for example, in case you lose orientation, you can use this data. It also enables you to see the GPS coordinates on the OSD and also on your radio controller in case it supports telemetry, so in case you lose the quadcopter, you can use these coordinates in order to retrieve the quadcopter, and finally, in case you lose connectivity with the radio controller or in case you lost orientation and you don't know where to go, you can enable the GPS rescue feature, and the quadcopter is going to return to the home point using the settings on Bitaflight, which I'm going to show you shortly. As for freestyle and racing drones, using a GPS unit will enable you to monitor the speed of the drone, which is something that you might want to know. Of course, you can still use it for the purposes that I mentioned before, but in case you're not going to get very far, it's not going to make a lot of sense. In order to set up the GPS rescue feature, you need to obtain a GPS unit. There are many available options in the market, and most if not all are going to be compatible with your flight controller. Out of my personal experience, I can tell you that so far the GPS that worked best for me, and I had zero issues with, is the Matic M8Q, however this is a very pricey GPS that costs about $32, so if you're looking for a more budget-friendly but yet reliable solution, I recommend to go with the AJRC M80, which costs only $11. You should note that some GPS units like the AJRC M81 feature a built-in compass, but this feature is not required for Bitaflight in order to use the GPS rescue feature. In addition, in case you're going to use a Batien GPS, which is a very popular and budget-friendly option, I recommend to power the unit using 3.3V, as it is going to reduce the generated heat and extend its lifespan. The next thing that we need to do is to wire the GPS to the flight controller, and even though most of the GPS units are using a 4-pins GST connector, their pinout is not necessarily identical, so I recommend to refer to the user manual of the product that you have, in order to avoid any potential mistake. The GPS unit is going to be connected to a 3U-out port on the flight controller, and most likely be powered using 5V, and even though the soft serial option is supported, I recommend to avoid it if possible due to the high data transfer rates. Now I've got the 4-pins GST connector soldered to the flight controller. Pay attention that the soldering pads are well separated, you are not mixing the ground and plus 5V pads, you are using the same U-out port on the flight controller, and the RX port on the GPS is wired to the TX pad on the flight controller and vice versa, as otherwise the GPS is not going to be able to communicate with the flight controller. Now you can go ahead and connect the GPS unit, and pay attention when installing it that the antenna is facing the top side and it is not being blocked by any of the carbon fiber parts. Now let's go over the configuration procedure in Betaflight and the relevant settings. First, connect the flight controller to your computer, open up Betaflight, and connect it to your flight controller. Under the port section, you need to configure the GPS under sensor inputs on the U-out that you connected. I'm using U-out 6, so I'm going to choose the GPS option, and in addition, since I'm using the older batch of the AGLRC M80 GPS, I also need to select this baud rate, as otherwise the GPS is not going to function properly. Now we need to hit save and reboot in order to save the options. Head over to the configuration tab, enable the GPS switch, and set its protocol. In case you're not sure which protocol your GPS unit is using, I recommend to start with U-blocks, and in case the GPS is going to be configured properly after hitting save and reboot, the GPS icon on the top is going to be highlighted. So in case it's not working for you, I would start by checking that the protocol is configured properly, and then I would double check that the port is configured properly, and also RX is wired to TX on the flight controller and vice versa. And of course, you also need to make sure that the GPS is turned on, as on some flight controllers, the GPS is going to be powered also when the flight controllers is connected via USB, and on some cases, you will need to power it using an external battery. Pay attention that in case the GPS unit is only going to be powered when connecting an external battery, that the propellers are off, and preferably disconnect the video transmitter, or at least set it to pit mode, in order to prevent it from overheating on the bench. Now let's go over the different Betaflight GPS-related options. First of all, in order to access the GPS and fail-safe tabs on Betaflight, enable Expert mode. Then under the GPS tab, you'll be able to monitor the status of the GPS and the acquired satellites, and under the fail-safe tab, configure the GPS rescue feature. The default fail-safe procedure when entering fail-safe mode, either when the quadcopter is going to lose connectivity with the radio controller, or by flipping an auxiliary switch which is assigned to the fail-safe mode, is dropped, so the quadcopter is just going to fall out of the sky. You can also set it to land, and then the quadcopter hopefully is going to land slowly, and the relevant option to this video is the GPS rescue option. The relevant values which you can configure are the angle of the drone when it is heading back to you, the initial attitude in meters, which is relative to the home point, so when GPS rescue is going to be enabled, your drone is going to first climb to this attitude before heading back to you. The next option is the descent distance in meters, so when the drone is going to reach this distance from the home point, it is going to start descending. Next you can adjust the ground speed in meters per second, adjust the throttle values, and in my experience the default settings work pretty well, set the ascend and descend rates in meters per second, adjust the number of minimum satellites which are required for the GPS rescue option to be enabled. Normally I would suggest leaving it on 8 in case you are not having any GPS issues, as the GPS is going to be more accurate, but in case you encounter difficulties and you don't have this amount of satellites during most of the flight, you can also reduce this number to 5, as it in my experience works well as well. The next related option is going to enable you to arm your drone, even when the minimum number of satellites requirement is not going to be met, but pay attention that in case you are going to take off without a GPS fix, the GPS rescue feature is not going to be available during your flight. The next option is attitude mode, in case you are going to set it to maximum attitude, your drone is going to climb to the maximum attitude that you reached during your flight, plus 15 meters. In case you are going to set it to fixed attitude, it's going to climb to the value that we previously set, and again it is relative to the home point, and in case you would like to maintain the current attitude of the drone when entering fail safe mode, set the option to current attitude. Finally, the GPS rescue sanity checks can be turned off, and then the GPS rescue feature is going to be enabled regardless of the minimum satellites, and even when you took off without a GPS fix, and pay attention that in case you are going to turn it off, and enter fail safe mode, you might lose your drone, as the GPS is not going to be accurate, and it is just going to fly away. You can also set this option to fail safe only, which is probably the recommended option, as the sanity checks are going to take place when entering fail safe mode, and they are only going to be overridden when triggering the GPS rescue feature using an auxiliary switch, which is good because otherwise, in case you are going to set the sanity checks to on, and trigger the GPS rescue feature using an auxiliary switch, the drone is just going to disarm itself, and fall out of the sky, in case one of the sanity checks requirement is not met. In addition, you should note that under stage 2 settings, you can adjust the amount of time that is going to pass when the signal loss is going to occur, so for example the default settings is far, so it means that after 0.4 seconds the fail safe procedure is going to take place, so in case you would like to make sure that the GPS rescue feature is going to be enabled right away, you can either set this value to 0, or adjust the channel fallback settings, which are the values that are going to be used during guard time, so that the GPS rescue feature is going to be triggered immediately. Now by the way, another thing that you should pay attention to, is that the accelerometer is turned on, and the gyro board is calibrated, and in case you would like the attitude values to be much more accurate, I recommend to use a flight controller with a built-in barometer. Finally, the last step is to configure the relevant OSD elements. The supported elements are the home distance, the home direction, the drone speed, the GPS coordinates, the attitude, and the number of satellites. The GPS coordinates are going to help you to find your drone in case of a crash, so you can use Google Maps in order to find it, and I also recommend that in case your radio receiver supports telemetry, to enable the telemetry option, and then your GPS coordinates can also be recorded on your radio transmitter. Your next step in order to make sure that everything is configured properly, is to head outdoors with your drone and radio controller. After getting a GPS fix, arm it, walk for 100 meters with the drone and radio controller in your hands, and by the way, 100 meters is the default minimum distance to home value, so in case a fail-safe is going to occur, or you are going to activate the GPS rescue feature when the drone is less than 100 meters from you, the drone is just going to disarm itself, and this value can be adjusted using the Betaflight CLI to 50 meters, but I recommend to leave it on the default value of 100 meters. After you reach 100 meters, just simply turn off your radio controller, and if everything is configured properly, the motors are going to start spinning faster, indicating that the drone is trying to return to the home point. After that, again, in order to make sure that everything is configured and working properly, I recommend to test the rescue feature using an auxiliary switch, and as you can see, after flipping it, the drone is starting to get back to the home point. Finally, before wrapping up this video, remember that the GPS rescue feature is not working like a DJI drone, so once you regain connectivity with your radio controller, or in case, for example, you lost video signal, and the drone is getting back to you, and you can see it, regain control, and land it safely. Now, by the way, you should note that when you are going to use the GPS unit for the first time, it might take a while until you are going to get a GPS lock, so if possible, power it using the 5V USB port, leave it outside for maybe 10-15 minutes, and next time that you are going to use the GPS unit, the GPS lock is going to be much quicker. Anyway, that's going to be it for my Betaflight GPS rescue guide, I hope it was informative enough, but of course, if you have any questions or issues that you encounter, let me know down below, and I will do my best to help you out. I would like to thank Vaunt for sponsoring this video, and I wish you all happy flying. See you on my next videos, and goodbye. K K , .