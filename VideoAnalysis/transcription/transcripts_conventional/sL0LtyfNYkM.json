{"video_id": "sL0LtyfNYkM", "url": "https://www.youtube.com/watch?v=sL0LtyfNYkM", "title": "sL0LtyfNYkM", "category": "Unknown Category", "fps": null, "segments": [{"start": 0.0, "end": 10.44, "text": "In this example we are looking to determine the state space representation of this circuit."}, {"start": 10.44, "end": 17.0, "text": "The input here is Ia, there is a current being applied there, and the output is the voltage"}, {"start": 17.0, "end": 19.240000000000002, "text": "VL across this inductor."}, {"start": 19.240000000000002, "end": 23.38, "text": "We have two inductors, a capacitor and a resistor."}, {"start": 23.38, "end": 28.16, "text": "For the state space representation the first question is what are the state variables?"}, {"start": 28.16, "end": 33.92, "text": "Take a minute to determine which state variables you would choose for this specific circuit."}, {"start": 33.92, "end": 40.019999999999996, "text": "Again, a good first attempt is to look at elements in the circuit that can store energy."}, {"start": 40.019999999999996, "end": 43.72, "text": "In this particular circuit we have three elements that can store energy."}, {"start": 43.72, "end": 48.72, "text": "We have two inductors that will store energy in the form of a magnetic field, and that"}, {"start": 48.72, "end": 51.400000000000006, "text": "depends on the current through these inductors."}, {"start": 51.400000000000006, "end": 56.74, "text": "And we have one capacitor that will store energy in the form of an electrical field."}, {"start": 56.74, "end": 60.92, "text": "And that energy depends on the voltage across that capacitor."}, {"start": 60.92, "end": 65.7, "text": "So a good choice for the state variables would be the current through these inductors and"}, {"start": 65.7, "end": 69.64, "text": "the voltage across the capacitor."}, {"start": 69.64, "end": 74.7, "text": "So let's define now the current through the inductor here."}, {"start": 74.7, "end": 76.96000000000001, "text": "Let's call this I2."}, {"start": 76.96000000000001, "end": 79.74000000000001, "text": "Let's call the current through this inductor here I1."}, {"start": 79.74, "end": 84.8, "text": "This is L1, so I1, L2, I2."}, {"start": 84.8, "end": 89.69999999999999, "text": "Let's call the voltage across this capacitor Vc."}, {"start": 89.69999999999999, "end": 100.67999999999999, "text": "And let's define the current through the capacitor as Ic, pointing downwards."}, {"start": 100.68, "end": 106.26, "text": "We can now define our state variables as the current through the inductor here and there,"}, {"start": 106.26, "end": 108.5, "text": "and the voltage across the capacitor."}, {"start": 108.5, "end": 112.0, "text": "So let's call our state variables X."}, {"start": 112.0, "end": 114.28, "text": "And you're going to call them going this way."}, {"start": 114.28, "end": 116.74000000000001, "text": "The first element here is I2."}, {"start": 116.74000000000001, "end": 119.22, "text": "The second element is Vc."}, {"start": 119.22, "end": 121.74000000000001, "text": "And the last element is I1."}, {"start": 121.74, "end": 127.6, "text": "The current across this inductor, the voltage across this capacitor, and the current across"}, {"start": 127.6, "end": 129.16, "text": "the other inductor."}, {"start": 129.16, "end": 130.1, "text": "Very well."}, {"start": 130.1, "end": 132.0, "text": "The first step is done."}, {"start": 132.0, "end": 135.7, "text": "Now we need to find equations for the derivative of these states."}, {"start": 135.7, "end": 138.74, "text": "Remember that we're looking for the state space representation."}, {"start": 138.74, "end": 145.8, "text": "And this will be done in the form of X dot equals to Ax plus B times U."}, {"start": 145.8, "end": 150.32000000000002, "text": "is the input, which in this case is Ia."}, {"start": 150.32000000000002, "end": 151.32000000000002, "text": "What do we see here?"}, {"start": 151.32000000000002, "end": 155.46, "text": "We see X dot, which is a function of X itself."}, {"start": 155.46, "end": 158.02, "text": "So it now needs to come up with three equations."}, {"start": 158.02, "end": 163.14000000000001, "text": "One for I2, one for Vc, one for I1, that will follow this format."}, {"start": 163.14000000000001, "end": 167.94, "text": "Where we have the derivative of I2 will be a function of all other states."}, {"start": 167.94, "end": 170.84, "text": "The derivative of Vc, a function of all states."}, {"start": 170.84, "end": 175.46, "text": "The derivative of I1, a function of all the other states."}, {"start": 175.46, "end": 179.98000000000002, "text": "And it is also important to note that these equations will be the derivative of these"}, {"start": 179.98000000000002, "end": 180.98000000000002, "text": "state variables."}, {"start": 180.98000000000002, "end": 183.24, "text": "They only depend on the states."}, {"start": 183.24, "end": 186.68, "text": "They do not depend on the derivative of the states."}, {"start": 186.68, "end": 190.34, "text": "So we need to also ensure that the equations that are going to develop now will follow the"}, {"start": 190.34, "end": 191.42000000000002, "text": "same format as here."}, {"start": 191.42000000000002, "end": 196.3, "text": "So that will make everything easier than when we have to put everything in a matrix form."}, {"start": 196.3, "end": 198.10000000000002, "text": "Okay, so let's start."}, {"start": 198.10000000000002, "end": 203.10000000000002, "text": "Now let's start by looking for a equation that gives us the derivative of the first state"}, {"start": 203.1, "end": 207.34, "text": "I2 as a function of other states."}, {"start": 207.34, "end": 208.56, "text": "What can we conclude here?"}, {"start": 208.56, "end": 213.14, "text": "Can we somehow link I2 and Vc, for example?"}, {"start": 213.14, "end": 218.38, "text": "Or can we link I2 and I1 and Vc?"}, {"start": 218.38, "end": 224.28, "text": "Well clearly, it would be easy here to link I2 and Vc because the voltage across the inductor"}, {"start": 224.28, "end": 229.01999999999998, "text": "and the voltage across the capacitor are exactly the same."}, {"start": 229.02, "end": 231.02, "text": "What is the voltage across the inductor?"}, {"start": 231.02, "end": 241.22, "text": "The voltage across the inductor, L2, is L2 Di2 Dt."}, {"start": 241.22, "end": 246.64000000000001, "text": "And the voltage across the capacitor is simply Vc."}, {"start": 246.64000000000001, "end": 247.96, "text": "Couldn't be easier than that."}, {"start": 247.96, "end": 257.44, "text": "Now we have Di2 over Dt equals to 1 over L2 times Vc."}, {"start": 257.44, "end": 260.46000000000004, "text": "Here we have the expression we need for I2."}, {"start": 260.46000000000004, "end": 266.5, "text": "The derivative of I2 is a function of other states."}, {"start": 266.5, "end": 273.06, "text": "If we call this vector here x1, x2, and x3."}, {"start": 273.06, "end": 277.68, "text": "So I2 is x1, Vc is x2, I1 is x3."}, {"start": 277.68, "end": 279.4, "text": "How can you rewrite this expression?"}, {"start": 279.4, "end": 286.78, "text": "Now we have x1 dot equals to 1 over L2 times Vc."}, {"start": 286.78, "end": 290.2, "text": "Vc becomes x2."}, {"start": 290.2, "end": 301.44, "text": "And here we have the first equation needed for this manipulation."}, {"start": 301.44, "end": 303.09999999999997, "text": "Now let's look at Vc."}, {"start": 303.09999999999997, "end": 304.48, "text": "We need a similar expression."}, {"start": 304.48, "end": 309.08, "text": "We need the derivative of Vc equals to a function of other states."}, {"start": 309.08, "end": 310.56, "text": "Now let's think about this problem."}, {"start": 310.56, "end": 316.9, "text": "We want something that depends on the derivative of Vc because that's one of our states."}, {"start": 316.9, "end": 317.9, "text": "What is that?"}, {"start": 317.9, "end": 321.56, "text": "Something that is proportional to the derivative of a voltage in a capacitor."}, {"start": 321.56, "end": 324.0, "text": "Well that's the current through the capacitor."}, {"start": 324.0, "end": 326.58, "text": "So let's now relate Ic and Vc."}, {"start": 326.58, "end": 328.46, "text": "Ic is not one of our states."}, {"start": 328.46, "end": 330.4, "text": "Vc is."}, {"start": 330.4, "end": 339.14, "text": "We can write that the current through this capacitor, Ic, is C times dVc dt."}, {"start": 339.14, "end": 340.03999999999996, "text": "Aha!"}, {"start": 340.03999999999996, "end": 342.34, "text": "Here is the derivative of Vc."}, {"start": 342.34, "end": 344.65999999999997, "text": "The derivative of the second state."}, {"start": 344.66, "end": 347.32000000000005, "text": "Now what is Ic?"}, {"start": 347.32000000000005, "end": 349.32000000000005, "text": "Ic is not one of our states."}, {"start": 349.32000000000005, "end": 351.32000000000005, "text": "We need to get rid of it."}, {"start": 351.32000000000005, "end": 355.1, "text": "It is an internal variable."}, {"start": 355.1, "end": 361.1, "text": "We can relate Ic to I2, to I1 and to the input Ia."}, {"start": 361.1, "end": 362.32000000000005, "text": "That's easy."}, {"start": 362.32000000000005, "end": 367.90000000000003, "text": "We can just look at the current at this node A here."}, {"start": 367.9, "end": 373.56, "text": "And do the sum of all currents at node A."}, {"start": 373.56, "end": 376.56, "text": "What do we have?"}, {"start": 376.56, "end": 378.56, "text": "We have the current going in."}, {"start": 378.56, "end": 380.56, "text": "That is Ia."}, {"start": 380.56, "end": 386.56, "text": "And this is equal to all other currents coming out of that node."}, {"start": 386.56, "end": 393.22, "text": "That is I2 plus I1 plus Ic."}, {"start": 393.22, "end": 398.66, "text": "Now notice that this equation is very helpful because the only thing here that we can use"}, {"start": 398.66, "end": 399.66, "text": "is Ic."}, {"start": 399.66, "end": 402.22, "text": "And this is exactly what you want to replace there."}, {"start": 402.22, "end": 404.22, "text": "Ia is the input."}, {"start": 404.22, "end": 406.22, "text": "I2 and I1 are states."}, {"start": 406.22, "end": 407.22, "text": "Perfect."}, {"start": 407.22, "end": 418.88000000000005, "text": "Now Ic is simply Ia minus I1 minus I2."}, {"start": 418.88000000000005, "end": 420.88000000000005, "text": "We can now replace this here."}, {"start": 420.88, "end": 443.44, "text": "And we will end up with dVc dt equals to 1 over c times Ic Ia minus I1 minus I2."}, {"start": 443.44, "end": 445.24, "text": "Good."}, {"start": 445.24, "end": 450.2, "text": "Now let's represent this expression using the state-space representation here."}, {"start": 450.2, "end": 456.2, "text": "dVc dt becomes x2 dot because Vc is x2."}, {"start": 456.2, "end": 460.09999999999997, "text": "So this is x."}, {"start": 460.09999999999997, "end": 464.59999999999997, "text": "This is x2 dot."}, {"start": 464.59999999999997, "end": 466.96, "text": "1 over c is a constant."}, {"start": 466.96, "end": 469.3, "text": "Ia is an input."}, {"start": 469.3, "end": 470.3, "text": "We'll need to change it."}, {"start": 470.3, "end": 475.86, "text": "I1 is x3."}, {"start": 475.86, "end": 478.64, "text": "And I2 is x1."}, {"start": 478.64, "end": 488.88, "text": "And here we have the second expression for our state-space representation."}, {"start": 488.88, "end": 490.36, "text": "We are missing one equation."}, {"start": 490.36, "end": 495.64, "text": "Now we are looking for an equation for the derivative of I1 as a function of other states."}, {"start": 495.64, "end": 497.64, "text": "How can we do that?"}, {"start": 497.64, "end": 502.64, "text": "Now we could apply Kirchhoff's law to this loop."}, {"start": 502.64, "end": 506.64, "text": "And do the sum of all voltages there."}, {"start": 506.64, "end": 514.36, "text": "If you do that, you will see that this voltage across here will be a function of I1 because that's the voltage across the resistor."}, {"start": 514.36, "end": 520.36, "text": "will be a function of Vc which is another state."}, {"start": 520.36, "end": 526.6, "text": "And this makes things very convenient because the voltage across the inductor is also a function of I1, a function of one of our states."}, {"start": 526.6, "end": 531.6, "text": "So if you now do Kirchhoff's law in this loop here, what do you have?"}, {"start": 531.6, "end": 552.84, "text": "We have that R times I1 plus the voltage across this inductor is L1 Di1, aha, Dt minus Vc equals to 0."}, {"start": 552.84, "end": 557.84, "text": "Why minus Vc? Because the current through Vc is pointing down."}, {"start": 557.84, "end": 562.84, "text": "So when you go counterclockwise here, you are going against the current through Vc."}, {"start": 562.84, "end": 564.84, "text": "Hence the negative sign."}, {"start": 564.84, "end": 571.84, "text": "This equation is perfect because we have everything here as a function of the states."}, {"start": 571.84, "end": 575.84, "text": "Now we can isolate Di1, Dt."}, {"start": 575.84, "end": 590.84, "text": "And Di1, Dt is simply 1 over L1 times Vc minus Ri1."}, {"start": 590.84, "end": 595.84, "text": "Now we can write this in state space."}, {"start": 595.84, "end": 599.84, "text": "Di1, Dt becomes x3 dot."}, {"start": 599.84, "end": 603.84, "text": "1 over L1."}, {"start": 603.84, "end": 611.84, "text": "So Vc is x2 minus R times I1 which is x3."}, {"start": 611.84, "end": 617.84, "text": "Here we have the third expression for our circuit."}, {"start": 617.84, "end": 622.84, "text": "Third state represented as a function."}, {"start": 622.84, "end": 627.84, "text": "The third state's derivative represented as a function of other states."}, {"start": 627.84, "end": 631.84, "text": "Alright, now we have these three expressions we need to define our output."}, {"start": 631.84, "end": 637.84, "text": "Our output here is VL, is the voltage across this inductor."}, {"start": 637.84, "end": 641.84, "text": "Now we need an expression for the output as well."}, {"start": 641.84, "end": 643.84, "text": "Let's write it here."}, {"start": 643.84, "end": 646.84, "text": "How do we find that one?"}, {"start": 646.84, "end": 650.84, "text": "We want the output to be a function of the states."}, {"start": 650.84, "end": 653.84, "text": "Not the derivative of the states, just the states."}, {"start": 653.84, "end": 656.84, "text": "Well we can actually do the same Kirchhoff's law that we did here."}, {"start": 656.84, "end": 658.84, "text": "The exact same."}, {"start": 658.84, "end": 663.84, "text": "But instead of writing L1, Di1, Dt."}, {"start": 663.84, "end": 668.84, "text": "This whole thing here is in fact VL, is the output."}, {"start": 668.84, "end": 679.84, "text": "So we can reuse that expression and rewrite this as Ri1, the voltage across the resistor,"}, {"start": 679.84, "end": 690.84, "text": "plus the voltage across the inductor, minus Vc, equals to zero."}, {"start": 690.84, "end": 698.84, "text": "So VL, the output, becomes Vc minus Ri1."}, {"start": 698.84, "end": 713.84, "text": "In state space, or using the state space variables, we have VL equals to Vc, x2, minus R times I1, which is xd."}, {"start": 713.84, "end": 714.84, "text": "And there it is."}, {"start": 714.84, "end": 717.84, "text": "That's the expression for the output."}, {"start": 717.84, "end": 724.84, "text": "Now that we have that, I'm going to erase everything, save these equations,"}, {"start": 724.84, "end": 728.84, "text": "and you're going to represent them in a matrix format."}, {"start": 728.84, "end": 734.84, "text": "Very well, so here we are with all the expressions we derived before, x1 dot, x2 and x3 dot."}, {"start": 734.84, "end": 736.84, "text": "And VL, the output."}, {"start": 736.84, "end": 743.84, "text": "The output, which is VL, that is the same as Y, in the standard form for state space."}, {"start": 743.84, "end": 747.84, "text": "Now let's write these equations in the standard state space representation."}, {"start": 747.84, "end": 753.84, "text": "The first one will be x dot, equals to A times x, plus B times U."}, {"start": 753.84, "end": 758.84, "text": "U is the input to the system, which is IA."}, {"start": 758.84, "end": 782.84, "text": "X dot is x1 dot, x2 dot, x3 dot, is A times x, x1, x2, x3, plus B times U."}, {"start": 782.84, "end": 786.84, "text": "Which is IA."}, {"start": 786.84, "end": 787.84, "text": "What goes in there?"}, {"start": 787.84, "end": 789.84, "text": "So let's look at x1 dot."}, {"start": 789.84, "end": 791.84, "text": "For x1 dot, we're looking at this expression here."}, {"start": 791.84, "end": 796.84, "text": "x1 dot only depends on x2, and it has this coefficient 1 over L2."}, {"start": 796.84, "end": 803.84, "text": "So this is 0, 1 over L2, and 0."}, {"start": 803.84, "end": 807.84, "text": "Now let's look at x2 dot."}, {"start": 807.84, "end": 810.84, "text": "x2 dot depends on..."}, {"start": 810.84, "end": 816.84, "text": "The input depends on x3 and x1."}, {"start": 816.84, "end": 823.84, "text": "So we have for x1, we have negative 1 over C."}, {"start": 823.84, "end": 831.84, "text": "x2 is 0, and x3 is also negative 1 over C."}, {"start": 831.84, "end": 834.84, "text": "We'll do the output later."}, {"start": 834.84, "end": 837.84, "text": "So now let's complete the third row here."}, {"start": 837.84, "end": 842.84, "text": "That's for x3 dot, and this depends on x2 and x3."}, {"start": 842.84, "end": 845.84, "text": "So there is no x1, this is 0."}, {"start": 845.84, "end": 854.84, "text": "For x2 we have 1 over L1, and for x3 we have negative R over L1."}, {"start": 854.84, "end": 860.84, "text": "Now let's look at the input."}, {"start": 860.84, "end": 867.84, "text": "The input doesn't show in x1 dot, it only shows in x2 dot."}, {"start": 867.84, "end": 870.84, "text": "So for x1 dot we have 0."}, {"start": 870.84, "end": 875.84, "text": "For x2 dot we have 1 over C."}, {"start": 875.84, "end": 878.84, "text": "I will show here for this part of the equation."}, {"start": 878.84, "end": 881.84, "text": "And for x3 dot we have 0."}, {"start": 881.84, "end": 884.84, "text": "Okay, so this is our first equation."}, {"start": 884.84, "end": 886.84, "text": "Now we need an equation for the output."}, {"start": 886.84, "end": 893.84, "text": "The equation for the output, which is y, will be C times x plus D times U."}, {"start": 893.84, "end": 917.84, "text": "U is the input IA."}, {"start": 917.84, "end": 919.84, "text": "So what goes in these matrices now?"}, {"start": 919.84, "end": 921.84, "text": "Now let's look at the output equation."}, {"start": 921.84, "end": 926.84, "text": "We have VL that depends on x2 and x3."}, {"start": 926.84, "end": 929.84, "text": "It doesn't depend on x1, so the first element is 0."}, {"start": 929.84, "end": 933.84, "text": "It depends on x2, the coefficient here is 1."}, {"start": 933.84, "end": 937.84, "text": "And it depends on x3, the coefficient is negative R."}, {"start": 937.84, "end": 943.84, "text": "We see that there is no input here, there is no IA."}, {"start": 943.84, "end": 947.84, "text": "So matrix D is simply 0."}, {"start": 947.84, "end": 952.84, "text": "And here we have the first and the second equation."}, {"start": 952.84, "end": 956.84, "text": "And this is the state-space model for this particular circuit."}, {"start": 956.84, "end": 968.84, "text": "Dual problem on x2 dot z5 dot x3."}, {"start": 968.84, "end": 978.84, "text": "May 6 to 5,500 let's move."}]}