1
00:00:00,720 --> 00:00:08,000
Hello friends welcome to the IoT projects in this video we will make smart home automation IoT

2
00:00:08,000 --> 00:00:15,520
project using ESP32, Dwin HMI display, relay module and few sensors.

3
00:00:17,360 --> 00:00:23,440
Using this project you can easily control your AC home appliances like lights, fan,

4
00:00:23,440 --> 00:00:32,720
AC, TV etc and also monitor the real-time sensor data. So for the demonstration purpose I am using

5
00:00:32,720 --> 00:00:42,880
DST22 temperature and humidity sensor and LDR sensor but you can also use DST11 sensor which is more

6
00:00:42,880 --> 00:00:52,000
cheaper. This is a 7 inch Dwin HMI touch display here you can monitor the temperature humidity

7
00:00:52,000 --> 00:01:00,320
and LDR sensor real-time sensor value. You can also use this project as a smart thermostat controller

8
00:01:00,320 --> 00:01:08,960
where you can turn on and off the devices based on a sensor threshold value like turning on fan or AC

9
00:01:08,960 --> 00:01:17,440
automatically when the temperature value reaches a defined threshold value. Below sensor value widget

10
00:01:17,440 --> 00:01:26,400
you can see the four control buttons to control your home appliances. You can click on the toggle switch

11
00:01:26,400 --> 00:01:34,960
to turn on and off the relay and here you can attach four different AC appliances to the relay module and

12
00:01:34,960 --> 00:01:43,840
in this demo I haven't connected home appliances to the relay but you can easily connect 220 to 250 volt

13
00:01:43,840 --> 00:01:52,720
AC appliances and control them using this project. This project is a local area network based project in which

14
00:01:52,720 --> 00:01:58,240
you don't need an active internet connection to control and monitor your home appliances.

15
00:01:59,120 --> 00:02:07,120
Here I am configuring the ESP32 web server in soft app mode. So you just connect to the ESP32 smart home

16
00:02:07,120 --> 00:02:14,800
Wi-Fi access point by entering its password then enter the IP address of the ESP32 board on your

17
00:02:14,800 --> 00:02:22,160
web browser to monitor the real-time sensor data and control your appliances remotely using your

18
00:02:22,160 --> 00:02:29,760
smartphone or PC. So you don't need any Wi-Fi connection to control and monitor your home appliances.

19
00:02:29,760 --> 00:02:39,600
During this video I have shared a complete circuit diagram, Arduino source code, doing display GUI designing

20
00:02:39,600 --> 00:02:44,560
process etc. So you can easily make this project at your home.

21
00:02:47,440 --> 00:02:58,560
Although you can make this project easily using ESP32 relay module, DHT sensor and LDR sensor but it is better to use

22
00:02:58,560 --> 00:03:07,200
custom PCB for this project to avoid any loose connection. So I have designed a custom PCB for this project.

23
00:03:07,760 --> 00:03:15,920
You can go to the download links to download the project Gerber file and order the PCB directly from

24
00:03:15,920 --> 00:03:25,600
pcbware.com. pcbware.com is one-stop solution for your all the PCB needs like PCB prototyping,

25
00:03:25,600 --> 00:03:34,240
SMD stencil, PCB assembly, etc. Currently they have moved to a new factory and offering you up to 20%

26
00:03:34,240 --> 00:03:46,000
discount on 4 layer PCB and 6 layer PCB. PCBWare provides high quality material TG150 to 160 but keeps the same

27
00:03:46,000 --> 00:03:53,440
price with TG130 to 140. So get your first prototype PCB ready from pcbware.com.

28
00:03:53,440 --> 00:04:01,680
The link is in the description below. Just click on the PCB instant code tab then click on quick order PCB.

29
00:04:02,400 --> 00:04:08,960
Now upload your Gerber file. Select your preferred shipping method and place your order.

30
00:04:12,480 --> 00:04:20,240
Now let's assemble all the components and for that you have to connect the GST22 or GST11 sensor,

31
00:04:20,240 --> 00:04:29,920
LDR sensor and the relay module to the ESP32 board. So first we interface the sensor and then relays and

32
00:04:29,920 --> 00:04:38,960
make a serial communication to the display using RX2 and TX2 pins on the display module. Now connect the

33
00:04:38,960 --> 00:04:48,560
sensor relay module and doing HMI display to the ESP32 as shown here. Also provide the AC source to your home

34
00:04:48,560 --> 00:04:57,520
appliances as shown in the circuit diagram. Now let us visit the official website of dwingglobal.com.

35
00:04:58,080 --> 00:05:06,640
You can see the Dwing company making a wide range of high quality touch screen for android LCD, HDMI LCD and

36
00:05:06,640 --> 00:05:15,120
Linux LCD display. Under the download section go to the tools and download the DGUS Dwing graphic

37
00:05:15,120 --> 00:05:25,440
utilized software that is DGUS software and XR21X driver. The driver is for HDL662B board. We don't need to

38
00:05:25,440 --> 00:05:33,680
install this DGUS software. Under this DGUS folder you can see some executable files which includes tools

39
00:05:33,680 --> 00:05:42,480
like ICL tool, front generating tool, image resizing tool etc. inside this DGUS software.

40
00:05:42,480 --> 00:05:51,920
Inside XR21X folder there are the driver files. You need to install the driver on your PC to establish

41
00:05:51,920 --> 00:06:00,880
the communication between HDL662B and your PC. Double click the executable file to launch the

42
00:06:00,880 --> 00:06:07,200
driver installer. Now click on the install to install the driver on your windows PC.

43
00:06:07,200 --> 00:06:17,440
After installing the DGUS software and the driver open the DGUS.exe file. By default the software

44
00:06:17,440 --> 00:06:27,200
language is in Chinese. So go to the settings and change it to English. Now click on new to create a new

45
00:06:27,200 --> 00:06:34,960
project. Select the screen resolution of 800 by 480 pixels. Choose your project folder path.

46
00:06:35,920 --> 00:06:42,000
In this demonstration I am creating a new folder doing smart home and selecting the same folder path.

47
00:06:43,120 --> 00:06:50,400
Now you need to prepare images for your project. Here I have already created images and icons for my

48
00:06:50,400 --> 00:07:03,040
project. You can name your project images and icon folder as 32, 42, 46, 56, 58, 62, 64 and so on.

49
00:07:03,760 --> 00:07:11,840
Because we need to create an ICL file of these pictures later and memory is divided into different section.

50
00:07:11,840 --> 00:07:24,640
In this tutorial under 32 folder I have placed images of my UI. Make sure that your image resolution is 800 by 480 pixels

51
00:07:24,640 --> 00:07:35,920
and is in .bmp format. Under the 46 folder I have placed icon files. Similarly on the 62 folder I have placed the

52
00:07:35,920 --> 00:07:45,200
number icon files. Now add your project images from 32 folder. Here I have a single image. We should create

53
00:07:45,200 --> 00:07:54,800
ICL files of our images. So for that go to the settings menu and click on DGUS. After a new window will pop up.

54
00:07:54,800 --> 00:08:01,360
Now click on ICL tool. Here you need to select the images and generate the ICL file.

55
00:08:02,320 --> 00:08:10,800
Save this file with the name 32 under the doing set folder. Similarly choose the button icon and generate

56
00:08:10,800 --> 00:08:22,880
the ICL file as 46.icl under the same doing set folder. Finally select the number icons and generate the

57
00:08:22,880 --> 00:08:28,400
62.icl file under the same doing under score set folder.

58
00:08:28,400 --> 00:08:38,480
We have successfully generated 3 ICL files. Now it's time to add functions to our UI. Here select the

59
00:08:38,480 --> 00:08:49,440
00.bmp image then click on icon display menu. Let's create an artistic variables. Select the area and here

60
00:08:49,440 --> 00:08:58,320
you need to assign the vp address for this module. I am choosing 1000 as a vp address and selecting your

61
00:08:58,320 --> 00:09:09,920
icon file as 62. Now select the start icon as 0. Under the variable byte choose the integer 2 byte and integer

62
00:09:09,920 --> 00:09:14,880
digit as 2. Set the initial value as 0.

63
00:09:17,680 --> 00:09:25,120
You can also set the initial number as a highest value of your sensor data and resize the artistic variable

64
00:09:26,080 --> 00:09:35,200
according to your need and requirement. Now copy this module and place them on the humidity and LDR sensor

65
00:09:35,200 --> 00:09:45,520
widget. But don't forget to change their vp address to 1500 and 2000 respectively. You can also change the

66
00:09:45,520 --> 00:09:55,040
variable type if needed. Now let's design our toggle switch button for controlling appliances like light, fan,

67
00:09:55,600 --> 00:10:06,800
AC, TV etc. Go to icon display menu and choose the var icon display. Select the area where you want to display your icons.

68
00:10:06,800 --> 00:10:16,800
As always resize the module as your needs and choose the vp address as 2500.

69
00:10:19,440 --> 00:10:28,080
Choose the icon ICL file as 46.icl. When the value is minimum, select the off icon that is 0 icon

70
00:10:28,800 --> 00:10:39,200
and similarly set the maximum value as 1 and select the on icon that is 1 icon and keep the display module as

71
00:10:40,240 --> 00:10:50,720
transparent. Now copy the var icon module and paste them onto fan, TV, AC, controller widget area and change

72
00:10:50,720 --> 00:11:03,440
their vp addresses. For light the vp address is 2500, for fan 3000 and for tv 3500 and for AC 4000.

73
00:11:06,320 --> 00:11:14,560
Now from the touch control menu select the increment adjustment module. You can resize the module then select the data

74
00:11:14,560 --> 00:11:27,120
auto uploading. Click on no button effect. Give the same vp address as 2500. Click on low byte. Select the

75
00:11:27,120 --> 00:11:37,600
adjust method as plus plus and over limit operation as a cycle. Similarly adjust the step length to 1 and

76
00:11:37,600 --> 00:11:48,080
upper limit to 1. Finally set the touch effect as disposable setting. Also copy and paste the incremental

77
00:11:48,080 --> 00:11:57,920
adjustment module and set their vp addresses accordingly. Finally we have completed adding modules to our UI.

78
00:11:57,920 --> 00:12:07,280
Now click on save and generate to generate 13 touch file, 14 show file and 22 config bin files.

79
00:12:08,240 --> 00:12:16,480
Now you can preview the UI of our project from the display menu. Click on preview from the first page and you can see

80
00:12:17,040 --> 00:12:25,600
our newly created UI in a pop-up window. Here we cannot see the artistic variable and button icon module.

81
00:12:27,440 --> 00:12:31,600
They will be visible when we upload the project to our display.

82
00:12:31,600 --> 00:12:40,320
So let's quickly do that. If you don't know how to upload the project to this touch display then follow

83
00:12:40,320 --> 00:12:47,520
my previous getting started tutorial in which I have explained two processes to upload the project to

84
00:12:47,520 --> 00:12:57,600
our display using HD card and T5L download tool. So this is the result of our newly created UI after

85
00:12:57,600 --> 00:13:08,960
uploading the project file to the display. As in this project we are sending data to ESP32 web server as

86
00:13:08,960 --> 00:13:19,040
well as on the Dwin HMI display. And we are also receiving the data from both web server and display to the ESP32 module.

87
00:13:19,040 --> 00:13:29,680
So for sending purpose I am sending the frame with a VP address of that sensor value and that value is updating on the display.

88
00:13:29,680 --> 00:13:35,680
Similarly for receiving I am checking the serial receive frame for a particular button

89
00:13:35,680 --> 00:13:44,160
and that value of the program. So let's see if you can see the code and select the code and select the code.

90
00:13:44,160 --> 00:13:52,000
Most of the code are similar to our previous project. You can watch those videos if you are viewing our videos for the first time.

91
00:13:52,560 --> 00:14:03,120
I have already explained them in detail. Now select your ESP32 dev kit and correct COM port to upload this program into your ESP32 board.

92
00:14:03,120 --> 00:14:12,800
Click on the upload button to upload the code and after successful upload of this program you can see this project into the action.

93
00:14:13,760 --> 00:14:18,160
Now you can also see the real-time sensor data on the Dwin HMI display.

94
00:14:19,120 --> 00:14:25,440
You can see the value increasing and decreasing when the light source is moved onto the LDR sensor.

95
00:14:25,440 --> 00:14:38,480
This is a single page smart home UI where you can monitor the sensor data and control appliances from the same screen.

96
00:14:39,600 --> 00:14:44,720
You can control your home appliances connected through this four channel relay module.

97
00:14:44,720 --> 00:14:46,640
You can also see the user's mobile device.

98
00:14:46,640 --> 00:14:51,440
We have also configured the ESP32 web server in soft IP mode.

99
00:14:51,440 --> 00:14:58,480
So you just connect the smartphone to ESP32 smart home Wi-Fi access point by entering its password.

100
00:14:59,200 --> 00:15:07,120
Then enter the IP address of the ESP board on your browser to monitor real-time sensor data and control your

101
00:15:07,120 --> 00:15:11,520
appliances remotely using your smartphone or PC.

102
00:15:11,520 --> 00:15:23,120
So you don't need any Wi-Fi connection to control and monitor your home appliances.

103
00:15:24,320 --> 00:15:31,440
So we have successfully made this smart home controller project with Dwin HMI display and ESP32.

104
00:15:31,440 --> 00:15:35,280
So you can see the UI looks pretty good in this HMI display.

105
00:15:36,640 --> 00:15:39,120
I hope the tutorial was helpful to you.

106
00:15:39,840 --> 00:15:44,640
If it really help you then don't hesitate to like and subscribe to this channel.

107
00:15:45,280 --> 00:15:47,680
It's me Elsan signing off for today.

108
00:15:47,680 --> 00:15:49,680
Catch you soon on the next one.

